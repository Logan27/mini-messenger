
[94m============================================================================[0m
[94m         MESSENGER API COMPREHENSIVE TEST SUITE[0m
[94m============================================================================[0m

Starting API tests at 21/10/2025 12:49:12.01
API URL: http://localhost:4000

[93m============================================================================[0m
[93mSECTION 1: HEALTH CHECK ENDPOINTS (4 endpoints)[0m
[93m============================================================================[0m

[1] Testing GET /health - Health Check
[92m✓ PASS[0m - Health check endpoint accessible

[2] Testing GET /health/detailed - Detailed Health Check
[92m✓ PASS[0m - Detailed health check accessible

[3] Testing GET /health/ready - Readiness Check
[92m✓ PASS[0m - Readiness check accessible

[4] Testing GET /health/live - Liveness Check
[92m✓ PASS[0m - Liveness check accessible

[93m============================================================================[0m
[93mSECTION 2: AUTHENTICATION ENDPOINTS (9 endpoints)[0m
[93m============================================================================[0m

[5] Testing POST /api/auth/register - User Registration
[93m⊘ SKIP[0m - Using existing test user instead

[6] Testing POST /api/auth/login - User Login
[92m✓ PASS[0m - User login successful
  Access Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiO...
  User ID: 6ee36bd6-22d5-4798-92a2-7d4d2ff49768

[7] Testing GET /api/auth/me - Get Current User Profile
[92m✓ PASS[0m - User profile retrieved

[8] Testing POST /api/auth/refresh - Refresh Access Token
[92m✓ PASS[0m - Token refresh successful

[9] Testing POST /api/auth/forgot-password - Request Password Reset
[92m✓ PASS[0m - Password reset request processed

[10-13] [93m⊘ SKIP[0m - Email verification & password reset (require tokens)

[93m============================================================================[0m
[93mSECTION 3: USER MANAGEMENT ENDPOINTS (10 endpoints)[0m
[93m============================================================================[0m

[14] Testing GET /api/users/me - Get Current User Profile
[92m✓ PASS[0m - User profile retrieved

[15] Testing PUT /api/users/me - Update User Profile
[92m✓ PASS[0m - User profile updated

[16] Testing GET /api/users/search?q=test - Search Users
[92m✓ PASS[0m - User search successful

[17] Testing GET /api/users - List Users with Pagination
[92m✓ PASS[0m - User list retrieved

[18-23] [93m⊘ SKIP[0m - Avatar upload, user deletion, device tokens, data export

[93m============================================================================[0m
[93mSECTION 4: MESSAGING ENDPOINTS (9 endpoints)[0m
[93m============================================================================[0m

[24] Testing POST /api/messages - Send New Message
[92m✓ PASS[0m - Message sent successfully

[25] Testing GET /api/messages?conversationWith={userId} - Get Conversation
[92m✓ PASS[0m - Conversation messages retrieved

[26] Testing GET /api/messages/search?q=test - Search Messages
[92m✓ PASS[0m - Message search successful

[27] Testing GET /api/messages/conversations - Get Conversations List
[92m✓ PASS[0m - Conversations list retrieved

[28-32] [93m⊘ SKIP[0m - Mark read/delivered, edit, delete, edit history

[93m============================================================================[0m
[93mSECTION 5: CONTACTS ENDPOINTS (6 endpoints)[0m
[93m============================================================================[0m

[33] Testing GET /api/contacts - Get Contacts List
[92m✓ PASS[0m - Contacts list retrieved

[34] Testing GET /api/contacts/search?q=test - Search Contacts
[92m✓ PASS[0m - Contact search successful

[35-38] [93m⊘ SKIP[0m - Add contact, remove, block, unblock

[93m============================================================================[0m
[93mSECTION 6: GROUPS ENDPOINTS (9 endpoints)[0m
[93m============================================================================[0m

[39] Testing GET /api/groups - Get User's Groups
[92m✓ PASS[0m - Groups list retrieved

[40] Testing POST /api/groups - Create New Group
[92m✓ PASS[0m - Group created successfully

[41-47] [93m⊘ SKIP[0m - Get group, update, delete, members management

[93m============================================================================[0m
[93mSECTION 7: CALLS ENDPOINTS (4 endpoints)[0m
[93m============================================================================[0m

[48-51] [93m⊘ SKIP[0m - Initiate call, respond, get details, end call

[93m============================================================================[0m
[93mSECTION 8: FILES ENDPOINTS (8 endpoints)[0m
[93m============================================================================[0m

[52] Testing GET /api/files - List User's Files
[92m✓ PASS[0m - Files list retrieved

[53-59] [93m⊘ SKIP[0m - Upload, download, thumbnails, admin operations

[93m============================================================================[0m
[93mSECTION 9: ENCRYPTION ENDPOINTS (4 endpoints)[0m
[93m============================================================================[0m

[60] Testing POST /api/encryption/keypair - Generate E2E Key Pair
[92m✓ PASS[0m - Key pair generated

[61-63] [93m⊘ SKIP[0m - Get public key, batch keys, update key

[93m============================================================================[0m
[93mSECTION 10: NOTIFICATIONS ENDPOINTS (7 endpoints)[0m
[93m============================================================================[0m

[64] Testing GET /api/notifications - Get User Notifications
[92m✓ PASS[0m - Notifications retrieved

[65] Testing GET /api/notifications/unread-count - Get Unread Count
[92m✓ PASS[0m - Unread count retrieved

[66] Testing PUT /api/notifications/mark-all-read - Mark All as Read
[92m✓ PASS[0m - All notifications marked as read

[67-70] [93m⊘ SKIP[0m - Mark single read, delete, create, cleanup

[93m============================================================================[0m
[93mSECTION 11: NOTIFICATION SETTINGS ENDPOINTS (4 endpoints)[0m
[93m============================================================================[0m

[71] Testing GET /api/notification-settings - Get Settings
[92m✓ PASS[0m - Notification settings retrieved

[72-74] [93m⊘ SKIP[0m - Update settings, reset, preview

[93m============================================================================[0m
[93mSECTION 12: ANNOUNCEMENTS ENDPOINTS (1 endpoint)[0m
[93m============================================================================[0m

[75] Testing GET /api/announcements - Get Active Announcements
[92m✓ PASS[0m - Announcements retrieved

[93m============================================================================[0m
[93mSECTION 13: ADMIN ENDPOINTS (30 endpoints - Requires Admin Access)[0m
[93m============================================================================[0m

[Admin] Testing POST /api/auth/login - Admin Login
[91m✗ FAIL[0m - Admin login failed

[76] Testing GET /api/admin/stats - Get System Statistics
[93m⊘ SKIP[0m - No admin token available

[77] Testing GET /api/admin/users/pending - Get Pending Users
[93m⊘ SKIP[0m - No admin token available

[78] Testing GET /api/admin/users - Get All Users
[93m⊘ SKIP[0m - No admin token available

[79] Testing GET /api/admin/audit-logs - Get Audit Logs
[93m⊘ SKIP[0m - No admin token available

[80] Testing GET /api/admin/reports - Get Reports
[93m⊘ SKIP[0m - No admin token available

[81] Testing GET /api/admin/settings - Get System Settings
[93m⊘ SKIP[0m - No admin token available

[82] Testing GET /api/admin/announcements - Get Announcements (Admin View)
[93m⊘ SKIP[0m - No admin token available

[83] Testing GET /api/admin/monitoring - Get Monitoring Data
[93m⊘ SKIP[0m - No admin token available

[84-105] [93m⊘ SKIP[0m - User approval, deactivation, reports resolution, exports (require IDs)

[93m============================================================================[0m
[93mLOGOUT AND CLEANUP[0m
[93m============================================================================[0m

[Final] Testing POST /api/auth/logout - User Logout
[92m✓ PASS[0m - User logged out successfully


[94m============================================================================[0m
[94m                        TEST SUMMARY[0m
[94m============================================================================[0m

Total Tests:    107
[92mPassed:         28[0m
[91mFailed:         1[0m
[93mSkipped:        78[0m
Success Rate:   26%

Test completed at 21/10/2025 12:49:23.53

[91m⚠ WARNING: Some tests failed. Review the output above.[0m
