
> messenger-backend@1.0.0 dev
> nodemon src/server.js

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): src\**\*[39m
[33m[nodemon] watching extensions: js,json[39m
[32m[nodemon] starting `node src/server.js`[39m
âœ… Sequelize instance created for development environment
2025-10-21T13:53:54.888Z [[32minfo[39m]: Notification settings cache cleanup initialized
2025-10-21T13:53:54.890Z [[32minfo[39m]: Auto cleanup for expired notifications started
2025-10-21T13:53:55.135Z [[32minfo[39m]: Data retention job scheduled.
ðŸ“š Swagger UI will be available at /api-docs
ðŸ”§ Starting server initialization...
ðŸ“ Initializing logger...
âœ… Logger initialized
ðŸ’¾ Initializing database...
Executing (default): SELECT 1
âœ… Database connection established successfully.
âš ï¸  Database sync disabled (models have naming inconsistencies)
âœ… Database initialized
ðŸ”´ Initializing Redis...
âœ… Redis connection established successfully
âœ… Redis initialized
ðŸ“¦ Loading app.js...
ðŸ“¦ App.js loaded, initializing services...
2025-10-21T13:53:55.279Z [[32minfo[39m]: Upload directories created successfully
{
  "uploadDir": "./uploads",
  "tempDir": "./uploads/temp"
}
2025-10-21T13:53:55.280Z [[33mwarn[39m]: âš ï¸  ClamAV not available on Windows - virus scanning disabled for development
2025-10-21T13:53:55.281Z [[32minfo[39m]: File upload service initialized successfully
âœ… File upload service initialized
2025-10-21T13:53:55.282Z [[33mwarn[39m]: âš ï¸  Virus update service skipped on Windows (ClamAV not available)
2025-10-21T13:53:55.288Z [[32minfo[39m]: Generated fallback icon for document:
2025-10-21T13:53:55.291Z [[32minfo[39m]: Generated fallback icon for video:
2025-10-21T13:53:55.294Z [[32minfo[39m]: Generated fallback icon for audio:
2025-10-21T13:53:55.296Z [[32minfo[39m]: Generated fallback icon for archive:
2025-10-21T13:53:55.299Z [[32minfo[39m]: Generated fallback icon for code:
2025-10-21T13:53:55.301Z [[32minfo[39m]: Generated fallback icon for default:
2025-10-21T13:53:55.317Z [[32minfo[39m]: Daily thumbnail cleanup scheduled for 2:00 AM
2025-10-21T13:53:55.317Z [[32minfo[39m]: Thumbnail service initialized successfully
2025-10-21T13:53:55.320Z [[32minfo[39m]: File cleanup jobs scheduled
2025-10-21T13:53:55.320Z [[32minfo[39m]: File cleanup service initialized successfully
âœ… Services initialized
ðŸš€ Creating server...
ðŸš€ =====================================
ðŸš€ Messenger Backend Server
ðŸš€ =====================================
ðŸ“ Environment: development
ðŸŒ Server: http://0.0.0.0:4000
ðŸ“š API Docs: http://localhost:4000/api-docs
ðŸ¥ Health: http://localhost:4000/health
â±ï¸  Started at: 2025-10-21T13:53:55.322Z
ðŸš€ =====================================

ðŸ”§ Development Mode Features:
  â€¢ Hot reload enabled
  â€¢ Detailed error messages
  â€¢ Request logging enabled
  â€¢ CORS configured for local development
ðŸš€ =====================================
ðŸš€ Server running on 0.0.0.0:4000
ðŸ“š API Documentation available at http://localhost:4000/api-docs
ðŸ¥ Health check available at http://localhost:4000/health
âœ… Message service initialized
ðŸ“¡ WebSocket server initialized with Redis adapter for scaling
âœ… WebSocket service initialized successfully
Executing (default): SELECT 1
[2025-10-21 15:54:04] [61c2aa79-4ad6-4d5c-8cee-d58948308f5b] GET /health 200 - 17ms - GET /health
[0mGET /health [32m200[0m 14.741 ms - 769[0m
Executing (default): SELECT 1
[2025-10-21 15:54:14] [a8db2e0d-068d-48a1-874d-a811a07c1037] GET /health 200 - 7ms - GET /health
[0mGET /health [32m200[0m 6.523 ms - 769[0m
Executing (default): SELECT 1
Executing (default): SELECT count(*) AS "count" FROM "messages" AS "Message" WHERE ("Message"."deletedAt" IS NULL AND "Message"."status" = 'pending');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
[2025-10-21 15:54:14] [6f8d0577-e011-4853-a21e-a9ef8b38f7ce] GET /health/detailed 200 - 330ms - GET /health/detailed
[0mGET /health/detailed [32m200[0m 328.610 ms - 2254[0m
Executing (default): SELECT 1
[2025-10-21 15:54:14] [df7b88b7-13f3-4b4d-a4d4-90b813ceca02] GET /health/ready 200 - 6ms - GET /health/ready
[0mGET /health/ready [32m200[0m 5.532 ms - 238[0m
[2025-10-21 15:54:15] [62df273c-b0da-45f7-a3c7-98ae25016132] GET /health/live 200 - 1ms - GET /health/live
[0mGET /health/live [32m200[0m 0.621 ms - 77[0m
[2025-10-21 15:54:15] [0e3ad103-152c-4190-a6b5-ecbf4a65ae11] POST /api/auth/register 400 - 6ms - POST /api/auth/register
[0mPOST /api/auth/register [33m400[0m 5.135 ms - 328[0m
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND ("User"."email" = 'testuser1' OR "User"."username" = 'testuser1')) LIMIT 1;
Executing (default): UPDATE "users" SET "lastLoginAt"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): INSERT INTO "sessions" ("id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9) RETURNING "id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt";
2025-10-21T13:54:17.787Z [[31merror[39m]: Failed to store session in Redis: Connection in subscriber mode, only subscriber commands may be used
{
  "stack": "Error: Connection in subscriber mode, only subscriber commands may be used\n    at EventEmitter.sendCommand (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\Redis.js:338:28)\n    at EventEmitter.setex (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\utils\\Commander.js:90:25)\n    at AuthController.storeSessionInRedis (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:704:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:214:7)"
}
2025-10-21T13:54:17.788Z [[32minfo[39m]: User logged in: testuser1 (user1@test.com)
[2025-10-21 15:54:17] [f1f3a6a4-a36c-470d-a2f0-f6a4a0c150d6] POST /api/auth/login 200 - 496ms - POST /api/auth/login
[0mPOST /api/auth/login [32m200[0m 494.857 ms - 1198[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:19.501 +00:00';
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
2025-10-21T13:54:19.868Z [[32minfo[39m]: Authentication successful for user: testuser1 (6ee36bd6-22d5-4798-92a2-7d4d2ff49768)
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
[2025-10-21 15:54:19] [af6b21aa-532c-4b94-8d66-4e1d6dcc8e1e] GET /api/auth/me 200 - 374ms - GET /api/auth/me
[0mGET /api/auth/me [32m200[0m 373.908 ms - 539[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."refreshToken" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsInR5cGUiOiJyZWZyZXNoIiwiaWF0IjoxNzYxMDU0ODU3LCJleHAiOjE3NjM2NDY4NTcsImF1ZCI6Im1lc3Nlbmdlci11c2VycyIsImlzcyI6Im1lc3Nlbmdlci1iYWNrZW5kIiwic3ViIjoiNmVlMzZiZDYtMjJkNS00Nzk4LTkyYTItN2Q0ZDJmZjQ5NzY4In0.-_CoqOJTeuoerdzxQ23QjOx5-zJtTsv9qwVuRJrkN7Q' AND "Session"."expiresAt" > '2025-10-21 13:54:20.172 +00:00';
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
Executing (default): UPDATE "sessions" SET "token"=$1,"refreshToken"=$2,"lastAccessedAt"=$3 WHERE "id" = $4
2025-10-21T13:54:20.184Z [[31merror[39m]: Failed to store session in Redis: Connection in subscriber mode, only subscriber commands may be used
{
  "stack": "Error: Connection in subscriber mode, only subscriber commands may be used\n    at EventEmitter.sendCommand (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\Redis.js:338:28)\n    at EventEmitter.setex (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\utils\\Commander.js:90:25)\n    at AuthController.storeSessionInRedis (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:704:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async refreshToken (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:319:9)"
}
2025-10-21T13:54:20.184Z [[32minfo[39m]: Token refreshed for user: testuser1
[2025-10-21 15:54:20] [3162b6b5-e93b-4478-81bc-48c4477266cc] POST /api/auth/refresh 200 - 14ms - POST /api/auth/refresh
[0mPOST /api/auth/refresh [32m200[0m 12.905 ms - 976[0m
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."email" = 'testuser1@test.com');
[2025-10-21 15:54:20] [a774649f-a6ca-47ff-8312-efac006dc1b9] POST /api/auth/forgot-password 200 - 14ms - POST /api/auth/forgot-password
[0mPOST /api/auth/forgot-password [32m200[0m 13.772 ms - 103[0m
[2025-10-21 15:54:23] [e73434d8-d156-4103-bbe1-9e4f7824d9dc] POST /api/auth/verify-email 404 - 1ms - POST /api/auth/verify-email
[0mPOST /api/auth/verify-email [33m404[0m 0.870 ms - 62[0m
[2025-10-21 15:54:23] [409dc834-50ca-4e37-8a22-59db4d4dd9dc] POST /api/auth/reset-password 400 - 2ms - POST /api/auth/reset-password
[0mPOST /api/auth/reset-password [33m400[0m 1.801 ms - 370[0m
[2025-10-21 15:54:23] [a5c40ad6-a1a9-4ff2-b291-7659bd3cf2c3] POST /api/auth/change-password 404 - 1ms - POST /api/auth/change-password
[0mPOST /api/auth/change-password [33m404[0m 0.468 ms - 65[0m
[2025-10-21 15:54:25] [9b2b62be-59c7-439a-8c73-08d36bc4d842] POST /api/auth/resend-verification 404 - 1ms - POST /api/auth/resend-verification
[0mPOST /api/auth/resend-verification [33m404[0m 0.398 ms - 69[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:25.744 +00:00';
[2025-10-21 15:54:25] [a5afda4b-760c-4a1a-b1a1-6448862a737a] GET /api/users/me 401 - 3ms - GET /api/users/me
[0mGET /api/users/me [33m401[0m 3.261 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:26.016 +00:00';
[2025-10-21 15:54:26] [847b3091-728a-4a36-85ab-a24bda8ecec7] PUT /api/users/me 401 - 3ms - PUT /api/users/me
[0mPUT /api/users/me [33m401[0m 3.250 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:26.279 +00:00';
[2025-10-21 15:54:26] [9e9d0282-89c6-4fb3-9b3d-10cb17e68398] GET /api/users/search?q=test 401 - 5ms - GET /api/users/search?q=test
[0mGET /api/users/search?q=test [33m401[0m 4.355 ms - 98[0m
Executing (default): SELECT count(*) AS "count" FROM "users" AS "User" WHERE "User"."deletedAt" IS NULL;
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE "User"."deletedAt" IS NULL ORDER BY "User"."createdAt" DESC LIMIT 10 OFFSET 0;
[2025-10-21 15:54:26] [e0f3e75b-1c7d-4029-8c7d-a1e4a6d9f0ca] undefined undefined undefined - undefinedms - Users list retrieved successfully
[2025-10-21 15:54:26] [e0f3e75b-1c7d-4029-8c7d-a1e4a6d9f0ca] GET /api/users?page=1&limit=10 200 - 35ms - GET /api/users?page=1&limit=10
[0mGET /api/users?page=1&limit=10 [32m200[0m 34.505 ms - 5340[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:26.917 +00:00';
[2025-10-21 15:54:26] [699285df-1b7a-452b-94c2-fd69ec0076f9] POST /api/users/me/avatar 401 - 32ms - POST /api/users/me/avatar
[0mPOST /api/users/me/avatar [33m401[0m 31.588 ms - 98[0m
[2025-10-21 15:54:27] [b43a2cd3-8abd-4bf2-8fc2-f235a2a61def] POST /api/auth/register 400 - 1ms - POST /api/auth/register
[0mPOST /api/auth/register [33m400[0m 0.915 ms - 328[0m
[2025-10-21 15:54:28] [aeb00fa3-e820-48d1-a8fa-98ff71c5b23f] POST /api/auth/login 400 - 1ms - POST /api/auth/login
[0mPOST /api/auth/login [33m400[0m 1.322 ms - 180[0m
[2025-10-21 15:54:29] [c02a57ff-13d5-4847-b839-d925368c3e3e] DELETE /api/users/me 401 - 1ms - DELETE /api/users/me
[0mDELETE /api/users/me [33m401[0m 0.690 ms - 87[0m
[2025-10-21 15:54:29] [ccb4ec78-e86d-426d-9de3-2fd0e076085f] POST /api/users/me/device-token 404 - 1ms - POST /api/users/me/device-token
[0mPOST /api/users/me/device-token [33m404[0m 0.689 ms - 66[0m
[2025-10-21 15:54:29] [6b9a8fb0-d8a2-484d-a029-80c30b98b964] DELETE /api/users/me/device-token 404 - 0ms - DELETE /api/users/me/device-token
[0mDELETE /api/users/me/device-token [33m404[0m 0.663 ms - 66[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:30.248 +00:00';
[2025-10-21 15:54:30] [f9da31db-a9e7-45a9-ad7c-c76a8843a133] GET /api/users/me/export 401 - 4ms - GET /api/users/me/export
[0mGET /api/users/me/export [33m401[0m 3.855 ms - 98[0m
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
[2025-10-21 15:54:30] [d3c9ce19-0b8f-4594-800b-955a910d737a] undefined undefined undefined - undefinedms - User retrieved successfully
[2025-10-21 15:54:30] [d3c9ce19-0b8f-4594-800b-955a910d737a] GET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 200 - 7ms - GET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [32m200[0m 7.349 ms - 530[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:30.835 +00:00';
[2025-10-21 15:54:30] [17061390-4b4b-4170-9658-e57272742ccb] POST /api/messages 401 - 3ms - POST /api/messages
[0mPOST /api/messages [33m401[0m 3.460 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:31.534 +00:00';
[2025-10-21 15:54:31] [8b7e0da1-f725-47cd-a438-6026977ce4ef] GET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768 401 - 3ms - GET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [33m401[0m 3.150 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:31.800 +00:00';
[2025-10-21 15:54:31] [eba4398d-5058-4b4c-99c7-c1c4d014e760] GET /api/messages/search?q=test 401 - 4ms - GET /api/messages/search?q=test
[0mGET /api/messages/search?q=test [33m401[0m 3.209 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:32.064 +00:00';
[2025-10-21 15:54:32] [4e4389cf-67d6-4824-ad90-55ff719460fc] GET /api/messages/conversations 401 - 3ms - GET /api/messages/conversations
[0mGET /api/messages/conversations [33m401[0m 3.008 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:32.348 +00:00';
[2025-10-21 15:54:32] [a6fe639c-076c-49ff-990d-e1f74e4e3f5c] GET /api/contacts 401 - 8ms - GET /api/contacts
[0mGET /api/contacts [33m401[0m 7.321 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:32.648 +00:00';
[2025-10-21 15:54:32] [64c5aaaf-ed78-4523-96d0-17611ec9feb6] GET /api/contacts/search?q=test 401 - 3ms - GET /api/contacts/search?q=test
[0mGET /api/contacts/search?q=test [33m401[0m 3.227 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:32.914 +00:00';
[2025-10-21 15:54:32] [92b6d698-677e-4efb-997b-23448af321d7] POST /api/contacts 401 - 4ms - POST /api/contacts
[0mPOST /api/contacts [33m401[0m 3.460 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:33.679 +00:00';
[2025-10-21 15:54:33] [fd5814de-95d6-47e0-a382-b931f18ed30f] POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block 401 - 3ms - POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block
[0mPOST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block [33m401[0m 3.015 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:33.940 +00:00';
[2025-10-21 15:54:33] [78c82bea-2bfa-4e3b-a3de-52e5e8a22640] POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock 401 - 9ms - POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock
[0mPOST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock [33m401[0m 8.750 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:34.252 +00:00';
[2025-10-21 15:54:34] [ab514615-dbfc-4044-b3a3-d9a50ddf3695] GET /api/groups 401 - 3ms - GET /api/groups
[0mGET /api/groups [33m401[0m 3.015 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:34.536 +00:00';
[2025-10-21 15:54:34] [05323252-7f58-48b0-9cf3-0c7bba9f0987] POST /api/groups 401 - 3ms - POST /api/groups
[0mPOST /api/groups [33m401[0m 2.900 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:35.321 +00:00';
[2025-10-21 15:54:35] [3ed33117-389a-436f-abdf-2ad3229e9bec] POST /api/calls 401 - 4ms - POST /api/calls
[0mPOST /api/calls [33m401[0m 4.258 ms - 98[0m
[2025-10-21 15:54:35] [e9609ecc-1128-4b49-9602-cefe017c6c04] POST /api/calls/dummy-call-id/respond 404 - 1ms - POST /api/calls/dummy-call-id/respond
[0mPOST /api/calls/dummy-call-id/respond [33m404[0m 1.257 ms - 72[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:36.013 +00:00';
[2025-10-21 15:54:36] [5997203b-eeef-405b-8b62-f49e9e39f030] GET /api/calls/dummy-call-id 401 - 3ms - GET /api/calls/dummy-call-id
[0mGET /api/calls/dummy-call-id [33m401[0m 2.958 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:36.293 +00:00';
[2025-10-21 15:54:36] [6271c61a-f1b2-43ed-b659-07b5273e248e] POST /api/calls/dummy-call-id/end 401 - 3ms - POST /api/calls/dummy-call-id/end
[0mPOST /api/calls/dummy-call-id/end [33m401[0m 3.208 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:36.581 +00:00';
[2025-10-21 15:54:36] [e4651416-6659-4094-8c05-aab31d967e4a] GET /api/files 401 - 4ms - GET /api/files
[0mGET /api/files [33m401[0m 3.585 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:36.886 +00:00';
[2025-10-21 15:54:36] [dbb4efcb-0dde-4c73-9b4c-c1db6a2e7541] POST /api/files/upload 401 - 3ms - POST /api/files/upload
[0mPOST /api/files/upload [33m401[0m 2.687 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:37.698 +00:00';
[2025-10-21 15:54:37] [10dec56a-ae1e-433f-9bca-42142fbdfb91] POST /api/encryption/keypair 401 - 4ms - POST /api/encryption/keypair
[0mPOST /api/encryption/keypair [33m401[0m 3.287 ms - 98[0m
[2025-10-21 15:54:37] [b724f633-1ed5-4a10-bff0-3556274f2bde] GET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 404 - 1ms - GET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [33m404[0m 0.530 ms - 102[0m
[2025-10-21 15:54:38] [bf4b0825-dd60-438f-8809-22914333013b] POST /api/encryption/publickeys/batch 404 - 1ms - POST /api/encryption/publickeys/batch
[0mPOST /api/encryption/publickeys/batch [33m404[0m 0.894 ms - 72[0m
[2025-10-21 15:54:38] [bd59e439-5d19-4245-9587-aa9628c934b9] PUT /api/encryption/keypair 404 - 1ms - PUT /api/encryption/keypair
[0mPUT /api/encryption/keypair [33m404[0m 0.339 ms - 63[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:38.820 +00:00';
[2025-10-21 15:54:38] [4929dd08-f411-498c-8ccc-85abe2947028] GET /api/notifications 401 - 4ms - GET /api/notifications
[0mGET /api/notifications [33m401[0m 3.055 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:39.563 +00:00';
[2025-10-21 15:54:39] [723f5afd-5c4d-4631-b10f-8f00d2ab5302] GET /api/notifications/unread-count 401 - 3ms - GET /api/notifications/unread-count
[0mGET /api/notifications/unread-count [33m401[0m 3.169 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:39.834 +00:00';
[2025-10-21 15:54:39] [752b0c43-d346-4a3a-a21e-0ee9fdaa090c] PUT /api/notifications/mark-all-read 401 - 3ms - PUT /api/notifications/mark-all-read
[0mPUT /api/notifications/mark-all-read [33m401[0m 3.245 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:40.141 +00:00';
[2025-10-21 15:54:40] [ebd97fe4-3bb0-4b0a-93f9-b328b187f74e] GET /api/notification-settings 401 - 3ms - GET /api/notification-settings
[0mGET /api/notification-settings [33m401[0m 3.060 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:40.411 +00:00';
[2025-10-21 15:54:40] [f5d004c9-00bd-40ac-980a-f47c6ccfe516] PUT /api/notification-settings 401 - 4ms - PUT /api/notification-settings
[0mPUT /api/notification-settings [33m401[0m 2.951 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:40.675 +00:00';
[2025-10-21 15:54:40] [33afe810-6748-4a2f-b090-21326b15525d] POST /api/notification-settings/reset 401 - 4ms - POST /api/notification-settings/reset
[0mPOST /api/notification-settings/reset [33m401[0m 3.467 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:40.945 +00:00';
[2025-10-21 15:54:40] [bc00c08f-678f-41fb-9cea-6caa7e11a8c7] GET /api/notification-settings/preview 401 - 3ms - GET /api/notification-settings/preview
[0mGET /api/notification-settings/preview [33m401[0m 3.150 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU' AND "Session"."expiresAt" > '2025-10-21 13:54:41.216 +00:00';
[2025-10-21 15:54:41] [c50bc0ba-d7b1-4beb-abf4-2b8cbac16f0a] GET /api/announcements 401 - 4ms - GET /api/announcements
[0mGET /api/announcements [33m401[0m 3.330 ms - 98[0m
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND ("User"."email" = 'admin' OR "User"."username" = 'admin')) LIMIT 1;
Executing (default): UPDATE "users" SET "lastLoginAt"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): INSERT INTO "sessions" ("id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9) RETURNING "id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt";
2025-10-21T13:54:42.274Z [[31merror[39m]: Failed to store session in Redis: Connection in subscriber mode, only subscriber commands may be used
{
  "stack": "Error: Connection in subscriber mode, only subscriber commands may be used\n    at EventEmitter.sendCommand (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\Redis.js:338:28)\n    at EventEmitter.setex (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\utils\\Commander.js:90:25)\n    at AuthController.storeSessionInRedis (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:704:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:214:7)"
}
2025-10-21T13:54:42.274Z [[32minfo[39m]: User logged in: admin (admin@messenger.local)
[2025-10-21 15:54:42] [0cf509b5-3b9e-4882-8b96-6d17fe238a98] POST /api/auth/login 200 - 390ms - POST /api/auth/login
[0mPOST /api/auth/login [32m200[0m 389.645 ms - 1207[0m
[2025-10-21 15:54:43] [bf146baf-3f43-42f3-88f8-b0fdac1e6e50] GET /api/admin/stats 401 - 1ms - GET /api/admin/stats
[0mGET /api/admin/stats [33m401[0m 0.605 ms - 99[0m
[2025-10-21 15:54:43] [72caa380-523c-4d78-ad2e-86baf73271c4] GET /api/admin/users/pending 401 - 1ms - GET /api/admin/users/pending
[0mGET /api/admin/users/pending [33m401[0m 0.323 ms - 99[0m
[2025-10-21 15:54:44] [290e2613-1cb7-4ee5-8369-6aee8bc31f74] GET /api/admin/users?page=1&limit=10 401 - 1ms - GET /api/admin/users?page=1&limit=10
[0mGET /api/admin/users?page=1&limit=10 [33m401[0m 0.416 ms - 99[0m
[2025-10-21 15:54:44] [48da6e5c-61f5-4dff-83f1-b12677efc73d] GET /api/admin/audit-logs?page=1&limit=10 401 - 1ms - GET /api/admin/audit-logs?page=1&limit=10
[0mGET /api/admin/audit-logs?page=1&limit=10 [33m401[0m 0.316 ms - 99[0m
[2025-10-21 15:54:44] [52fbb646-8171-4717-8df6-5bf69a5a51e4] GET /api/admin/reports?page=1&limit=10 401 - 0ms - GET /api/admin/reports?page=1&limit=10
[0mGET /api/admin/reports?page=1&limit=10 [33m401[0m 0.379 ms - 99[0m
[2025-10-21 15:54:44] [1b51fe13-9b7c-4c46-b72f-b73952cdab36] GET /api/admin/settings 401 - 0ms - GET /api/admin/settings
[0mGET /api/admin/settings [33m401[0m 0.360 ms - 99[0m
[2025-10-21 15:54:45] [db995c13-d7b5-454e-ae04-5ad16ebd0b3d] GET /api/admin/announcements 401 - 1ms - GET /api/admin/announcements
[0mGET /api/admin/announcements [33m401[0m 0.511 ms - 99[0m
[2025-10-21 15:54:45] [0b0c5a5a-de4d-4260-a837-46141cbd0a2a] GET /api/admin/monitoring 401 - 0ms - GET /api/admin/monitoring
[0mGET /api/admin/monitoring [33m401[0m 0.311 ms - 99[0m
[2025-10-21 15:54:45] [93ac0024-b960-47f7-809b-803d06b78cf1] POST /api/admin/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/approve 401 - 0ms - POST /api/admin/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/approve
[0mPOST /api/admin/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/approve [33m401[0m 0.410 ms - 99[0m
Executing (default): DELETE FROM "sessions" WHERE "token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDg1NywiZXhwIjoxNzYxNjU5NjU3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.p5_DNcNY6a5EDt_MtQNltXsBk5iM7oxmPMKnOCAINMU'
2025-10-21T13:54:45.972Z [[31merror[39m]: Logout error: Cannot read properties of undefined (reading 'removeSessionFromRedis')
{
  "stack": "TypeError: Cannot read properties of undefined (reading 'removeSessionFromRedis')\n    at logout (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:365:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
[2025-10-21 15:54:45] [353cd931-c6ea-4c10-9e07-1eb7cd10d0b3] POST /api/auth/logout 200 - 3ms - POST /api/auth/logout
[0mPOST /api/auth/logout [32m200[0m 3.267 ms - 46[0m
Executing (default): DELETE FROM "sessions" WHERE "token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI3N2I2NjNlMC1hNGI2LTRlMzYtYWMxOC1jMzdhYWY2MTUxNjIiLCJ1c2VybmFtZSI6ImFkbWluIiwiZW1haWwiOiJhZG1pbkBtZXNzZW5nZXIubG9jYWwiLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NjEwNTQ4ODIsImV4cCI6MTc2MTY1OTY4MiwiYXVkIjoibWVzc2VuZ2VyLXVzZXJzIiwiaXNzIjoibWVzc2VuZ2VyLWJhY2tlbmQiLCJzdWIiOiI3N2I2NjNlMC1hNGI2LTRlMzYtYWMxOC1jMzdhYWY2MTUxNjIifQ.iKjuAkaRdbZ9hqn-plwnlc740KIvC7BHLW5MuT7EOck'
2025-10-21T13:54:46.250Z [[31merror[39m]: Logout error: Cannot read properties of undefined (reading 'removeSessionFromRedis')
{
  "stack": "TypeError: Cannot read properties of undefined (reading 'removeSessionFromRedis')\n    at logout (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:365:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
[2025-10-21 15:54:46] [c6f63e4b-1387-4bf8-bd1e-b0042e585e3b] POST /api/auth/logout 200 - 5ms - POST /api/auth/logout
[0mPOST /api/auth/logout [32m200[0m 4.746 ms - 46[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1MjE5OSwiZXhwIjoxNzYxNjU2OTk5LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.f-q6CXNgpMTAR8FjbdXx0aktObETcTfOXHkBHXP9w7c' AND "Session"."expiresAt" > '2025-10-21 13:56:33.898 +00:00';
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
2025-10-21T13:56:33.912Z [[32minfo[39m]: Authentication successful for user: testuser1 (6ee36bd6-22d5-4798-92a2-7d4d2ff49768)
Executing (default): INSERT INTO "messages" ("id","senderId","recipientId","content","encryptionMetadata","isEncrypted","messageType","status","deleteType","replyToId","metadata","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13) RETURNING "id","senderId","recipientId","groupId","content","encryptedContent","encryptionMetadata","isEncrypted","encryptionAlgorithm","messageType","status","editedAt","deleteType","deletedAt","replyToId","metadata","fileName","fileSize","mimeType","createdAt","updatedAt";
Executing (default): UPDATE "contacts" SET "lastContactAt"=$1,"updatedAt"=$2 WHERE ("deletedAt" IS NULL AND (("userId" = $3 AND "contactUserId" = $4) OR ("userId" = $5 AND "contactUserId" = $6)))
Executing (default): SELECT "Message"."id", "Message"."senderId", "Message"."recipientId", "Message"."groupId", "Message"."content", "Message"."encryptedContent", "Message"."encryptionMetadata", "Message"."isEncrypted", "Message"."encryptionAlgorithm", "Message"."messageType", "Message"."status", "Message"."editedAt", "Message"."deleteType", "Message"."deletedAt", "Message"."replyToId", "Message"."metadata", "Message"."fileName", "Message"."fileSize", "Message"."mimeType", "Message"."createdAt", "Message"."updatedAt", "sender"."id" AS "sender.id", "sender"."username" AS "sender.username", "sender"."firstName" AS "sender.firstName", "sender"."lastName" AS "sender.lastName" FROM "messages" AS "Message" LEFT OUTER JOIN "users" AS "sender" ON "Message"."senderId" = "sender"."id" AND ("sender"."deletedAt" IS NULL) WHERE ("Message"."deletedAt" IS NULL AND "Message"."id" = 'a5b65601-e540-41cc-9814-b474cb6a8eba');
[2025-10-21 15:56:33] [2f5b5025-8710-4a94-baab-575368aba273] POST /api/messages 201 - 47ms - POST /api/messages
[0mPOST /api/messages [32m201[0m 46.908 ms - 518[0m
Executing (default): SELECT 1
[2025-10-21 15:59:41] [d20d6508-aebf-45b9-bf6a-e6947aba7fee] GET /health 200 - 15ms - GET /health
[0mGET /health [32m200[0m 14.542 ms - 770[0m
Executing (default): SELECT 1
Executing (default): SELECT count(*) AS "count" FROM "messages" AS "Message" WHERE ("Message"."deletedAt" IS NULL AND "Message"."status" = 'pending');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
[2025-10-21 15:59:42] [6c4baf67-00dc-4ce7-aa22-7c02ffb8f677] GET /health/detailed 200 - 297ms - GET /health/detailed
[0mGET /health/detailed [32m200[0m 296.839 ms - 2256[0m
Executing (default): SELECT 1
[2025-10-21 15:59:42] [3ec1d212-435e-4b25-a5d4-67544f2da536] GET /health/ready 200 - 5ms - GET /health/ready
[0mGET /health/ready [32m200[0m 4.820 ms - 238[0m
[2025-10-21 15:59:42] [337d84f6-0647-4224-9f2a-5a2a63907c07] GET /health/live 200 - 0ms - GET /health/live
[0mGET /health/live [32m200[0m 0.444 ms - 78[0m
[2025-10-21 15:59:43] [5cd778a5-78a1-4884-8537-032e6ef25d96] POST /api/auth/register 400 - 1ms - POST /api/auth/register
[0mPOST /api/auth/register [33m400[0m 0.914 ms - 328[0m
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND ("User"."email" = 'testuser1' OR "User"."username" = 'testuser1')) LIMIT 1;
Executing (default): UPDATE "users" SET "lastLoginAt"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): INSERT INTO "sessions" ("id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9) RETURNING "id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt";
2025-10-21T13:59:45.124Z [[31merror[39m]: Failed to store session in Redis: Connection in subscriber mode, only subscriber commands may be used
{
  "stack": "Error: Connection in subscriber mode, only subscriber commands may be used\n    at EventEmitter.sendCommand (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\Redis.js:338:28)\n    at EventEmitter.setex (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\utils\\Commander.js:90:25)\n    at AuthController.storeSessionInRedis (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:704:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:214:7)"
}
2025-10-21T13:59:45.124Z [[32minfo[39m]: User logged in: testuser1 (user1@test.com)
[2025-10-21 15:59:45] [392e4095-dfe7-4a9d-a7a4-49e79bf27265] POST /api/auth/login 200 - 679ms - POST /api/auth/login
[0mPOST /api/auth/login [32m200[0m 679.032 ms - 1198[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NTE4NSwiZXhwIjoxNzYxNjU5OTg1LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.rVBXBNPrfN1CL5t3Lp2tEOAXQcE5vbExwZc9mTMfH_E' AND "Session"."expiresAt" > '2025-10-21 13:59:46.725 +00:00';
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
2025-10-21T13:59:46.738Z [[32minfo[39m]: Authentication successful for user: testuser1 (6ee36bd6-22d5-4798-92a2-7d4d2ff49768)
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
[2025-10-21 15:59:46] [7f9d5de5-f187-4f74-bb39-ff8b79138019] GET /api/auth/me 200 - 18ms - GET /api/auth/me
[0mGET /api/auth/me [32m200[0m 16.787 ms - 539[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."refreshToken" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsInR5cGUiOiJyZWZyZXNoIiwiaWF0IjoxNzYxMDU1MTg1LCJleHAiOjE3NjM2NDcxODUsImF1ZCI6Im1lc3Nlbmdlci11c2VycyIsImlzcyI6Im1lc3Nlbmdlci1iYWNrZW5kIiwic3ViIjoiNmVlMzZiZDYtMjJkNS00Nzk4LTkyYTItN2Q0ZDJmZjQ5NzY4In0.HrEugqpESQFQ_GrFKvBBzReSHR6gD4TUy-p2BIP1VUI' AND "Session"."expiresAt" > '2025-10-21 13:59:47.014 +00:00';
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
Executing (default): UPDATE "sessions" SET "token"=$1,"refreshToken"=$2,"lastAccessedAt"=$3 WHERE "id" = $4
2025-10-21T13:59:47.031Z [[31merror[39m]: Failed to store session in Redis: Connection in subscriber mode, only subscriber commands may be used
{
  "stack": "Error: Connection in subscriber mode, only subscriber commands may be used\n    at EventEmitter.sendCommand (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\Redis.js:338:28)\n    at EventEmitter.setex (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\utils\\Commander.js:90:25)\n    at AuthController.storeSessionInRedis (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:704:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async refreshToken (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:319:9)"
}
2025-10-21T13:59:47.031Z [[32minfo[39m]: Token refreshed for user: testuser1
[2025-10-21 15:59:47] [a737cbe4-6740-478e-9fa0-a1b2c1e11a06] POST /api/auth/refresh 200 - 18ms - POST /api/auth/refresh
[0mPOST /api/auth/refresh [32m200[0m 18.505 ms - 976[0m
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."email" = 'testuser1@test.com');
[2025-10-21 15:59:47] [1d46045b-6e41-4c49-9a33-6a5d801a43ef] POST /api/auth/forgot-password 200 - 5ms - POST /api/auth/forgot-password
[0mPOST /api/auth/forgot-password [32m200[0m 4.559 ms - 103[0m
[2025-10-21 15:59:50] [9350e2e7-fe10-42ba-acc3-ad6657819bc8] POST /api/auth/verify-email 404 - 0ms - POST /api/auth/verify-email
[0mPOST /api/auth/verify-email [33m404[0m 0.405 ms - 62[0m
[2025-10-21 15:59:50] [e2ecdb32-3ee3-4254-b995-a372a20e328f] POST /api/auth/reset-password 400 - 2ms - POST /api/auth/reset-password
[0mPOST /api/auth/reset-password [33m400[0m 2.037 ms - 370[0m
[2025-10-21 15:59:50] [bbddcd55-10dc-437a-a208-76b7ed3d5ea3] POST /api/auth/change-password 404 - 1ms - POST /api/auth/change-password
[0mPOST /api/auth/change-password [33m404[0m 0.715 ms - 65[0m
[2025-10-21 15:59:52] [d9184af1-7b88-4274-bb00-1573a8fec9a3] POST /api/auth/resend-verification 404 - 1ms - POST /api/auth/resend-verification
[0mPOST /api/auth/resend-verification [33m404[0m 0.293 ms - 69[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NTE4NSwiZXhwIjoxNzYxNjU5OTg1LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.rVBXBNPrfN1CL5t3Lp2tEOAXQcE5vbExwZc9mTMfH_E' AND "Session"."expiresAt" > '2025-10-21 13:59:52.685 +00:00';
[2025-10-21 15:59:52] [850e9445-4407-453d-92d0-4ce91836455f] GET /api/users/me 401 - 3ms - GET /api/users/me
[0mGET /api/users/me [33m401[0m 3.204 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NTE4NSwiZXhwIjoxNzYxNjU5OTg1LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.rVBXBNPrfN1CL5t3Lp2tEOAXQcE5vbExwZc9mTMfH_E' AND "Session"."expiresAt" > '2025-10-21 13:59:52.958 +00:00';
[2025-10-21 15:59:52] [83aac405-3cb6-4a38-b6ec-18a874a26d5f] PUT /api/users/me 401 - 3ms - PUT /api/users/me
[0mPUT /api/users/me [33m401[0m 2.787 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NTE4NSwiZXhwIjoxNzYxNjU5OTg1LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.rVBXBNPrfN1CL5t3Lp2tEOAXQcE5vbExwZc9mTMfH_E' AND "Session"."expiresAt" > '2025-10-21 13:59:53.219 +00:00';
[2025-10-21 15:59:53] [5ae2c152-941c-4726-b3d4-36a3ebb90046] GET /api/users/search?q=test 401 - 4ms - GET /api/users/search?q=test
[0mGET /api/users/search?q=test [33m401[0m 3.748 ms - 98[0m
Executing (default): SELECT count(*) AS "count" FROM "users" AS "User" WHERE "User"."deletedAt" IS NULL;
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE "User"."deletedAt" IS NULL ORDER BY "User"."createdAt" DESC LIMIT 10 OFFSET 0;
[2025-10-21 15:59:53] [8268b4da-662f-4245-81b2-402f1457de79] undefined undefined undefined - undefinedms - Users list retrieved successfully
[2025-10-21 15:59:53] [8268b4da-662f-4245-81b2-402f1457de79] GET /api/users?page=1&limit=10 200 - 5ms - GET /api/users?page=1&limit=10
[0mGET /api/users?page=1&limit=10 [32m200[0m 4.462 ms - 5340[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NTE4NSwiZXhwIjoxNzYxNjU5OTg1LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.rVBXBNPrfN1CL5t3Lp2tEOAXQcE5vbExwZc9mTMfH_E' AND "Session"."expiresAt" > '2025-10-21 13:59:53.799 +00:00';
[2025-10-21 15:59:53] [0f9e10fa-3a89-47de-ab32-17d9a47f304a] POST /api/users/me/avatar 401 - 3ms - POST /api/users/me/avatar
[0mPOST /api/users/me/avatar [33m401[0m 2.852 ms - 98[0m
[2025-10-21 15:59:54] [cbb2d89f-a2b5-4da3-9cdf-6cb3306a0221] POST /api/auth/register 400 - 1ms - POST /api/auth/register
[0mPOST /api/auth/register [33m400[0m 0.903 ms - 328[0m
[2025-10-21 15:59:55] [eedddb07-ba98-481d-b596-8f0c4b07bdfd] POST /api/auth/login 400 - 1ms - POST /api/auth/login
[0mPOST /api/auth/login [33m400[0m 0.512 ms - 180[0m
[2025-10-21 15:59:56] [9d1edd99-a031-4f17-960f-d7f97a05d852] DELETE /api/users/me 401 - 1ms - DELETE /api/users/me
[0mDELETE /api/users/me [33m401[0m 0.499 ms - 87[0m
[2025-10-21 15:59:56] [6de91c0c-6310-42a1-aa91-c50222a6b001] POST /api/users/me/device-token 404 - 0ms - POST /api/users/me/device-token
[0mPOST /api/users/me/device-token [33m404[0m 0.438 ms - 66[0m
[2025-10-21 15:59:56] [eed7d0db-22e3-47cd-9118-ac41c0eb427e] DELETE /api/users/me/device-token 404 - 0ms - DELETE /api/users/me/device-token
[0mDELETE /api/users/me/device-token [33m404[0m 0.330 ms - 66[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NTE4NSwiZXhwIjoxNzYxNjU5OTg1LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.rVBXBNPrfN1CL5t3Lp2tEOAXQcE5vbExwZc9mTMfH_E' AND "Session"."expiresAt" > '2025-10-21 13:59:57.085 +00:00';
[2025-10-21 15:59:57] [407edc9d-a36a-4790-ba6d-43c0145182ae] GET /api/users/me/export 401 - 4ms - GET /api/users/me/export
[0mGET /api/users/me/export [33m401[0m 3.706 ms - 98[0m
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
[2025-10-21 15:59:57] [a52b97e4-a6e7-44dd-8aed-5924ac3e10c2] undefined undefined undefined - undefinedms - User retrieved successfully
[2025-10-21 15:59:57] [a52b97e4-a6e7-44dd-8aed-5924ac3e10c2] GET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 200 - 10ms - GET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [32m200[0m 9.253 ms - 530[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NTE4NSwiZXhwIjoxNzYxNjU5OTg1LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.rVBXBNPrfN1CL5t3Lp2tEOAXQcE5vbExwZc9mTMfH_E' AND "Session"."expiresAt" > '2025-10-21 13:59:57.695 +00:00';
[2025-10-21 15:59:57] [ccd41624-8c25-4f84-aa8f-e76882238b55] POST /api/messages 401 - 3ms - POST /api/messages
[0mPOST /api/messages [33m401[0m 3.248 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NTE4NSwiZXhwIjoxNzYxNjU5OTg1LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.rVBXBNPrfN1CL5t3Lp2tEOAXQcE5vbExwZc9mTMfH_E' AND "Session"."expiresAt" > '2025-10-21 13:59:58.477 +00:00';
[2025-10-21 15:59:58] [3b6092dd-291f-479e-8571-ac4bcbeeafb6] GET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768 401 - 4ms - GET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [33m401[0m 3.161 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NTE4NSwiZXhwIjoxNzYxNjU5OTg1LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.rVBXBNPrfN1CL5t3Lp2tEOAXQcE5vbExwZc9mTMfH_E' AND "Session"."expiresAt" > '2025-10-21 13:59:58.747 +00:00';
[2025-10-21 15:59:58] [b5688bdd-b810-4f68-9ad3-23d81bd00925] GET /api/messages/search?q=test 401 - 8ms - GET /api/messages/search?q=test
[0mGET /api/messages/search?q=test [33m401[0m 8.420 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NTE4NSwiZXhwIjoxNzYxNjU5OTg1LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.rVBXBNPrfN1CL5t3Lp2tEOAXQcE5vbExwZc9mTMfH_E' AND "Session"."expiresAt" > '2025-10-21 13:59:59.039 +00:00';
[2025-10-21 15:59:59] [30b623e0-4b06-4670-a863-b802c9b47fcb] GET /api/messages/conversations 401 - 3ms - GET /api/messages/conversations
[0mGET /api/messages/conversations [33m401[0m 2.907 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NTE4NSwiZXhwIjoxNzYxNjU5OTg1LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.rVBXBNPrfN1CL5t3Lp2tEOAXQcE5vbExwZc9mTMfH_E' AND "Session"."expiresAt" > '2025-10-21 13:59:59.347 +00:00';
[2025-10-21 15:59:59] [a6368f91-b626-4553-849c-dc63d9621511] GET /api/contacts 401 - 8ms - GET /api/contacts
[0mGET /api/contacts [33m401[0m 8.106 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NTE4NSwiZXhwIjoxNzYxNjU5OTg1LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.rVBXBNPrfN1CL5t3Lp2tEOAXQcE5vbExwZc9mTMfH_E' AND "Session"."expiresAt" > '2025-10-21 13:59:59.632 +00:00';
[2025-10-21 15:59:59] [722cec81-4a3b-4c7b-86d1-72ab801e70d4] GET /api/contacts/search?q=test 401 - 2ms - GET /api/contacts/search?q=test
[0mGET /api/contacts/search?q=test [33m401[0m 2.819 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NTE4NSwiZXhwIjoxNzYxNjU5OTg1LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.rVBXBNPrfN1CL5t3Lp2tEOAXQcE5vbExwZc9mTMfH_E' AND "Session"."expiresAt" > '2025-10-21 13:59:59.904 +00:00';
[2025-10-21 15:59:59] [ab9845dd-8655-4de5-ad1f-ec6e12bcd0d1] POST /api/contacts 401 - 3ms - POST /api/contacts
[0mPOST /api/contacts [33m401[0m 3.024 ms - 98[0m
[2025-10-21 16:00:00] [c0e43bbb-024b-47f6-8d4f-1b45673b1a3a] POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block 429 - 1ms - POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block
[0mPOST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block [33m429[0m 0.462 ms - 67[0m
[2025-10-21 16:00:00] [a1fbe4a1-902c-47aa-adb0-54ae8023dd12] POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock 429 - 1ms - POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock
[0mPOST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock [33m429[0m 0.316 ms - 67[0m
[2025-10-21 16:00:01] [746af5cb-7773-4808-a18b-abbf000382cb] GET /api/groups 429 - 1ms - GET /api/groups
[0mGET /api/groups [33m429[0m 0.409 ms - 67[0m
[2025-10-21 16:00:01] [459d6d82-f146-4001-9474-b5c8d5e25fbf] POST /api/groups 429 - 1ms - POST /api/groups
[0mPOST /api/groups [33m429[0m 0.468 ms - 67[0m
[2025-10-21 16:00:01] [7d301e9b-cded-4b4d-aa33-d41cfa2b93e2] POST /api/calls 429 - 2ms - POST /api/calls
[0mPOST /api/calls [33m429[0m 0.800 ms - 67[0m
[2025-10-21 16:00:02] [779ee07f-ac5f-426e-a63f-91dd1eb8d1d6] POST /api/calls/dummy-call-id/respond 429 - 0ms - POST /api/calls/dummy-call-id/respond
[0mPOST /api/calls/dummy-call-id/respond [33m429[0m 0.311 ms - 67[0m
[2025-10-21 16:00:02] [e35fdcad-0910-4a8b-a039-9dbc1cac3c59] GET /api/calls/dummy-call-id 429 - 1ms - GET /api/calls/dummy-call-id
[0mGET /api/calls/dummy-call-id [33m429[0m 0.423 ms - 67[0m
[2025-10-21 16:00:02] [ba37ec1e-09c0-47ab-96af-633f669f7797] POST /api/calls/dummy-call-id/end 429 - 1ms - POST /api/calls/dummy-call-id/end
[0mPOST /api/calls/dummy-call-id/end [33m429[0m 0.288 ms - 67[0m
[2025-10-21 16:00:02] [3f2b8a4e-1542-432c-ba92-731890a9c394] GET /api/files 429 - 0ms - GET /api/files
[0mGET /api/files [33m429[0m 0.275 ms - 67[0m
[2025-10-21 16:00:03] [9cf4d3fc-357c-4700-bf51-97c97ce66383] POST /api/files/upload 429 - 1ms - POST /api/files/upload
[0mPOST /api/files/upload [33m429[0m 0.541 ms - 67[0m
[2025-10-21 16:00:03] [030b023a-1cde-4bdf-bc00-c5c69b8f20c9] POST /api/encryption/keypair 429 - 1ms - POST /api/encryption/keypair
[0mPOST /api/encryption/keypair [33m429[0m 0.418 ms - 67[0m
[2025-10-21 16:00:03] [fd76ab60-7e6e-476a-979e-5ba0a1e5c7eb] GET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 429 - 0ms - GET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [33m429[0m 0.348 ms - 67[0m
[2025-10-21 16:00:04] [326e66bc-c8af-4433-89cf-dd14a95ed8f2] POST /api/encryption/publickeys/batch 429 - 1ms - POST /api/encryption/publickeys/batch
[0mPOST /api/encryption/publickeys/batch [33m429[0m 0.256 ms - 67[0m
[2025-10-21 16:00:04] [127c11b0-309a-407f-93ad-b9b5dd3e6c4f] PUT /api/encryption/keypair 429 - 1ms - PUT /api/encryption/keypair
[0mPUT /api/encryption/keypair [33m429[0m 0.300 ms - 67[0m
[2025-10-21 16:00:04] [8e07ce6a-9965-46fa-9015-abb756bcfea4] GET /api/notifications 429 - 2ms - GET /api/notifications
[0mGET /api/notifications [33m429[0m 0.984 ms - 67[0m
[2025-10-21 16:00:05] [ee6f26e3-ad7b-4228-91ce-83704a504fe4] GET /api/notifications/unread-count 429 - 2ms - GET /api/notifications/unread-count
[0mGET /api/notifications/unread-count [33m429[0m 1.486 ms - 67[0m
[2025-10-21 16:00:05] [f8c442ba-e607-4eef-a2d9-712a153ec667] PUT /api/notifications/mark-all-read 429 - 0ms - PUT /api/notifications/mark-all-read
[0mPUT /api/notifications/mark-all-read [33m429[0m 0.459 ms - 67[0m
[2025-10-21 16:00:05] [67ddc090-3dbf-43c4-b95b-abcb7810e04b] GET /api/notification-settings 429 - 1ms - GET /api/notification-settings
[0mGET /api/notification-settings [33m429[0m 0.266 ms - 67[0m
[2025-10-21 16:00:05] [6f7d7385-495c-45d2-b585-70f4fa3876c2] PUT /api/notification-settings 429 - 1ms - PUT /api/notification-settings
[0mPUT /api/notification-settings [33m429[0m 0.261 ms - 67[0m
[2025-10-21 16:00:06] [8c6bcda0-fefa-42f4-aec0-5312b4c5c2d0] POST /api/notification-settings/reset 429 - 1ms - POST /api/notification-settings/reset
[0mPOST /api/notification-settings/reset [33m429[0m 0.299 ms - 67[0m
[2025-10-21 16:00:06] [148b6515-d57d-4045-88ca-be9613030b1f] GET /api/notification-settings/preview 429 - 1ms - GET /api/notification-settings/preview
[0mGET /api/notification-settings/preview [33m429[0m 0.299 ms - 67[0m
[2025-10-21 16:00:06] [b008bcd9-b9a0-4cec-9a41-602b442c6f2f] GET /api/announcements 429 - 0ms - GET /api/announcements
[0mGET /api/announcements [33m429[0m 0.278 ms - 67[0m
[2025-10-21 16:00:07] [e1ddc5ef-f88b-4c6f-922c-ae1453f4ee0f] POST /api/auth/login 429 - 1ms - POST /api/auth/login
[0mPOST /api/auth/login [33m429[0m 0.314 ms - 67[0m
[2025-10-21 16:00:07] [1b716c54-eeb8-43df-9fc3-6350f5ab9b79] POST /api/auth/logout 429 - 1ms - POST /api/auth/logout
[0mPOST /api/auth/logout [33m429[0m 0.517 ms - 67[0m
[2025-10-21 16:01:36] [1f6c51f2-ea2f-4abc-b604-e15f2ad4e258] GET /health 429 - 1ms - GET /health
[0mGET /health [33m429[0m 0.961 ms - 67[0m
[2025-10-21 16:01:37] [c60a6040-97e0-4c7d-8047-f58fd1dccd3e] GET /health/detailed 429 - 1ms - GET /health/detailed
[0mGET /health/detailed [33m429[0m 0.370 ms - 67[0m
[2025-10-21 16:01:37] [a50504f9-f8dc-4afc-9531-79d854e2a39a] GET /health/ready 429 - 1ms - GET /health/ready
[0mGET /health/ready [33m429[0m 0.503 ms - 67[0m
[2025-10-21 16:01:37] [97ce477d-a4d0-4344-a767-b35ef153b0b3] GET /health/live 429 - 1ms - GET /health/live
[0mGET /health/live [33m429[0m 0.251 ms - 67[0m
[2025-10-21 16:01:38] [d8fcfc61-2aec-4d2c-b2af-4607f2823195] POST /api/auth/register 429 - 1ms - POST /api/auth/register
[0mPOST /api/auth/register [33m429[0m 0.373 ms - 67[0m
[2025-10-21 16:01:38] [7be465b0-d505-410f-be81-0ccb9d732546] POST /api/auth/login 429 - 1ms - POST /api/auth/login
[0mPOST /api/auth/login [33m429[0m 0.422 ms - 67[0m
[2025-10-21 16:01:39] [c5ac9836-09db-42cd-b164-cbcadc717dea] POST /api/auth/forgot-password 429 - 1ms - POST /api/auth/forgot-password
[0mPOST /api/auth/forgot-password [33m429[0m 0.243 ms - 67[0m
[2025-10-21 16:01:41] [34291e6d-7acc-4e63-9acb-6df6609d8aa1] POST /api/auth/verify-email 429 - 1ms - POST /api/auth/verify-email
[0mPOST /api/auth/verify-email [33m429[0m 0.289 ms - 67[0m
[2025-10-21 16:01:41] [1d5c114d-098f-4675-8c10-e1877115316a] POST /api/auth/reset-password 429 - 2ms - POST /api/auth/reset-password
[0mPOST /api/auth/reset-password [33m429[0m 0.704 ms - 67[0m
[2025-10-21 16:01:43] [a17c45b9-da12-4a16-a25e-9570b32143a2] POST /api/auth/resend-verification 429 - 0ms - POST /api/auth/resend-verification
[0mPOST /api/auth/resend-verification [33m429[0m 0.377 ms - 67[0m
[2025-10-21 16:01:43] [27a5656d-f3f7-4349-932a-9ced96cc51e3] GET /api/users?page=1&limit=10 429 - 1ms - GET /api/users?page=1&limit=10
[0mGET /api/users?page=1&limit=10 [33m429[0m 0.289 ms - 67[0m
[2025-10-21 16:01:44] [49c230a2-a9c6-447c-b061-c07560450cbb] POST /api/auth/login 429 - 0ms - POST /api/auth/login
[0mPOST /api/auth/login [33m429[0m 0.254 ms - 67[0m
[2025-10-21 16:06:20] [a6e207ee-0b3a-49f0-88f9-6cb108d80c55] GET /health 429 - 0ms - GET /health
[0mGET /health [33m429[0m 0.326 ms - 67[0m
[2025-10-21 16:06:20] [4ca03f50-317b-4025-8c4e-dd31045270d4] GET /health/detailed 429 - 0ms - GET /health/detailed
[0mGET /health/detailed [33m429[0m 0.309 ms - 67[0m
[2025-10-21 16:06:20] [3f5463b5-b2be-48ad-ae83-1032f7bdff87] GET /health/ready 429 - 0ms - GET /health/ready
[0mGET /health/ready [33m429[0m 0.291 ms - 67[0m
[2025-10-21 16:06:20] [fab585e3-5289-4f2e-a154-25d3f28f026d] GET /health/live 429 - 0ms - GET /health/live
[0mGET /health/live [33m429[0m 0.552 ms - 67[0m
[2025-10-21 16:06:21] [044f00cc-ca68-47ee-a4db-9132b4709719] POST /api/auth/register 429 - 0ms - POST /api/auth/register
[0mPOST /api/auth/register [33m429[0m 0.256 ms - 67[0m
[2025-10-21 16:06:22] [4a5fde1d-fc16-4eb5-8d85-4864116c1305] POST /api/auth/login 429 - 1ms - POST /api/auth/login
[0mPOST /api/auth/login [33m429[0m 0.714 ms - 67[0m
[2025-10-21 16:06:22] [4f206786-6933-4d4e-8973-78e094a8162d] POST /api/auth/forgot-password 429 - 0ms - POST /api/auth/forgot-password
[0mPOST /api/auth/forgot-password [33m429[0m 0.254 ms - 67[0m
[2025-10-21 16:06:24] [4c2829e2-e221-4271-aacd-bc26c245ad21] POST /api/auth/verify-email 429 - 0ms - POST /api/auth/verify-email
[0mPOST /api/auth/verify-email [33m429[0m 0.334 ms - 67[0m
[2025-10-21 16:06:25] [d04da393-dc99-4796-aa84-070408edf1e2] POST /api/auth/reset-password 429 - 1ms - POST /api/auth/reset-password
[0mPOST /api/auth/reset-password [33m429[0m 0.246 ms - 67[0m
[2025-10-21 16:06:26] [3d79c979-072f-4680-816a-9b4777b0b2f0] POST /api/auth/resend-verification 429 - 1ms - POST /api/auth/resend-verification
[0mPOST /api/auth/resend-verification [33m429[0m 0.815 ms - 67[0m
[2025-10-21 16:06:27] [f5dbfc5f-c5f6-419f-8e6a-912949391ba0] GET /api/users?page=1&limit=10 429 - 1ms - GET /api/users?page=1&limit=10
[0mGET /api/users?page=1&limit=10 [33m429[0m 0.266 ms - 67[0m
[2025-10-21 16:06:28] [8b81e3f5-4775-48a0-96a7-1d89c23506e5] POST /api/auth/login 429 - 1ms - POST /api/auth/login
[0mPOST /api/auth/login [33m429[0m 0.959 ms - 67[0m
[2025-10-21 16:06:43] [9d954c22-cd9c-48f6-ba5d-55a848f93cc8] POST /api/auth/login 429 - 0ms - POST /api/auth/login
[0mPOST /api/auth/login [33m429[0m 0.243 ms - 67[0m
Executing (default): SELECT 1
[2025-10-21 16:34:33] [35eba9eb-b42a-4767-8b69-244d53c8a491] GET /health 200 - 6ms - GET /health
[0mGET /health [32m200[0m 6.422 ms - 771[0m
Executing (default): SELECT 1
Executing (default): SELECT count(*) AS "count" FROM "messages" AS "Message" WHERE ("Message"."deletedAt" IS NULL AND "Message"."status" = 'pending');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
[2025-10-21 16:34:34] [1f3a1748-c335-449a-b459-63dc42432899] GET /health/detailed 200 - 310ms - GET /health/detailed
[0mGET /health/detailed [32m200[0m 309.813 ms - 2256[0m
Executing (default): SELECT 1
[2025-10-21 16:34:34] [ac37690f-faa1-4925-bb91-4854d0d0eadf] GET /health/ready 200 - 3ms - GET /health/ready
[0mGET /health/ready [32m200[0m 3.492 ms - 238[0m
[2025-10-21 16:34:34] [2df40f92-a9d6-4305-a068-04552fc8a81e] GET /health/live 200 - 1ms - GET /health/live
[0mGET /health/live [32m200[0m 0.331 ms - 79[0m
[2025-10-21 16:34:35] [be1f3b27-ba96-4fda-bd1b-d447b617aac0] POST /api/auth/register 400 - 2ms - POST /api/auth/register
[0mPOST /api/auth/register [33m400[0m 1.299 ms - 328[0m
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND ("User"."email" = 'testuser1' OR "User"."username" = 'testuser1')) LIMIT 1;
Executing (default): UPDATE "users" SET "lastLoginAt"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): INSERT INTO "sessions" ("id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9) RETURNING "id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt";
2025-10-21T14:34:37.217Z [[31merror[39m]: Failed to store session in Redis: Connection in subscriber mode, only subscriber commands may be used
{
  "stack": "Error: Connection in subscriber mode, only subscriber commands may be used\n    at EventEmitter.sendCommand (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\Redis.js:338:28)\n    at EventEmitter.setex (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\utils\\Commander.js:90:25)\n    at AuthController.storeSessionInRedis (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:704:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:214:7)"
}
2025-10-21T14:34:37.217Z [[32minfo[39m]: User logged in: testuser1 (user1@test.com)
[2025-10-21 16:34:37] [f56df332-5ef3-440d-8237-c254284e75ec] POST /api/auth/login 200 - 394ms - POST /api/auth/login
[0mPOST /api/auth/login [32m200[0m 394.067 ms - 1198[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:39.016 +00:00';
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
2025-10-21T14:34:39.032Z [[32minfo[39m]: Authentication successful for user: testuser1 (6ee36bd6-22d5-4798-92a2-7d4d2ff49768)
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
[2025-10-21 16:34:39] [12f2d838-bb50-444d-8e3e-9b181d624add] GET /api/auth/me 200 - 19ms - GET /api/auth/me
[0mGET /api/auth/me [32m200[0m 18.816 ms - 539[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."refreshToken" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsInR5cGUiOiJyZWZyZXNoIiwiaWF0IjoxNzYxMDU3Mjc3LCJleHAiOjE3NjM2NDkyNzcsImF1ZCI6Im1lc3Nlbmdlci11c2VycyIsImlzcyI6Im1lc3Nlbmdlci1iYWNrZW5kIiwic3ViIjoiNmVlMzZiZDYtMjJkNS00Nzk4LTkyYTItN2Q0ZDJmZjQ5NzY4In0.K6eK3kO3TWfpm43mJNB6LjdY_SmJOlXdYWUQPRR6UEM' AND "Session"."expiresAt" > '2025-10-21 14:34:39.306 +00:00';
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
Executing (default): UPDATE "sessions" SET "token"=$1,"refreshToken"=$2,"lastAccessedAt"=$3 WHERE "id" = $4
2025-10-21T14:34:39.316Z [[31merror[39m]: Failed to store session in Redis: Connection in subscriber mode, only subscriber commands may be used
{
  "stack": "Error: Connection in subscriber mode, only subscriber commands may be used\n    at EventEmitter.sendCommand (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\Redis.js:338:28)\n    at EventEmitter.setex (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\utils\\Commander.js:90:25)\n    at AuthController.storeSessionInRedis (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:704:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async refreshToken (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:319:9)"
}
2025-10-21T14:34:39.316Z [[32minfo[39m]: Token refreshed for user: testuser1
[2025-10-21 16:34:39] [eb709943-b2fe-49fb-9e56-0462f5ed508c] POST /api/auth/refresh 200 - 10ms - POST /api/auth/refresh
[0mPOST /api/auth/refresh [32m200[0m 10.188 ms - 976[0m
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."email" = 'testuser1@test.com');
[2025-10-21 16:34:40] [68ebfe16-27e1-4a2c-9c2a-f25e9f0ac0a1] POST /api/auth/forgot-password 200 - 3ms - POST /api/auth/forgot-password
[0mPOST /api/auth/forgot-password [32m200[0m 3.436 ms - 103[0m
[2025-10-21 16:34:40] [a635c285-512b-4b55-bbbb-34ce77e7dfad] POST /api/auth/verify-email 404 - 0ms - POST /api/auth/verify-email
[0mPOST /api/auth/verify-email [33m404[0m 0.285 ms - 62[0m
[2025-10-21 16:34:41] [16e98a00-a8e1-44d7-815d-47dc014072cd] POST /api/auth/reset-password 400 - 1ms - POST /api/auth/reset-password
[0mPOST /api/auth/reset-password [33m400[0m 0.895 ms - 370[0m
[2025-10-21 16:34:41] [26265804-05f9-4f47-8da8-1ad69d47b522] POST /api/auth/change-password 404 - 0ms - POST /api/auth/change-password
[0mPOST /api/auth/change-password [33m404[0m 0.267 ms - 65[0m
[2025-10-21 16:34:41] [6f7b231f-210d-4085-94ed-87684b12e697] POST /api/auth/resend-verification 404 - 1ms - POST /api/auth/resend-verification
[0mPOST /api/auth/resend-verification [33m404[0m 0.460 ms - 69[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:42.145 +00:00';
[2025-10-21 16:34:42] [7bf7a642-3065-439d-b98d-3b330d7dc16b] GET /api/users/me 401 - 3ms - GET /api/users/me
[0mGET /api/users/me [33m401[0m 3.083 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:42.431 +00:00';
[2025-10-21 16:34:42] [18ffe0af-1f91-421e-a259-89eee7d706c8] PUT /api/users/me 401 - 3ms - PUT /api/users/me
[0mPUT /api/users/me [33m401[0m 2.711 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:42.689 +00:00';
[2025-10-21 16:34:42] [dea2064c-ca0c-4283-a526-265c6175921b] GET /api/users/search?q=test 401 - 5ms - GET /api/users/search?q=test
[0mGET /api/users/search?q=test [33m401[0m 3.913 ms - 98[0m
Executing (default): SELECT count(*) AS "count" FROM "users" AS "User" WHERE "User"."deletedAt" IS NULL;
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE "User"."deletedAt" IS NULL ORDER BY "User"."createdAt" DESC LIMIT 10 OFFSET 0;
[2025-10-21 16:34:42] [a3dc7d02-5c8f-40a4-bea4-96101215e553] undefined undefined undefined - undefinedms - Users list retrieved successfully
[2025-10-21 16:34:42] [a3dc7d02-5c8f-40a4-bea4-96101215e553] GET /api/users?page=1&limit=10 200 - 6ms - GET /api/users?page=1&limit=10
[0mGET /api/users?page=1&limit=10 [32m200[0m 5.829 ms - 5340[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:43.257 +00:00';
[2025-10-21 16:34:43] [ba0a8735-34de-41a1-a439-da3e219412e3] POST /api/users/me/avatar 401 - 4ms - POST /api/users/me/avatar
[0mPOST /api/users/me/avatar [33m401[0m 3.808 ms - 98[0m
[2025-10-21 16:34:43] [4a364991-d5cd-48c9-a2fb-e94a1da1ccd7] POST /api/auth/register 400 - 1ms - POST /api/auth/register
[0mPOST /api/auth/register [33m400[0m 0.621 ms - 328[0m
[2025-10-21 16:34:45] [cfbe4d05-be32-43f7-886f-ee2688ab45f4] POST /api/auth/login 400 - 2ms - POST /api/auth/login
[0mPOST /api/auth/login [33m400[0m 1.208 ms - 180[0m
[2025-10-21 16:34:46] [50d451dd-2cb6-461c-8b44-da629c62f739] DELETE /api/users/me 401 - 2ms - DELETE /api/users/me
[0mDELETE /api/users/me [33m401[0m 0.918 ms - 87[0m
[2025-10-21 16:34:46] [5442e4cb-01e1-460a-a8b3-6d3447b7ffba] POST /api/users/me/device-token 404 - 0ms - POST /api/users/me/device-token
[0mPOST /api/users/me/device-token [33m404[0m 0.310 ms - 66[0m
[2025-10-21 16:34:46] [5f74dcf6-a405-4459-bf1d-a37cc6d7e505] DELETE /api/users/me/device-token 404 - 1ms - DELETE /api/users/me/device-token
[0mDELETE /api/users/me/device-token [33m404[0m 0.699 ms - 66[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:46.897 +00:00';
[2025-10-21 16:34:46] [a2f3965a-8b2f-438c-8338-3e30e1ad4b43] GET /api/users/me/export 401 - 3ms - GET /api/users/me/export
[0mGET /api/users/me/export [33m401[0m 2.920 ms - 98[0m
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
[2025-10-21 16:34:47] [0f02ab01-5ef9-425a-af32-c02ff6abc109] undefined undefined undefined - undefinedms - User retrieved successfully
[2025-10-21 16:34:47] [0f02ab01-5ef9-425a-af32-c02ff6abc109] GET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 200 - 4ms - GET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [32m200[0m 3.786 ms - 530[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:47.453 +00:00';
[2025-10-21 16:34:47] [bc968720-1386-4faa-baed-607b52e929ef] POST /api/messages 401 - 3ms - POST /api/messages
[0mPOST /api/messages [33m401[0m 2.936 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:48.388 +00:00';
[2025-10-21 16:34:48] [8e2d854c-d10a-4033-9d8f-0a247b8d8c55] GET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768 401 - 3ms - GET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [33m401[0m 3.079 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:48.664 +00:00';
[2025-10-21 16:34:48] [7087f6df-1609-48dd-8282-a97c48689676] GET /api/messages/search?q=test 401 - 3ms - GET /api/messages/search?q=test
[0mGET /api/messages/search?q=test [33m401[0m 3.215 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:48.944 +00:00';
[2025-10-21 16:34:48] [8bdecd23-ab70-46b8-8a2c-70f0f53c314d] GET /api/messages/conversations 401 - 4ms - GET /api/messages/conversations
[0mGET /api/messages/conversations [33m401[0m 4.652 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:49.243 +00:00';
[2025-10-21 16:34:49] [64bbda62-2aee-4802-8782-327cb9e87d1a] GET /api/contacts 401 - 5ms - GET /api/contacts
[0mGET /api/contacts [33m401[0m 4.223 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:49.501 +00:00';
[2025-10-21 16:34:49] [4cc6dfee-fe32-4b1f-85e2-1fcc621279f0] GET /api/contacts/search?q=test 401 - 3ms - GET /api/contacts/search?q=test
[0mGET /api/contacts/search?q=test [33m401[0m 2.655 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:49.764 +00:00';
[2025-10-21 16:34:49] [1a013d0a-c52e-4474-be0f-7a6f26c19bbf] POST /api/contacts 401 - 3ms - POST /api/contacts
[0mPOST /api/contacts [33m401[0m 2.669 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:50.554 +00:00';
[2025-10-21 16:34:50] [ebbbaa56-133d-40f6-8b53-15854ce2ca5c] POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block 401 - 3ms - POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block
[0mPOST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block [33m401[0m 2.825 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:50.821 +00:00';
[2025-10-21 16:34:50] [289ea388-50ef-47c6-9728-c4c85ad27275] POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock 401 - 9ms - POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock
[0mPOST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock [33m401[0m 8.992 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:51.199 +00:00';
[2025-10-21 16:34:51] [495678dd-b2bb-46ec-b106-f0b786892186] GET /api/groups 401 - 3ms - GET /api/groups
[0mGET /api/groups [33m401[0m 3.324 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:51.486 +00:00';
[2025-10-21 16:34:51] [9e11ac23-f029-46b3-8b5b-dbbb695d5678] POST /api/groups 401 - 3ms - POST /api/groups
[0mPOST /api/groups [33m401[0m 2.698 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:52.303 +00:00';
[2025-10-21 16:34:52] [63ff0468-2f37-4032-807e-bcc01d18e280] POST /api/calls 401 - 3ms - POST /api/calls
[0mPOST /api/calls [33m401[0m 2.878 ms - 98[0m
[2025-10-21 16:34:52] [ccebff05-2501-4876-a7c7-bee1b6694f3d] POST /api/calls/dummy-call-id/respond 404 - 2ms - POST /api/calls/dummy-call-id/respond
[0mPOST /api/calls/dummy-call-id/respond [33m404[0m 0.887 ms - 72[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:52.935 +00:00';
[2025-10-21 16:34:52] [36163238-e76d-4f35-b8a4-fae348708709] GET /api/calls/dummy-call-id 401 - 4ms - GET /api/calls/dummy-call-id
[0mGET /api/calls/dummy-call-id [33m401[0m 3.792 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:53.197 +00:00';
[2025-10-21 16:34:53] [4ffa5c90-3dc0-48e4-9335-d72c3cfae6d5] POST /api/calls/dummy-call-id/end 401 - 3ms - POST /api/calls/dummy-call-id/end
[0mPOST /api/calls/dummy-call-id/end [33m401[0m 2.882 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:53.468 +00:00';
[2025-10-21 16:34:53] [9e190d12-3d43-4c26-9add-4e257c36a814] GET /api/files 401 - 4ms - GET /api/files
[0mGET /api/files [33m401[0m 3.670 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:53.754 +00:00';
[2025-10-21 16:34:53] [3876d6d5-1386-47b3-97d4-88bffec15d95] POST /api/files/upload 401 - 9ms - POST /api/files/upload
[0mPOST /api/files/upload [33m401[0m 7.761 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:54.665 +00:00';
[2025-10-21 16:34:54] [63c6abf8-c6ab-4eed-9b1c-37c5c651ff2b] POST /api/encryption/keypair 401 - 3ms - POST /api/encryption/keypair
[0mPOST /api/encryption/keypair [33m401[0m 2.741 ms - 98[0m
[2025-10-21 16:34:54] [69a57618-dfaa-4627-b3ab-484c780507c3] GET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 404 - 1ms - GET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [33m404[0m 0.312 ms - 102[0m
[2025-10-21 16:34:55] [2127fc8b-10c7-4810-a082-0f5f1d4fb737] POST /api/encryption/publickeys/batch 404 - 1ms - POST /api/encryption/publickeys/batch
[0mPOST /api/encryption/publickeys/batch [33m404[0m 0.752 ms - 72[0m
[2025-10-21 16:34:55] [1a2675f8-30f5-45de-9af0-31f06dbb7367] PUT /api/encryption/keypair 404 - 0ms - PUT /api/encryption/keypair
[0mPUT /api/encryption/keypair [33m404[0m 0.297 ms - 63[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:55.855 +00:00';
[2025-10-21 16:34:55] [e6759675-0fea-4586-b741-b5c3de539e93] GET /api/notifications 401 - 3ms - GET /api/notifications
[0mGET /api/notifications [33m401[0m 2.900 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:56.613 +00:00';
[2025-10-21 16:34:56] [ee8bfbaa-bd87-41c4-96fa-d44932ad3ec3] GET /api/notifications/unread-count 401 - 8ms - GET /api/notifications/unread-count
[0mGET /api/notifications/unread-count [33m401[0m 7.697 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:57.002 +00:00';
[2025-10-21 16:34:57] [d7d22da7-3e43-42ec-95b2-089ef4e9a83d] PUT /api/notifications/mark-all-read 401 - 8ms - PUT /api/notifications/mark-all-read
[0mPUT /api/notifications/mark-all-read [33m401[0m 7.421 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:57.382 +00:00';
[2025-10-21 16:34:57] [4f7e96be-8662-4824-92c2-039fda0440f4] GET /api/notification-settings 401 - 6ms - GET /api/notification-settings
[0mGET /api/notification-settings [33m401[0m 5.676 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:57.670 +00:00';
[2025-10-21 16:34:57] [9b8aa1e0-dfdf-442d-b958-6dc2f2c2c4c6] PUT /api/notification-settings 401 - 4ms - PUT /api/notification-settings
[0mPUT /api/notification-settings [33m401[0m 3.432 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:57.958 +00:00';
[2025-10-21 16:34:57] [70a4a512-caa2-4c5d-9238-4f42747e4a0c] POST /api/notification-settings/reset 401 - 4ms - POST /api/notification-settings/reset
[0mPOST /api/notification-settings/reset [33m401[0m 3.369 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:58.227 +00:00';
[2025-10-21 16:34:58] [50739226-477d-4518-b560-c8c5a1218d9b] GET /api/notification-settings/preview 401 - 9ms - GET /api/notification-settings/preview
[0mGET /api/notification-settings/preview [33m401[0m 8.135 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw' AND "Session"."expiresAt" > '2025-10-21 14:34:58.601 +00:00';
[2025-10-21 16:34:58] [4988e327-aabf-4826-90f6-4fb5247061d2] GET /api/announcements 401 - 9ms - GET /api/announcements
[0mGET /api/announcements [33m401[0m 7.601 ms - 98[0m
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND ("User"."email" = 'admin' OR "User"."username" = 'admin')) LIMIT 1;
Executing (default): UPDATE "users" SET "lastLoginAt"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): INSERT INTO "sessions" ("id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9) RETURNING "id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt";
2025-10-21T14:34:59.740Z [[31merror[39m]: Failed to store session in Redis: Connection in subscriber mode, only subscriber commands may be used
{
  "stack": "Error: Connection in subscriber mode, only subscriber commands may be used\n    at EventEmitter.sendCommand (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\Redis.js:338:28)\n    at EventEmitter.setex (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\utils\\Commander.js:90:25)\n    at AuthController.storeSessionInRedis (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:704:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:214:7)"
}
2025-10-21T14:34:59.740Z [[32minfo[39m]: User logged in: admin (admin@messenger.local)
[2025-10-21 16:34:59] [6e6cd3e2-fa83-4f18-86ab-eb04d4640ea1] POST /api/auth/login 200 - 366ms - POST /api/auth/login
[0mPOST /api/auth/login [32m200[0m 366.371 ms - 1207[0m
[2025-10-21 16:35:01] [15821527-85a6-414b-bc5f-b0734ec7375c] GET /api/admin/stats 401 - 1ms - GET /api/admin/stats
[0mGET /api/admin/stats [33m401[0m 0.378 ms - 99[0m
[2025-10-21 16:35:01] [5bf535fe-bf3c-4387-a2e3-12a7a3811ea2] GET /api/admin/users/pending 401 - 0ms - GET /api/admin/users/pending
[0mGET /api/admin/users/pending [33m401[0m 0.282 ms - 99[0m
[2025-10-21 16:35:01] [f7a0fe2c-ef02-46a9-8a2d-93d21d54eda7] GET /api/admin/users?page=1&limit=10 401 - 1ms - GET /api/admin/users?page=1&limit=10
[0mGET /api/admin/users?page=1&limit=10 [33m401[0m 0.358 ms - 99[0m
[2025-10-21 16:35:02] [7ae2270a-b35b-4a0e-ab32-3413a6121bd3] GET /api/admin/audit-logs?page=1&limit=10 401 - 1ms - GET /api/admin/audit-logs?page=1&limit=10
[0mGET /api/admin/audit-logs?page=1&limit=10 [33m401[0m 0.887 ms - 99[0m
[2025-10-21 16:35:02] [0a0fda5a-f1cf-4c13-979a-f8608b2e346c] GET /api/admin/reports?page=1&limit=10 401 - 0ms - GET /api/admin/reports?page=1&limit=10
[0mGET /api/admin/reports?page=1&limit=10 [33m401[0m 0.312 ms - 99[0m
[2025-10-21 16:35:02] [f30f968d-2f97-49f2-b10a-d9987ab32c27] GET /api/admin/settings 401 - 1ms - GET /api/admin/settings
[0mGET /api/admin/settings [33m401[0m 0.346 ms - 99[0m
[2025-10-21 16:35:02] [0a01b93d-6df6-43cc-bf46-962f32611ab7] GET /api/admin/announcements 401 - 0ms - GET /api/admin/announcements
[0mGET /api/admin/announcements [33m401[0m 0.479 ms - 99[0m
[2025-10-21 16:35:03] [4219d435-5d9d-422c-b72c-d5f6d6494a93] GET /api/admin/monitoring 401 - 2ms - GET /api/admin/monitoring
[0mGET /api/admin/monitoring [33m401[0m 0.989 ms - 99[0m
[2025-10-21 16:35:03] [7a9032ab-f70b-4b93-956e-3f046806afa8] POST /api/admin/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/approve 401 - 1ms - POST /api/admin/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/approve
[0mPOST /api/admin/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/approve [33m401[0m 0.323 ms - 99[0m
Executing (default): DELETE FROM "sessions" WHERE "token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzI3NywiZXhwIjoxNzYxNjYyMDc3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.uRq6aKw0MuBqDy2AmKLj9KFe9hPON8Wroe3E9t74sMw'
2025-10-21T14:35:03.805Z [[31merror[39m]: Logout error: Cannot read properties of undefined (reading 'removeSessionFromRedis')
{
  "stack": "TypeError: Cannot read properties of undefined (reading 'removeSessionFromRedis')\n    at logout (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:365:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
[2025-10-21 16:35:03] [ad013916-c41b-491b-ad17-82d44340b058] POST /api/auth/logout 200 - 2ms - POST /api/auth/logout
[0mPOST /api/auth/logout [32m200[0m 2.310 ms - 46[0m
Executing (default): DELETE FROM "sessions" WHERE "token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI3N2I2NjNlMC1hNGI2LTRlMzYtYWMxOC1jMzdhYWY2MTUxNjIiLCJ1c2VybmFtZSI6ImFkbWluIiwiZW1haWwiOiJhZG1pbkBtZXNzZW5nZXIubG9jYWwiLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NjEwNTcyOTksImV4cCI6MTc2MTY2MjA5OSwiYXVkIjoibWVzc2VuZ2VyLXVzZXJzIiwiaXNzIjoibWVzc2VuZ2VyLWJhY2tlbmQiLCJzdWIiOiI3N2I2NjNlMC1hNGI2LTRlMzYtYWMxOC1jMzdhYWY2MTUxNjIifQ.yzqV5-2rmwnVnP_9M4Z89GD1CK2lhJtwGnc1GExhOQg'
2025-10-21T14:35:04.078Z [[31merror[39m]: Logout error: Cannot read properties of undefined (reading 'removeSessionFromRedis')
{
  "stack": "TypeError: Cannot read properties of undefined (reading 'removeSessionFromRedis')\n    at logout (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:365:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
[2025-10-21 16:35:04] [53accba7-bff0-4811-a9cf-5434cf17e8bb] POST /api/auth/logout 200 - 5ms - POST /api/auth/logout
[0mPOST /api/auth/logout [32m200[0m 4.273 ms - 46[0m
Executing (default): SELECT 1
[2025-10-21 16:41:43] [6ed11b46-e6f6-4176-ae56-cb7ef80968f5] GET /health 200 - 19ms - GET /health
[0mGET /health [32m200[0m 17.531 ms - 771[0m
Executing (default): SELECT 1
Executing (default): SELECT count(*) AS "count" FROM "messages" AS "Message" WHERE ("Message"."deletedAt" IS NULL AND "Message"."status" = 'pending');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
[2025-10-21 16:41:44] [55911b84-087c-4950-a477-0bbd0f1ff725] GET /health/detailed 200 - 279ms - GET /health/detailed
[0mGET /health/detailed [32m200[0m 279.192 ms - 2257[0m
Executing (default): SELECT 1
[2025-10-21 16:41:44] [36e28b2a-b342-4c9b-b017-f75d95051b8d] GET /health/ready 200 - 5ms - GET /health/ready
[0mGET /health/ready [32m200[0m 4.857 ms - 238[0m
[2025-10-21 16:41:44] [398c983d-4e6f-4428-88a3-0df45cb2f5e9] GET /health/live 200 - 1ms - GET /health/live
[0mGET /health/live [32m200[0m 0.632 ms - 79[0m
[2025-10-21 16:41:45] [ddf8698e-afa6-43ef-8a33-63851c855f20] POST /api/auth/register 400 - 1ms - POST /api/auth/register
[0mPOST /api/auth/register [33m400[0m 0.933 ms - 328[0m
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND ("User"."email" = 'testuser1' OR "User"."username" = 'testuser1')) LIMIT 1;
Executing (default): UPDATE "users" SET "lastLoginAt"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): INSERT INTO "sessions" ("id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9) RETURNING "id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt";
2025-10-21T14:41:47.054Z [[31merror[39m]: Failed to store session in Redis: Connection in subscriber mode, only subscriber commands may be used
{
  "stack": "Error: Connection in subscriber mode, only subscriber commands may be used\n    at EventEmitter.sendCommand (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\Redis.js:338:28)\n    at EventEmitter.setex (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\utils\\Commander.js:90:25)\n    at AuthController.storeSessionInRedis (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:704:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:214:7)"
}
2025-10-21T14:41:47.055Z [[32minfo[39m]: User logged in: testuser1 (user1@test.com)
[2025-10-21 16:41:47] [f66e308a-e808-46fc-98d8-c628957c04cf] POST /api/auth/login 200 - 424ms - POST /api/auth/login
[0mPOST /api/auth/login [32m200[0m 423.869 ms - 1198[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzcwNywiZXhwIjoxNzYxNjYyNTA3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.sLMM1Rr_HUX5cesJWs0JysA21olQi3rNdRGcpqC3jLg' AND "Session"."expiresAt" > '2025-10-21 14:41:49.021 +00:00';
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
2025-10-21T14:41:49.035Z [[32minfo[39m]: Authentication successful for user: testuser1 (6ee36bd6-22d5-4798-92a2-7d4d2ff49768)
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
[2025-10-21 16:41:49] [9f3c251f-ef48-40f1-999c-71b63a7202eb] GET /api/auth/me 200 - 19ms - GET /api/auth/me
[0mGET /api/auth/me [32m200[0m 18.691 ms - 539[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."refreshToken" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsInR5cGUiOiJyZWZyZXNoIiwiaWF0IjoxNzYxMDU3NzA3LCJleHAiOjE3NjM2NDk3MDcsImF1ZCI6Im1lc3Nlbmdlci11c2VycyIsImlzcyI6Im1lc3Nlbmdlci1iYWNrZW5kIiwic3ViIjoiNmVlMzZiZDYtMjJkNS00Nzk4LTkyYTItN2Q0ZDJmZjQ5NzY4In0.dgC8b0nLWOI0pKw41Lx6kCXTJGFkgpxPmFr5KkNb3RE' AND "Session"."expiresAt" > '2025-10-21 14:41:49.374 +00:00';
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
Executing (default): UPDATE "sessions" SET "token"=$1,"refreshToken"=$2,"lastAccessedAt"=$3 WHERE "id" = $4
2025-10-21T14:41:49.384Z [[31merror[39m]: Failed to store session in Redis: Connection in subscriber mode, only subscriber commands may be used
{
  "stack": "Error: Connection in subscriber mode, only subscriber commands may be used\n    at EventEmitter.sendCommand (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\Redis.js:338:28)\n    at EventEmitter.setex (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\utils\\Commander.js:90:25)\n    at AuthController.storeSessionInRedis (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:704:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async refreshToken (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:319:9)"
}
2025-10-21T14:41:49.384Z [[32minfo[39m]: Token refreshed for user: testuser1
[2025-10-21 16:41:49] [2563665f-fe6a-4687-b9fb-5dd15c4d7aca] POST /api/auth/refresh 200 - 11ms - POST /api/auth/refresh
[0mPOST /api/auth/refresh [32m200[0m 11.124 ms - 976[0m
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."email" = 'testuser1@test.com');
[2025-10-21 16:41:50] [d3ddeba5-52ab-49b3-aea9-ddefc1f7e087] POST /api/auth/forgot-password 200 - 3ms - POST /api/auth/forgot-password
[0mPOST /api/auth/forgot-password [32m200[0m 3.023 ms - 103[0m
[2025-10-21 16:41:50] [f2ab899d-4296-43d8-bbee-ad9257993f62] POST /api/auth/verify-email 404 - 0ms - POST /api/auth/verify-email
[0mPOST /api/auth/verify-email [33m404[0m 0.258 ms - 62[0m
[2025-10-21 16:41:51] [d1395122-6c53-46a6-bdac-2a4c428bb33c] POST /api/auth/reset-password 400 - 1ms - POST /api/auth/reset-password
[0mPOST /api/auth/reset-password [33m400[0m 0.458 ms - 370[0m
[2025-10-21 16:41:51] [628f3a13-9e13-467d-bb5c-0fc23dac10c2] POST /api/auth/change-password 404 - 0ms - POST /api/auth/change-password
[0mPOST /api/auth/change-password [33m404[0m 0.290 ms - 65[0m
[2025-10-21 16:41:51] [118f14e4-af2a-4555-a688-52e21b278a06] POST /api/auth/resend-verification 404 - 0ms - POST /api/auth/resend-verification
[0mPOST /api/auth/resend-verification [33m404[0m 0.288 ms - 69[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzcwNywiZXhwIjoxNzYxNjYyNTA3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.sLMM1Rr_HUX5cesJWs0JysA21olQi3rNdRGcpqC3jLg' AND "Session"."expiresAt" > '2025-10-21 14:41:52.211 +00:00';
[2025-10-21 16:41:52] [e0b9a3ad-0896-46e7-975b-810adbc98901] GET /api/users/me 401 - 3ms - GET /api/users/me
[0mGET /api/users/me [33m401[0m 2.787 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzcwNywiZXhwIjoxNzYxNjYyNTA3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.sLMM1Rr_HUX5cesJWs0JysA21olQi3rNdRGcpqC3jLg' AND "Session"."expiresAt" > '2025-10-21 14:41:52.485 +00:00';
[2025-10-21 16:41:52] [e9e98025-2d16-482c-b5f1-1ae49c12792f] PUT /api/users/me 401 - 5ms - PUT /api/users/me
[0mPUT /api/users/me [33m401[0m 5.124 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzcwNywiZXhwIjoxNzYxNjYyNTA3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.sLMM1Rr_HUX5cesJWs0JysA21olQi3rNdRGcpqC3jLg' AND "Session"."expiresAt" > '2025-10-21 14:41:52.803 +00:00';
[2025-10-21 16:41:52] [3b0bf925-57a1-476f-8c9b-176eeff065ec] GET /api/users/search?q=test 401 - 4ms - GET /api/users/search?q=test
[0mGET /api/users/search?q=test [33m401[0m 3.696 ms - 98[0m
Executing (default): SELECT count(*) AS "count" FROM "users" AS "User" WHERE "User"."deletedAt" IS NULL;
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE "User"."deletedAt" IS NULL ORDER BY "User"."createdAt" DESC LIMIT 10 OFFSET 0;
[2025-10-21 16:41:53] [b803005b-1607-4bd1-a68c-cf780f75f8a7] undefined undefined undefined - undefinedms - Users list retrieved successfully
[2025-10-21 16:41:53] [b803005b-1607-4bd1-a68c-cf780f75f8a7] GET /api/users?page=1&limit=10 200 - 6ms - GET /api/users?page=1&limit=10
[0mGET /api/users?page=1&limit=10 [32m200[0m 5.657 ms - 5340[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzcwNywiZXhwIjoxNzYxNjYyNTA3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.sLMM1Rr_HUX5cesJWs0JysA21olQi3rNdRGcpqC3jLg' AND "Session"."expiresAt" > '2025-10-21 14:41:53.374 +00:00';
[2025-10-21 16:41:53] [9ef3e396-4b86-4f6c-a799-95b5a08b5c10] POST /api/users/me/avatar 401 - 6ms - POST /api/users/me/avatar
[0mPOST /api/users/me/avatar [33m401[0m 5.188 ms - 98[0m
[2025-10-21 16:41:54] [5a27d97f-9d8e-4a37-9b75-188162ae17b3] POST /api/auth/register 400 - 1ms - POST /api/auth/register
[0mPOST /api/auth/register [33m400[0m 0.535 ms - 328[0m
[2025-10-21 16:41:55] [492438ef-40cf-4c9d-8689-35ca6e74447a] POST /api/auth/login 400 - 3ms - POST /api/auth/login
[0mPOST /api/auth/login [33m400[0m 1.930 ms - 180[0m
[2025-10-21 16:41:56] [d93036dc-0b7b-4c11-83e2-d3882c746f3f] DELETE /api/users/me 401 - 1ms - DELETE /api/users/me
[0mDELETE /api/users/me [33m401[0m 0.324 ms - 87[0m
[2025-10-21 16:41:56] [16f2d75b-15a8-4fbf-92fb-4998c128de6c] POST /api/users/me/device-token 404 - 1ms - POST /api/users/me/device-token
[0mPOST /api/users/me/device-token [33m404[0m 0.802 ms - 66[0m
[2025-10-21 16:41:56] [83a816f7-48d4-4157-a890-dfc69885dd6e] DELETE /api/users/me/device-token 404 - 1ms - DELETE /api/users/me/device-token
[0mDELETE /api/users/me/device-token [33m404[0m 0.372 ms - 66[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzcwNywiZXhwIjoxNzYxNjYyNTA3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.sLMM1Rr_HUX5cesJWs0JysA21olQi3rNdRGcpqC3jLg' AND "Session"."expiresAt" > '2025-10-21 14:41:57.028 +00:00';
[2025-10-21 16:41:57] [e81c4fe8-ed13-44d4-af3a-66958cafacb7] GET /api/users/me/export 401 - 3ms - GET /api/users/me/export
[0mGET /api/users/me/export [33m401[0m 2.773 ms - 98[0m
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
[2025-10-21 16:41:57] [72c9324d-ef22-41d3-ad13-3d8aabf41fb0] undefined undefined undefined - undefinedms - User retrieved successfully
[2025-10-21 16:41:57] [72c9324d-ef22-41d3-ad13-3d8aabf41fb0] GET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 200 - 5ms - GET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [32m200[0m 4.885 ms - 530[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzcwNywiZXhwIjoxNzYxNjYyNTA3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.sLMM1Rr_HUX5cesJWs0JysA21olQi3rNdRGcpqC3jLg' AND "Session"."expiresAt" > '2025-10-21 14:41:57.647 +00:00';
[2025-10-21 16:41:57] [212a00a5-8771-4c0a-8d6f-18f3621eb8d5] POST /api/messages 401 - 4ms - POST /api/messages
[0mPOST /api/messages [33m401[0m 3.445 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzcwNywiZXhwIjoxNzYxNjYyNTA3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.sLMM1Rr_HUX5cesJWs0JysA21olQi3rNdRGcpqC3jLg' AND "Session"."expiresAt" > '2025-10-21 14:41:58.578 +00:00';
[2025-10-21 16:41:58] [5d75baff-9f2d-41b7-a827-1b9c52c33270] GET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768 401 - 8ms - GET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [33m401[0m 7.249 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzcwNywiZXhwIjoxNzYxNjYyNTA3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.sLMM1Rr_HUX5cesJWs0JysA21olQi3rNdRGcpqC3jLg' AND "Session"."expiresAt" > '2025-10-21 14:41:58.936 +00:00';
[2025-10-21 16:41:58] [352a5ae6-333a-4b25-bf88-65dc0a49a1bc] GET /api/messages/search?q=test 401 - 9ms - GET /api/messages/search?q=test
[0mGET /api/messages/search?q=test [33m401[0m 8.861 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzcwNywiZXhwIjoxNzYxNjYyNTA3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.sLMM1Rr_HUX5cesJWs0JysA21olQi3rNdRGcpqC3jLg' AND "Session"."expiresAt" > '2025-10-21 14:41:59.258 +00:00';
[2025-10-21 16:41:59] [beaf1f89-fe04-4bd3-95bd-29ccc69131f6] GET /api/messages/conversations 401 - 5ms - GET /api/messages/conversations
[0mGET /api/messages/conversations [33m401[0m 4.599 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzcwNywiZXhwIjoxNzYxNjYyNTA3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.sLMM1Rr_HUX5cesJWs0JysA21olQi3rNdRGcpqC3jLg' AND "Session"."expiresAt" > '2025-10-21 14:41:59.779 +00:00';
[2025-10-21 16:41:59] [5d3c88b1-746e-4be3-8976-8b403a731094] GET /api/contacts 401 - 4ms - GET /api/contacts
[0mGET /api/contacts [33m401[0m 2.971 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzcwNywiZXhwIjoxNzYxNjYyNTA3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.sLMM1Rr_HUX5cesJWs0JysA21olQi3rNdRGcpqC3jLg' AND "Session"."expiresAt" > '2025-10-21 14:42:00.085 +00:00';
[2025-10-21 16:42:00] [8f16970f-6354-4c1e-90d5-b8960e4ac9ee] GET /api/contacts/search?q=test 401 - 3ms - GET /api/contacts/search?q=test
[0mGET /api/contacts/search?q=test [33m401[0m 2.716 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzcwNywiZXhwIjoxNzYxNjYyNTA3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.sLMM1Rr_HUX5cesJWs0JysA21olQi3rNdRGcpqC3jLg' AND "Session"."expiresAt" > '2025-10-21 14:42:00.342 +00:00';
[2025-10-21 16:42:00] [b1c4e213-a9c6-4407-acbf-c4ad96108677] POST /api/contacts 401 - 3ms - POST /api/contacts
[0mPOST /api/contacts [33m401[0m 3.125 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzcwNywiZXhwIjoxNzYxNjYyNTA3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.sLMM1Rr_HUX5cesJWs0JysA21olQi3rNdRGcpqC3jLg' AND "Session"."expiresAt" > '2025-10-21 14:42:01.452 +00:00';
[2025-10-21 16:42:01] [fbf8acfb-0761-40a3-bbc9-569cca937236] POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block 401 - 2ms - POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block
[0mPOST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block [33m401[0m 2.552 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NzcwNywiZXhwIjoxNzYxNjYyNTA3LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.sLMM1Rr_HUX5cesJWs0JysA21olQi3rNdRGcpqC3jLg' AND "Session"."expiresAt" > '2025-10-21 14:42:01.710 +00:00';
[2025-10-21 16:42:01] [eb23ae5f-c953-4c01-a4e2-d306106979c5] POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock 401 - 4ms - POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock
[0mPOST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock [33m401[0m 3.521 ms - 98[0m
[2025-10-21 16:42:01] [ca6ace30-662c-4643-8f8d-f2467b8ff47b] GET /api/groups 429 - 1ms - GET /api/groups
[0mGET /api/groups [33m429[0m 0.354 ms - 67[0m
[2025-10-21 16:42:02] [74584142-3ca7-4823-a0c5-a8125db24760] POST /api/groups 429 - 2ms - POST /api/groups
[0mPOST /api/groups [33m429[0m 0.812 ms - 67[0m
[2025-10-21 16:42:02] [612e3bde-c0e5-40d6-b3b9-0fb796020165] POST /api/calls 429 - 1ms - POST /api/calls
[0mPOST /api/calls [33m429[0m 0.278 ms - 67[0m
[2025-10-21 16:42:02] [cdc4ffcf-5185-40b5-b3d6-a02fe677cbc4] POST /api/calls/dummy-call-id/respond 429 - 1ms - POST /api/calls/dummy-call-id/respond
[0mPOST /api/calls/dummy-call-id/respond [33m429[0m 0.390 ms - 67[0m
[2025-10-21 16:42:03] [d9843348-2d67-45cf-b7db-5c65b315feb0] GET /api/calls/dummy-call-id 429 - 0ms - GET /api/calls/dummy-call-id
[0mGET /api/calls/dummy-call-id [33m429[0m 0.439 ms - 67[0m
[2025-10-21 16:42:03] [18d9aae1-706c-488d-9c73-19b2f8e96b58] POST /api/calls/dummy-call-id/end 429 - 1ms - POST /api/calls/dummy-call-id/end
[0mPOST /api/calls/dummy-call-id/end [33m429[0m 0.941 ms - 67[0m
[2025-10-21 16:42:03] [116a6dfe-c52a-45cc-a022-e244bd65ca58] GET /api/files 429 - 2ms - GET /api/files
[0mGET /api/files [33m429[0m 0.777 ms - 67[0m
[2025-10-21 16:42:04] [194fd961-6bb7-4b0e-be11-40f510949531] POST /api/files/upload 429 - 0ms - POST /api/files/upload
[0mPOST /api/files/upload [33m429[0m 0.402 ms - 67[0m
[2025-10-21 16:42:04] [2952fe2f-fbb6-42d4-b6c7-58c6f522ba3c] POST /api/encryption/keypair 429 - 1ms - POST /api/encryption/keypair
[0mPOST /api/encryption/keypair [33m429[0m 0.259 ms - 67[0m
[2025-10-21 16:42:04] [a14fb011-c869-4049-8b8d-f9509f1c0560] GET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 429 - 0ms - GET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [33m429[0m 0.314 ms - 67[0m
[2025-10-21 16:42:04] [a06c7ddc-cbc2-4a56-a3b8-dd68bbccef82] POST /api/encryption/publickeys/batch 429 - 0ms - POST /api/encryption/publickeys/batch
[0mPOST /api/encryption/publickeys/batch [33m429[0m 0.254 ms - 67[0m
[2025-10-21 16:42:05] [5258015e-3c6a-4b4a-8e77-ba92ecdeba9f] PUT /api/encryption/keypair 429 - 1ms - PUT /api/encryption/keypair
[0mPUT /api/encryption/keypair [33m429[0m 0.746 ms - 67[0m
[2025-10-21 16:42:05] [9c3f46b9-d5cc-4e8c-b83a-166d5e2723f3] GET /api/notifications 429 - 0ms - GET /api/notifications
[0mGET /api/notifications [33m429[0m 0.261 ms - 67[0m
[2025-10-21 16:42:05] [0383bc26-7610-492f-a442-fb0815f82ba0] GET /api/notifications/unread-count 429 - 0ms - GET /api/notifications/unread-count
[0mGET /api/notifications/unread-count [33m429[0m 0.274 ms - 67[0m
[2025-10-21 16:42:06] [0f5fd2ce-ec2d-42b4-8cf0-ada36dcf3236] PUT /api/notifications/mark-all-read 429 - 2ms - PUT /api/notifications/mark-all-read
[0mPUT /api/notifications/mark-all-read [33m429[0m 0.907 ms - 67[0m
[2025-10-21 16:42:06] [6a95b8be-4ce5-4b3e-a0c3-308a3cc07497] GET /api/notification-settings 429 - 2ms - GET /api/notification-settings
[0mGET /api/notification-settings [33m429[0m 0.852 ms - 67[0m
[2025-10-21 16:42:06] [928adc02-2075-45a7-9584-dde177792a38] PUT /api/notification-settings 429 - 1ms - PUT /api/notification-settings
[0mPUT /api/notification-settings [33m429[0m 0.266 ms - 67[0m
[2025-10-21 16:42:07] [d3806ada-5d09-4e86-b667-27450e3e7a09] POST /api/notification-settings/reset 429 - 1ms - POST /api/notification-settings/reset
[0mPOST /api/notification-settings/reset [33m429[0m 0.325 ms - 67[0m
[2025-10-21 16:42:07] [44167ab1-91f2-4db1-bb42-3a5b25c898d3] GET /api/notification-settings/preview 429 - 1ms - GET /api/notification-settings/preview
[0mGET /api/notification-settings/preview [33m429[0m 0.332 ms - 67[0m
[2025-10-21 16:42:07] [c63a68c3-7c0a-43e3-9f53-f56a771ee5b6] GET /api/announcements 429 - 1ms - GET /api/announcements
[0mGET /api/announcements [33m429[0m 0.330 ms - 67[0m
[2025-10-21 16:42:08] [de74e7d8-b35e-4a17-a2f0-bb5c0d0817a7] POST /api/auth/login 429 - 1ms - POST /api/auth/login
[0mPOST /api/auth/login [33m429[0m 0.362 ms - 67[0m
[2025-10-21 16:42:08] [587875f9-0218-416d-810c-3ab37ad49d57] POST /api/auth/logout 429 - 1ms - POST /api/auth/logout
[0mPOST /api/auth/logout [33m429[0m 0.981 ms - 67[0m
[2025-10-21 16:42:42] [604c0fd8-e459-4c5f-9701-d115664f7388] POST /api/auth/login 429 - 1ms - POST /api/auth/login
[0mPOST /api/auth/login [33m429[0m 0.691 ms - 67[0m
[2025-10-21 16:43:21] [a4499294-5dfb-4df5-9ee5-a2bbaf1ecc12] GET /health 429 - 0ms - GET /health
[0mGET /health [33m429[0m 0.338 ms - 67[0m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node src/server.js`[39m
âœ… Sequelize instance created for development environment
2025-10-21T14:45:45.039Z [[32minfo[39m]: Notification settings cache cleanup initialized
2025-10-21T14:45:45.042Z [[32minfo[39m]: Auto cleanup for expired notifications started
2025-10-21T14:45:45.348Z [[32minfo[39m]: Data retention job scheduled.
ðŸ“š Swagger UI will be available at /api-docs
ðŸ”§ Starting server initialization...
ðŸ“ Initializing logger...
âœ… Logger initialized
ðŸ’¾ Initializing database...
Executing (default): SELECT 1
âœ… Database connection established successfully.
âš ï¸  Database sync disabled (models have naming inconsistencies)
âœ… Database initialized
ðŸ”´ Initializing Redis...
âœ… Redis connection established successfully
âœ… Redis initialized
ðŸ“¦ Loading app.js...
ðŸ“¦ App.js loaded, initializing services...
2025-10-21T14:45:45.517Z [[32minfo[39m]: Upload directories created successfully
{
  "uploadDir": "./uploads",
  "tempDir": "./uploads/temp"
}
2025-10-21T14:45:45.518Z [[33mwarn[39m]: âš ï¸  ClamAV not available on Windows - virus scanning disabled for development
2025-10-21T14:45:45.518Z [[32minfo[39m]: File upload service initialized successfully
âœ… File upload service initialized
2025-10-21T14:45:45.519Z [[33mwarn[39m]: âš ï¸  Virus update service skipped on Windows (ClamAV not available)
2025-10-21T14:45:45.524Z [[32minfo[39m]: Generated fallback icon for document:
2025-10-21T14:45:45.528Z [[32minfo[39m]: Generated fallback icon for video:
2025-10-21T14:45:45.532Z [[32minfo[39m]: Generated fallback icon for audio:
2025-10-21T14:45:45.534Z [[32minfo[39m]: Generated fallback icon for archive:
2025-10-21T14:45:45.537Z [[32minfo[39m]: Generated fallback icon for code:
2025-10-21T14:45:45.539Z [[32minfo[39m]: Generated fallback icon for default:
2025-10-21T14:45:45.560Z [[32minfo[39m]: Daily thumbnail cleanup scheduled for 2:00 AM
2025-10-21T14:45:45.560Z [[32minfo[39m]: Thumbnail service initialized successfully
2025-10-21T14:45:45.565Z [[32minfo[39m]: File cleanup jobs scheduled
2025-10-21T14:45:45.566Z [[32minfo[39m]: File cleanup service initialized successfully
âœ… Services initialized
ðŸš€ Creating server...
ðŸš€ =====================================
ðŸš€ Messenger Backend Server
ðŸš€ =====================================
ðŸ“ Environment: development
ðŸŒ Server: http://0.0.0.0:4000
ðŸ“š API Docs: http://localhost:4000/api-docs
ðŸ¥ Health: http://localhost:4000/health
â±ï¸  Started at: 2025-10-21T14:45:45.570Z
ðŸš€ =====================================

ðŸ”§ Development Mode Features:
  â€¢ Hot reload enabled
  â€¢ Detailed error messages
  â€¢ Request logging enabled
  â€¢ CORS configured for local development
ðŸš€ =====================================
âŒ Port 4000 is already in use
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node src/server.js`[39m
âœ… Sequelize instance created for development environment
2025-10-21T14:46:15.237Z [[32minfo[39m]: Notification settings cache cleanup initialized
2025-10-21T14:46:15.239Z [[32minfo[39m]: Auto cleanup for expired notifications started
2025-10-21T14:46:15.445Z [[32minfo[39m]: Data retention job scheduled.
ðŸ“š Swagger UI will be available at /api-docs
ðŸ”§ Starting server initialization...
ðŸ“ Initializing logger...
âœ… Logger initialized
ðŸ’¾ Initializing database...
Executing (default): SELECT 1
âœ… Database connection established successfully.
âš ï¸  Database sync disabled (models have naming inconsistencies)
âœ… Database initialized
ðŸ”´ Initializing Redis...
âœ… Redis connection established successfully
âœ… Redis initialized
ðŸ“¦ Loading app.js...
ðŸ“¦ App.js loaded, initializing services...
2025-10-21T14:46:15.569Z [[32minfo[39m]: Upload directories created successfully
{
  "uploadDir": "./uploads",
  "tempDir": "./uploads/temp"
}
2025-10-21T14:46:15.570Z [[33mwarn[39m]: âš ï¸  ClamAV not available on Windows - virus scanning disabled for development
2025-10-21T14:46:15.570Z [[32minfo[39m]: File upload service initialized successfully
âœ… File upload service initialized
2025-10-21T14:46:15.571Z [[33mwarn[39m]: âš ï¸  Virus update service skipped on Windows (ClamAV not available)
2025-10-21T14:46:15.574Z [[32minfo[39m]: Generated fallback icon for document:
2025-10-21T14:46:15.577Z [[32minfo[39m]: Generated fallback icon for video:
2025-10-21T14:46:15.580Z [[32minfo[39m]: Generated fallback icon for audio:
2025-10-21T14:46:15.582Z [[32minfo[39m]: Generated fallback icon for archive:
2025-10-21T14:46:15.584Z [[32minfo[39m]: Generated fallback icon for code:
2025-10-21T14:46:15.585Z [[32minfo[39m]: Generated fallback icon for default:
2025-10-21T14:46:15.600Z [[32minfo[39m]: Daily thumbnail cleanup scheduled for 2:00 AM
2025-10-21T14:46:15.600Z [[32minfo[39m]: Thumbnail service initialized successfully
2025-10-21T14:46:15.602Z [[32minfo[39m]: File cleanup jobs scheduled
2025-10-21T14:46:15.603Z [[32minfo[39m]: File cleanup service initialized successfully
âœ… Services initialized
ðŸš€ Creating server...
ðŸš€ =====================================
ðŸš€ Messenger Backend Server
ðŸš€ =====================================
ðŸ“ Environment: development
ðŸŒ Server: http://0.0.0.0:4000
ðŸ“š API Docs: http://localhost:4000/api-docs
ðŸ¥ Health: http://localhost:4000/health
â±ï¸  Started at: 2025-10-21T14:46:15.604Z
ðŸš€ =====================================

ðŸ”§ Development Mode Features:
  â€¢ Hot reload enabled
  â€¢ Detailed error messages
  â€¢ Request logging enabled
  â€¢ CORS configured for local development
ðŸš€ =====================================
ðŸš€ Server running on 0.0.0.0:4000
ðŸ“š API Documentation available at http://localhost:4000/api-docs
ðŸ¥ Health check available at http://localhost:4000/health
âœ… Message service initialized
ðŸ“¡ WebSocket server initialized with Redis adapter for scaling
âœ… WebSocket service initialized successfully
