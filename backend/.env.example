# =====================================
# Messenger Backend Environment Variables
# =====================================

# Node Environment
NODE_ENV=development

# Server Configuration
PORT=3000
HOST=0.0.0.0

# =====================================
# DATABASE CONFIGURATION
# =====================================

# Database Connection
DATABASE_URL=postgresql://messenger:messenger_password@localhost:5432/messenger
DB_HOST=localhost
DB_PORT=5432
DB_NAME=messenger
DB_USER=messenger
DB_PASSWORD=messenger_password
DB_SSL=false
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_ACQUIRE_TIMEOUT=60000
DB_POOL_IDLE_TIMEOUT=20000

# =====================================
# REDIS CONFIGURATION
# =====================================

# Redis Connection
REDIS_URL=redis://:messenger_redis_password@localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=messenger_redis_password
REDIS_DB=0
REDIS_FAMILY=4

# Session Configuration
SESSION_SECRET=your_session_secret_key_change_this_in_production
SESSION_NAME=messenger.sid
SESSION_RESAVE=false
SESSION_SAVE_UNINITIALIZED=false
SESSION_COOKIE_MAX_AGE=86400000
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTP_ONLY=true

# =====================================
# AUTHENTICATION & SECURITY
# =====================================

# JWT Configuration
JWT_SECRET=your_jwt_secret_key_must_be_at_least_32_characters_long
JWT_EXPIRES_IN=1h
JWT_REFRESH_SECRET=your_refresh_token_secret_key_change_this
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=messenger-backend
JWT_AUDIENCE=messenger-users

# Password Configuration
BCRYPT_ROUNDS=12

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# Login Rate Limiting (stricter)
RATE_LIMIT_LOGIN_WINDOW_MS=900000
RATE_LIMIT_LOGIN_MAX_REQUESTS=5

# API Rate Limiting
RATE_LIMIT_API_WINDOW_MS=900000
RATE_LIMIT_API_MAX_REQUESTS=1000

# Upload Rate Limiting
RATE_LIMIT_UPLOAD_WINDOW_MS=3600000
RATE_LIMIT_UPLOAD_MAX_REQUESTS=10

# CORS Configuration
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# =====================================
# FILE UPLOAD CONFIGURATION
# =====================================

# Upload Settings
MAX_FILE_SIZE=10485760
UPLOAD_PATH=./uploads
UPLOAD_MAX_FILES=5
UPLOAD_TEMP_DIR=./temp

# Allowed File Types (comma-separated)
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp,application/pdf,text/plain,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document

# =====================================
# CLAMAV CONFIGURATION
# =====================================

# ClamAV Settings
CLAMAV_HOST=localhost
CLAMAV_PORT=3310
CLAMAV_TIMEOUT=30000
CLAMAV_SCAN_ARCHIVES=true
CLAMAV_REMOVE_INFECTED=true

# =====================================
# LIBSODIUM ENCRYPTION
# =====================================

# Encryption Keys (generate new keys for production)
ENCRYPTION_KEYPAIR_SEED=your_32_byte_seed_for_keypair_generation_change_this

# =====================================
# ADMIN CONFIGURATION
# =====================================

# Admin Account
ADMIN_EMAIL=admin@messenger.local
ADMIN_PASSWORD=change_this_admin_password
ADMIN_FIRST_NAME=System
ADMIN_LAST_NAME=Administrator

# =====================================
# WEBRTC & VIDEO CALLING
# =====================================

# STUN/TURN Servers (for development - use your own in production)
STUN_SERVERS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302
TURN_SERVERS=
TURN_USERNAME=
TURN_PASSWORD=

# =====================================
# MESSAGE RETENTION
# =====================================

# Message Auto-deletion (in days)
MESSAGE_RETENTION_DAYS=30
CLEANUP_SCHEDULE=0 2 * * *

# =====================================
# LOGGING CONFIGURATION
# =====================================

# Log Level (error, warn, info, debug)
LOG_LEVEL=info
LOG_FILE_PATH=./logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# =====================================
# PROMETHEUS METRICS
# =====================================

# Metrics Configuration
METRICS_ENABLED=true
METRICS_PATH=/metrics
METRICS_PORT=3000

# =====================================
# SWAGGER DOCUMENTATION
# =====================================

# API Documentation
SWAGGER_ENABLED=true
SWAGGER_PATH=/api-docs
SWAGGER_TITLE=Messenger API
SWAGGER_DESCRIPTION=Real-time messenger API with P2P video calling
SWAGGER_VERSION=1.0.0

# =====================================
# HEALTH CHECK
# =====================================

# Health Check Configuration
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_TIMEOUT=5000

# =====================================
# DEVELOPMENT SETTINGS
# =====================================

# Development Tools (only used in development)
PGADMIN_EMAIL=admin@messenger.local
PGADMIN_PASSWORD=admin_password
REDIS_COMMANDER_ENABLED=false

# =====================================
# PRODUCTION OVERRIDES
# =====================================

# Uncomment and modify for production deployment
# NODE_ENV=production
# DB_SSL=true
# SESSION_COOKIE_SECURE=true
# CORS_ORIGIN=https://yourdomain.com
# LOG_LEVEL=warn

# =====================================
# SECURITY HEADERS
# =====================================

# Content Security Policy
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self' 'unsafe-inline'
CSP_STYLE_SRC='self' 'unsafe-inline'
CSP_IMG_SRC='self' data: https:
CSP_FONT_SRC='self'
CSP_CONNECT_SRC='self' ws: wss:
CSP_MEDIA_SRC='self'
CSP_OBJECT_SRC='none'

# =====================================
# PERFORMANCE SETTINGS
# =====================================

# Compression
COMPRESSION_ENABLED=true
COMPRESSION_THRESHOLD=1024

# Trust Proxy (for reverse proxy setup)
TRUST_PROXY=false
TRUST_PROXY_HOPS=1

# =====================================
# BACKUP CONFIGURATION
# =====================================

# Database Backup (optional)
BACKUP_ENABLED=false
BACKUP_PATH=./backups
BACKUP_RETENTION_DAYS=7
BACKUP_SCHEDULE=0 3 * * *

# =====================================
# NOTIFICATION SETTINGS
# =====================================

# Email Notifications (required for user registration and password reset)
SMTP_HOST=localhost
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@messenger.local
EMAIL_FROM_NAME=Messenger
EMAIL_FROM_ADDRESS=noreply@messenger.local

# Frontend URL for email links (required for production)
FRONTEND_URL=http://localhost:3000

# Support email for user inquiries
SUPPORT_EMAIL=support@messenger.local

# =====================================
# FEATURE FLAGS
# =====================================

# Feature Toggles
FEATURE_VIDEO_CALLS=true
FEATURE_FILE_SHARING=true
FEATURE_SCREEN_SHARING=true
FEATURE_MESSAGE_REACTIONS=true
FEATURE_TYPING_INDICATORS=true

# Email Auto-Verification (for development/testing - disable in production)
AUTO_VERIFY_EMAIL=true

# =====================================
# THIRD-PARTY INTEGRATIONS
# =====================================

# Optional integrations (leave empty if not used)
SLACK_WEBHOOK_URL=
DISCORD_WEBHOOK_URL=
TEAMS_WEBHOOK_URL=

# =====================================
# DEBUG SETTINGS
# =====================================

# Debug Mode (development only)
DEBUG=app:*,sequelize:*
DEBUG_DEPTH=3