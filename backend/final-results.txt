
> messenger-backend@1.0.0 test
> cross-env NODE_ENV=test DB_HOST=127.0.0.1 NODE_OPTIONS=--experimental-vm-modules jest tests/contacts.test.js tests/users.test.js tests/groups.test.js tests/files.test.js

node.exe : (node:44588) ExperimentalWarning: VM Modules is 
an experimental feature and might change at any time
At line:1 char:1
+ & "C:\Program Files\nodejs/node.exe" "C:\Program 
Files\nodejs/node_mo ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: ((node:44588)  
   Ex...nge at any time:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
(Use `node --trace-warnings ...` to show where the warning 
was created)
(node:16012) ExperimentalWarning: VM Modules is an 
experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning 
was created)
(node:44796) ExperimentalWarning: VM Modules is an 
experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning 
was created)
(node:44248) ExperimentalWarning: VM Modules is an 
experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning 
was created)
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:25 +0000] "POST /api/files/upload HTTP/1.1" 201 777 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:25 +0000] "POST /api/files/upload HTTP/1.1" 401 87 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:25 +0000] "GET /api/users/me HTTP/1.1" 200 740 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:25 +0000] "GET /api/contacts HTTP/1.1" 200 174 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:25 +0000] "POST /api/groups HTTP/1.1" 201 - "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:25 +0000] "GET /api/users/me HTTP/1.1" 401 87 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:25 +0000] "GET /api/contacts HTTP/1.1" 401 87 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:26 +0000] "POST /api/groups HTTP/1.1" 401 87 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:26 +0000] "POST /api/files/upload HTTP/1.1" 400 89 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:26 +0000] "GET /api/contacts?status=accepted HTTP/1.1" 200 174 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:26 +0000] "GET /api/users/me HTTP/1.1" 200 741 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:26 +0000] "PUT /api/users/me HTTP/1.1" 401 87 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:26 +0000] "POST /api/groups HTTP/1.1" 400 160 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:26 +0000] "GET /api/files/73961064-506a-422e-a02d-9c76b9034609 HTTP/1.1" 200 25 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:26 +0000] "GET /api/contacts?page=1&limit=10 HTTP/1.1" 200 174 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:26 +0000] "PUT /api/users/me HTTP/1.1" 400 67 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:27 +0000] "POST /api/groups HTTP/1.1" 201 - "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:27 +0000] "GET /api/files/6cb99309-9d11-465b-b3cc-56aa682df05e HTTP/1.1" 401 87 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:27 +0000] "GET /api/contacts?status=invalid HTTP/1.1" 400 181 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:27 +0000] "PUT /api/users/me HTTP/1.1" 400 74 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:27 +0000] "GET /api/groups HTTP/1.1" 401 87 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:27 +0000] "GET /api/files/00000000-0000-0000-0000-000000000000 HTTP/1.1" 404 26 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:27 +0000] "GET /api/groups?page=1&limit=10 HTTP/1.1" 200 156 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:28 +0000] "POST /api/files/d957bc33-dec5-45e9-8cef-7925001fce8f/delete HTTP/1.1" 200 247 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:28 +0000] "POST /api/contacts HTTP/1.1" 201 324 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:28 +0000] "GET /api/users/search?q=searchable1766442387851 HTTP/1.1" 200 872 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:28 +0000] "GET /api/users/search?q=test HTTP/1.1" 401 87 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:28 +0000] "POST /api/groups HTTP/1.1" 201 - "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:28 +0000] "GET /api/groups/1e9d9241-7f9f-49fc-8756-769511231666 HTTP/1.1" 200 - "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:28 +0000] "GET /api/groups/00000000-0000-0000-0000-000000000000 HTTP/1.1" 401 87 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:28 +0000] "POST /api/contacts HTTP/1.1" 401 87 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:28 +0000] "GET /api/users/search HTTP/1.1" 400 79 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:29 +0000] "GET /api/groups/00000000-0000-0000-0000-000000000000 HTTP/1.1" 403 103 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:29 +0000] "POST /api/contacts HTTP/1.1" 400 164 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:29 +0000] "POST /api/files/4e3b0df2-561c-4210-a064-3ce114f45771/delete HTTP/1.1" 403 25 "-" "-"
FAIL tests/files.test.js (9.822 s)
  ΓùÅ Console

    console.log
      ≡ƒöì Database config: {
        host: '127.0.0.1',
        port: 5432,
        database: 'messenger',
        username: 'messenger',
        dialect: 'postgres'
      }

      at src/config/database.js:43:11

    console.log
      Γ£à Sequelize instance created for test environment

      at src/config/database.js:51:11

    console.log
      2025-12-22T22:26:22.314Z [[33mwarn[39m]: Firebase 
Admin SDK not initialized. Push notifications will not 
work. Please configure Firebase credentials in environment 
variables or service account file.

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:24.656Z [[32minfo[39m]: 
Notification settings cache cleanup initialized

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:24.658Z [[32minfo[39m]: Auto 
cleanup for expired notifications started

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:24.685Z [[32minfo[39m]: Data 
retention job scheduled.

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒôÜ Swagger UI will be available at /api-docs

      at src/app.js:186:11

    console.log
      Γ£à Test database connected

      at initializeTestDatabase (tests/setup.js:39:13)

    console.log
      2025-12-22T22:26:25.423Z [[32minfo[39m]: 
Authentication successful for user: 
testuser17664423848202n1on9 
(17ab9789-b865-45da-a11f-4dd9003bf2d5)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.432Z [[32minfo[39m]: Upload 
directories created successfully
      {
        "uploadDir": "./uploads",
        "tempDir": "./uploads/temp"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.449Z [[32minfo[39m]: ClamAV 
scanner initialized via daemon connection
      {
        "host": "localhost",
        "port": 3310
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.450Z [[32minfo[39m]: File 
upload service initialized successfully

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.461Z [[32minfo[39m]: 
Processing 1 files for user 
17ab9789-b865-45da-a11f-4dd9003bf2d5

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.463Z [[32minfo[39m]: 
Processing file: test-file.txt, size: 17, mimetype: 
text/plain

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.469Z [[32minfo[39m]: File 
processed successfully
      {
        "originalName": "test-file.txt",
        "secureFilename": 
"1766442385465_vttz6nb4uv_test-file.txt",
        "size": 17,
        "mimeType": "text/plain",
        "userId": "17ab9789-b865-45da-a11f-4dd9003bf2d5",
        "messageId": null
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.470Z [[32minfo[39m]: File 
processed successfully: test-file.txt

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.483Z [[32minfo[39m]: Virus 
scan queued for file e387be73-a51e-45b8-a106-08fb740e6687

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.485Z [[32minfo[39m]: Thumbnail 
generation queued
      {
        "fileId": "e387be73-a51e-45b8-a106-08fb740e6687",
        "fileType": "document",
        "mimeType": "text/plain"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.486Z [[32minfo[39m]: File 
upload completed
      {
        "userId": "17ab9789-b865-45da-a11f-4dd9003bf2d5",
        "action": "file_upload",
        "fileId": "e387be73-a51e-45b8-a106-08fb740e6687",
        "filename": 
"1766442385465_vttz6nb4uv_test-file.txt",
        "originalName": "test-file.txt",
        "fileSize": 17,
        "mimeType": "text/plain"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.487Z [[32minfo[39m]: Files 
uploaded successfully
      {
        "userId": "17ab9789-b865-45da-a11f-4dd9003bf2d5",
        "fileCount": 1,
        "totalSize": 17
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:25] 
[13b75380-170b-4b40-b2c0-de54664a45c6] POST 
/api/files/upload 201 - 93ms - POST /api/files/upload

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.519Z [[33mwarn[39m]: Fallback 
icon not found for document, using default

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:25.587Z [[32minfo[39m]: Thumbnail 
generated successfully
      {
        "fileId": "e387be73-a51e-45b8-a106-08fb740e6687",
        "fileType": "document",
        "thumbnailPath": "uploads\\icons\\generic.png"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:25] 
[6ef1e392-5a6e-4c03-8da8-4abdde3bf8bd] POST 
/api/files/upload 401 - 2ms - POST /api/files/upload

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:26.138Z [[32minfo[39m]: 
Authentication successful for user: 
testuser176644238560249legh 
(09eb5a02-8611-4ea0-8a6b-2ccd3d8823da)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:26] 
[41326d7d-fcbd-4a45-9ef4-da5968050de9] POST 
/api/files/upload 400 - 11ms - POST /api/files/upload

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:26.779Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442386190u2q9b 
(dced4ee3-3dd9-434f-9908-f1001b9fe9e4)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:26.831Z [[32minfo[39m]: Audit 
service initialized successfully

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:26.840Z [[33mwarn[39m]: Security 
event logged
      {
        "auditLogId": 
"31968533-935e-4249-9f86-c0e9a034fa86",
        "userId": "dced4ee3-3dd9-434f-9908-f1001b9fe9e4",
        "action": "file_download",
        "severity": "low",
        "status": "warning",
        "details": {
          "fileId": "73961064-506a-422e-a02d-9c76b9034609",
          "filename": "test-file-1766442386763.txt",
          "originalName": "test-file.txt",
          "fileSize": 25,
          "mimeType": "text/plain"
        }
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:26.842Z [[32minfo[39m]: File 
download initiated
      {
        "fileId": "73961064-506a-422e-a02d-9c76b9034609",
        "filename": "test-file-1766442386763.txt",
        "userId": "dced4ee3-3dd9-434f-9908-f1001b9fe9e4",
        "fileSize": 25
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:26] 
[6b0ce90f-eb1b-4d90-adb3-0694de9824cb] GET 
/api/files/73961064-506a-422e-a02d-9c76b9034609 200 - 71ms 
- GET /api/files/73961064-506a-422e-a02d-9c76b9034609

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      [2025-12-22 23:26:27] 
[ac5d95c2-752c-4cfe-80a4-7ebdedd0b85f] GET 
/api/files/6cb99309-9d11-465b-b3cc-56aa682df05e 401 - 1ms 
- GET /api/files/6cb99309-9d11-465b-b3cc-56aa682df05e

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:27.835Z [[32minfo[39m]: 
Authentication successful for user: 
testuser17664423873621qqu3 
(64fbbc3b-a9ee-41cc-803b-526924e76d63)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:27] 
[8e6e31a8-7f60-4d2a-b49b-6ff36a2f5519] GET 
/api/files/00000000-0000-0000-0000-000000000000 404 - 12ms 
- GET /api/files/00000000-0000-0000-0000-000000000000

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:28.321Z [[32minfo[39m]: 
Authentication successful for user: 
testuser17664423878576s8g6j 
(f835d8d7-f19b-42b4-b01e-c4d38719074d)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:28.326Z [[32minfo[39m]: 
Authentication successful for user: 
testuser17664423878576s8g6j 
(f835d8d7-f19b-42b4-b01e-c4d38719074d)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:28.340Z [[32minfo[39m]: File 
marked for deletion
      {
        "fileId": "d957bc33-dec5-45e9-8cef-7925001fce8f",
        "filename": "test-file-1766442388307.txt",
        "reason": "admin_deleted",
        "actualDeletionTime": "2025-12-23T22:26:28.334Z"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:28.347Z [[33mwarn[39m]: Security 
event logged
      {
        "auditLogId": 
"71af73b2-29e2-46ab-b022-385e46e35fa2",
        "userId": "f835d8d7-f19b-42b4-b01e-c4d38719074d",
        "action": "file_marked_for_deletion",
        "severity": "low",
        "status": "warning",
        "details": {
          "fileId": "d957bc33-dec5-45e9-8cef-7925001fce8f",
          "filename": "test-file-1766442388307.txt",
          "originalName": "test-file.txt",
          "reason": "admin_deleted",
          "actualDeletionTime": "2025-12-23T22:26:28.334Z"
        }
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:28] 
[09007e33-3ca6-4bca-bac8-26408ea16662] POST 
/api/files/d957bc33-dec5-45e9-8cef-7925001fce8f/delete 200 
- 33ms - POST 
/api/files/d957bc33-dec5-45e9-8cef-7925001fce8f/delete

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:29.357Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442388837115pch 
(0469d8eb-1b3e-4b33-bb64-eb75b99f803a)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:29.363Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442388837115pch 
(0469d8eb-1b3e-4b33-bb64-eb75b99f803a)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:29] 
[9c714b70-d139-4e43-9e28-4ac52648f6ae] POST 
/api/files/4e3b0df2-561c-4210-a064-3ce114f45771/delete 403 
- 16ms - POST 
/api/files/4e3b0df2-561c-4210-a064-3ce114f45771/delete

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

  ΓùÅ Files API ΓÇ║ POST /api/files/upload/messages ΓÇ║ 
should require authentication

    read ECONNRESET



::ffff:127.0.0.1 - - [22/Dec/2025:22:26:29 +0000] "POST /api/groups HTTP/1.1" 201 - "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:29 +0000] "POST /api/contacts HTTP/1.1" 404 44 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:29 +0000] "PUT /api/groups/e722f5ac-6ed1-440a-881b-2c89b587bcf9 HTTP/1.1" 200 - "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:29 +0000] "GET /api/users/cbe6c11c-641f-47ab-b210-ee94e07116fa HTTP/1.1" 200 740 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:29 +0000] "GET /api/users/00000000-0000-0000-0000-000000000000 HTTP/1.1" 401 87 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:30 +0000] "PUT /api/groups/00000000-0000-0000-0000-000000000000 HTTP/1.1" 401 87 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:30 +0000] "GET /api/users/123e4567-e89b-12d3-a456-426614174000 HTTP/1.1" 404 42 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:30 +0000] "POST /api/groups HTTP/1.1" 201 - "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:30 +0000] "DELETE /api/groups/0d855907-9f30-42f0-9392-15bb5aeaa8bb HTTP/1.1" 200 55 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:30 +0000] "POST /api/contacts HTTP/1.1" 201 324 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:30 +0000] "POST /api/contacts HTTP/1.1" 409 61 "-" "-"
FAIL tests/users.test.js (11.391 s)
  ΓùÅ Console

    console.log
      ≡ƒöì Database config: {
        host: '127.0.0.1',
        port: 5432,
        database: 'messenger',
        username: 'messenger',
        dialect: 'postgres'
      }

      at src/config/database.js:43:11

    console.log
      Γ£à Sequelize instance created for test environment

      at src/config/database.js:51:11

    console.log
      2025-12-22T22:26:22.289Z [[33mwarn[39m]: Firebase 
Admin SDK not initialized. Push notifications will not 
work. Please configure Firebase credentials in environment 
variables or service account file.

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:24.785Z [[32minfo[39m]: Queue 
service initialized with retry logic and scheduled jobs

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:24.803Z [[32minfo[39m]: 
Notification settings cache cleanup initialized

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:24.804Z [[32minfo[39m]: Auto 
cleanup for expired notifications started

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:24.825Z [[32minfo[39m]: Data 
retention job scheduled.

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒôÜ Swagger UI will be available at /api-docs

      at src/app.js:186:11

    console.log
      Γ£à Test database connected

      at initializeTestDatabase (tests/setup.js:39:13)

    console.log
      2025-12-22T22:26:25.580Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442385034i3rjcl 
(4dc34b1b-3352-403b-9d47-218673186cd2)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:25] 
[29685cad-100a-4838-b2e8-1e1d526dcfd0] undefined undefined 
undefined - undefinedms - User profile retrieved 
successfully

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:25] 
[29685cad-100a-4838-b2e8-1e1d526dcfd0] GET /api/users/me 
200 - 36ms - GET /api/users/me

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      [2025-12-22 23:26:25] 
[42c54017-c0de-4c5c-9d53-3f243b6a308f] GET /api/users/me 
401 - 2ms - GET /api/users/me

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:26.258Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442385683g4zcib 
(9792ae4b-8727-4379-8700-cb7093669ce2)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:26] 
[027e33eb-86b2-4e49-83fc-e047206faf7f] undefined undefined 
undefined - undefinedms - User profile retrieved 
successfully

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:26] 
[027e33eb-86b2-4e49-83fc-e047206faf7f] GET /api/users/me 
200 - 13ms - GET /api/users/me

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      [2025-12-22 23:26:26] 
[a3ce9f0b-17d0-490c-8a47-d76acef0b873] PUT /api/users/me 
401 - 2ms - PUT /api/users/me

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:26.884Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442386315lm98po 
(d2175bc2-d70f-4b45-a70d-784538b4ba8a)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:26] 
[4fb9c714-f374-4704-8134-da11286fa1f9] undefined undefined 
undefined - undefinedms - Profile update validation failed

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:26] 
[4fb9c714-f374-4704-8134-da11286fa1f9] PUT /api/users/me 
400 - 9ms - PUT /api/users/me

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:27.377Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442386906kod88g 
(589439cc-601e-4a3e-a5b2-06c78b527c6d)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:27] 
[49ee344a-d738-44b7-ba4b-5df944161293] undefined undefined 
undefined - undefinedms - Profile update validation failed

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:27] 
[49ee344a-d738-44b7-ba4b-5df944161293] PUT /api/users/me 
400 - 9ms - PUT /api/users/me

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:28.322Z [[32minfo[39m]: 
Authentication successful for user: 
testuser176644238739658gdlc 
(b6b4c966-b9b2-43cd-b4f9-068b82c21a26)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.error
      Error getting cached search results: TypeError: 
Cannot read properties of null (reading 'get')
          at SearchCacheService.getCachedResults (C:\messen
ger\backend\src\services\searchCacheService.js:52:39)
          at 
C:\messenger\backend\src\routes\users.js:549:52
          at Layer.handle [as handle_request] (C:\messenger
\backend\node_modules\express\lib\router\layer.js:95:5)
          at next (C:\messenger\backend\node_modules\expres
s\lib\router\route.js:149:13)
          at authenticate 
(C:\messenger\backend\src\middleware\auth.js:84:5)
          at processTicksAndRejections 
(node:internal/process/task_queues:105:5)

    [0m [90m 58 |[39m       [36mreturn[39m 
[36mnull[39m[33m;[39m
     [90m 59 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 60 |[39m       
console[33m.[39merror([32m'Error getting cached search 
results:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 61 |[39m       [36mreturn[39m 
[36mnull[39m[33m;[39m
     [90m 62 |[39m     }
     [90m 63 |[39m   }[0m

      at SearchCacheService.getCachedResults 
(src/services/searchCacheService.js:60:15)
      at src/routes/users.js:549:52
      at Layer.handle [as handle_request] 
(node_modules/express/lib/router/layer.js:95:5)
      at next 
(node_modules/express/lib/router/route.js:149:13)
      at authenticate (src/middleware/auth.js:84:5)

    console.error
      Error getting cached blocked users: TypeError: 
Cannot read properties of null (reading 'get')
          at SearchCacheService.getCachedBlockedUsers (C:\m
essenger\backend\src\services\searchCacheService.js:94:39)
          at 
C:\messenger\backend\src\routes\users.js:573:51
          at processTicksAndRejections 
(node:internal/process/task_queues:105:5)

    [0m [90m 100 |[39m       [36mreturn[39m 
[36mnull[39m[33m;[39m
     [90m 101 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 102 |[39m       
console[33m.[39merror([32m'Error getting cached blocked 
users:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 103 |[39m       [36mreturn[39m 
[36mnull[39m[33m;[39m
     [90m 104 |[39m     }
     [90m 105 |[39m   }[0m

      at SearchCacheService.getCachedBlockedUsers 
(src/services/searchCacheService.js:102:15)
      at src/routes/users.js:573:51

    console.error
      Error caching blocked users: TypeError: Cannot read 
properties of null (reading 'setex')
          at SearchCacheService.setCachedBlockedUsers (C:\m
essenger\backend\src\services\searchCacheService.js:116:24)
          at 
C:\messenger\backend\src\routes\users.js:600:32
          at processTicksAndRejections 
(node:internal/process/task_queues:105:5)

    [0m [90m 116 |[39m       [36mawait[39m [36mthis[
39m[33m.[39mredis[33m.[39msetex(cacheKey[33m,[39m 
[36mthis[39m[33m.[39m[33mCACHE_TTL[39m[33m,[39m [3
3mJSON[39m[33m.[39mstringify([33mArray[39m[33m.[39m
[36mfrom[39m(blockedUserIds)))[33m;[39m
     [90m 117 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 118 |[39m       
console[33m.[39merror([32m'Error caching blocked 
users:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 119 |[39m     }
     [90m 120 |[39m   }
     [90m 121 |[39m[0m

      at SearchCacheService.setCachedBlockedUsers 
(src/services/searchCacheService.js:118:15)
      at src/routes/users.js:600:32

    console.error
      Error caching search results: TypeError: Cannot read 
properties of undefined (reading 'users')
          at SearchCacheService.setCachedResults (C:\messen
ger\backend\src\services\searchCacheService.js:78:24)
          at 
C:\messenger\backend\src\routes\users.js:708:30
          at processTicksAndRejections 
(node:internal/process/task_queues:105:5)

    [0m [90m 80 |[39m       }
     [90m 81 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 82 |[39m       
console[33m.[39merror([32m'Error caching search 
results:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 83 |[39m     }
     [90m 84 |[39m   }
     [90m 85 |[39m[0m

      at SearchCacheService.setCachedResults 
(src/services/searchCacheService.js:82:15)
      at src/routes/users.js:708:30

    console.log
      [2025-12-22 23:26:28] 
[eb258ff9-a663-4b52-9f7e-f528de5c833e] undefined undefined 
undefined - undefinedms - User search completed 
successfully

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:28] 
[eb258ff9-a663-4b52-9f7e-f528de5c833e] GET 
/api/users/search?q=searchable1766442387851 200 - 89ms - 
GET /api/users/search?q=searchable1766442387851

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      [2025-12-22 23:26:28] 
[05c1733f-5f97-4d38-b88e-0210675990e9] GET 
/api/users/search?q=test 401 - 1ms - GET 
/api/users/search?q=test

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:30 +0000] "GET /api/users/not-a-uuid HTTP/1.1" 400 84 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:30 +0000] "DELETE /api/groups/00000000-0000-0000-0000-000000000000 HTTP/1.1" 401 87 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:30 +0000] "PUT /api/users/me HTTP/1.1" 401 87 "-" "-"
      2025-12-22T22:26:28.938Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442388471igic3m 
(378543e1-76b4-4790-95ee-513e2011821d)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:28] 
[48b91d04-5d1c-40fb-872b-a64581ac8584] undefined undefined 
undefined - undefinedms - User search attempted without 
query

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:28] 
[48b91d04-5d1c-40fb-872b-a64581ac8584] GET 
/api/users/search 400 - 9ms - GET /api/users/search

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:29.945Z [[32minfo[39m]: 
Authentication successful for user: 
testuser17664423890140vrmvi 
(457d0b0a-1bce-4a1e-a12b-0540f4d960c9)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:29] 
[1a85e15e-c778-4c09-9b96-2edf93ad75d6] undefined undefined 
undefined - undefinedms - User retrieved successfully

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:29] 
[1a85e15e-c778-4c09-9b96-2edf93ad75d6] GET 
/api/users/cbe6c11c-641f-47ab-b210-ee94e07116fa 200 - 11ms 
- GET /api/users/cbe6c11c-641f-47ab-b210-ee94e07116fa

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      [2025-12-22 23:26:29] 
[35d24f1a-93b6-46b7-a66f-16b14c31489b] GET 
/api/users/00000000-0000-0000-0000-000000000000 401 - 1ms 
- GET /api/users/00000000-0000-0000-0000-000000000000

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:30.443Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442389983ps8vwt 
(a2d97be4-b4ce-46d2-b3f3-70412246c1ef)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:30] 
[8be50fd9-d0a1-4de1-9692-d6c15b67c08f] undefined undefined 
undefined - undefinedms - User not found

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:30] 
[8be50fd9-d0a1-4de1-9692-d6c15b67c08f] GET 
/api/users/123e4567-e89b-12d3-a456-426614174000 404 - 9ms 
- GET /api/users/123e4567-e89b-12d3-a456-426614174000

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:30.936Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442390462u7h43v 
(e484fd47-2b22-46c1-a508-344f1a145816)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:30] 
[02b5278b-bc69-43a3-a87f-5e8213b49599] undefined undefined 
undefined - undefinedms - Invalid UUID format in user 
lookup

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:30] 
[02b5278b-bc69-43a3-a87f-5e8213b49599] GET 
/api/users/not-a-uuid 400 - 9ms - GET /api/users/not-a-uuid

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      [2025-12-22 23:26:30] 
[3545b572-e11b-4d37-9d83-5d02107ad516] PUT /api/users/me 
401 - 1ms - PUT /api/users/me

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

  ΓùÅ Users API ΓÇ║ GET /api/users/search ΓÇ║ should 
search users by username

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 131 |[39m
     [90m 132 |[39m             expect(response[33m.[39
mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33
m;[39m
    [31m[1m>[22m[39m[90m 133 |[39m             expect
([33mArray[39m[33m.[39misArray(response[33m.[39mbody
[33m.[39mdata))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                      
                 [31m[1m^[22m[39m
     [90m 134 |[39m         })[33m;[39m
     [90m 135 |[39m
     [90m 136 |[39m         it([32m'should require 
authentication'[39m[33m,[39m [36masync[39m () 
[33m=>[39m {[0m

      at Object.<anonymous> (tests/users.test.js:133:55)

  ΓùÅ Users API ΓÇ║ GET /api/users/search ΓÇ║ should 
exclude current user from results

    SequelizeValidationError: Validation error: Username 
can only contain letters and numbers

    [0m [90m 49 |[39m     }[33m;[39m
     [90m 50 |[39m
    [31m[1m>[22m[39m[90m 51 |[39m     
[36mconst[39m user [33m=[39m [36mawait[39m 
[33mUser[39m[33m.[39mcreate(userData)[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m 52 |[39m     [36mthis[39m[33m.[39mcreatedRe
cords[33m.[39musers[33m.[39mpush(user)[33m;[39m
     [90m 53 |[39m     [36mreturn[39m user[33m;[39m
     [90m 54 |[39m   }[0m

      at InstanceValidator._validate 
(node_modules/sequelize/src/instance-validator.js:78:13)
      at InstanceValidator._validateAndRunHooks 
(node_modules/sequelize/src/instance-validator.js:111:7)
      at InstanceValidator.validate 
(node_modules/sequelize/src/instance-validator.js:93:12)
      at model.save 
(node_modules/sequelize/src/model.js:4077:7)
      at Function.create 
(node_modules/sequelize/src/model.js:2305:12)
      at TestFactory.createUser 
(tests/testFactory.js:51:18)
      at TestFactory.createAuthenticatedUser 
(tests/testFactory.js:60:18)
      at Object.<anonymous> (tests/users.test.js:155:30)

::ffff:127.0.0.1 - - [22/Dec/2025:22:26:31 +0000] "POST /api/contacts HTTP/1.1" 400 62 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:31 +0000] "POST /api/groups HTTP/1.1" 201 - "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:31 +0000] "POST /api/groups/b08ad18a-9946-418b-a99d-5cb943e986a7/members HTTP/1.1" 201 - "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:32 +0000] "POST /api/contacts HTTP/1.1" 201 324 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:32 +0000] "PUT /api/contacts/1451e334-6fa6-426e-9089-e015c863ab9d/accept HTTP/1.1" 404 97 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:32 +0000] "POST /api/groups HTTP/1.1" 201 - "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:32 +0000] "GET /api/groups/128f3367-3fcc-4d6a-abc9-7eeb4fa03e3d/members HTTP/1.1" 200 811 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:33 +0000] "POST /api/contacts HTTP/1.1" 201 324 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:33 +0000] "PUT /api/contacts/c4d78e77-2846-493d-9d5d-69c7b8fcbfc9/reject HTTP/1.1" 404 97 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:33 +0000] "POST /api/groups HTTP/1.1" 201 - "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:33 +0000] "POST /api/groups/c94bb4e7-0225-41fc-81ff-bf5a58461f45/members HTTP/1.1" 201 - "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:33 +0000] "DELETE /api/groups/c94bb4e7-0225-41fc-81ff-bf5a58461f45/members/51e9fad6-22ea-42b2-8a23-18e6f51d0742 HTTP/1.1" 200 56 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:34 +0000] "POST /api/contacts HTTP/1.1" 201 324 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:34 +0000] "DELETE /api/contacts/af607c75-1320-4fc7-bff3-7936d7fa6ee6 HTTP/1.1" 200 149 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:34 +0000] "DELETE /api/contacts/00000000-0000-0000-0000-000000000000 HTTP/1.1" 401 87 "-" "-"
PASS tests/contacts.test.js (15.545 s)
  ΓùÅ Console

    console.log
      ≡ƒöì Database config: {
        host: '127.0.0.1',
        port: 5432,
        database: 'messenger',
        username: 'messenger',
        dialect: 'postgres'
      }

      at src/config/database.js:43:11

    console.log
      Γ£à Sequelize instance created for test environment

      at src/config/database.js:51:11

    console.log
      2025-12-22T22:26:22.300Z [[33mwarn[39m]: Firebase 
Admin SDK not initialized. Push notifications will not 
work. Please configure Firebase credentials in environment 
variables or service account file.

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:24.782Z [[32minfo[39m]: Queue 
service initialized with retry logic and scheduled jobs

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:24.795Z [[32minfo[39m]: 
Notification settings cache cleanup initialized

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:24.797Z [[32minfo[39m]: Auto 
cleanup for expired notifications started

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:24.822Z [[32minfo[39m]: Data 
retention job scheduled.

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒôÜ Swagger UI will be available at /api-docs

      at src/app.js:186:11

    console.log
      Γ£à Test database connected

      at initializeTestDatabase (tests/setup.js:39:13)

    console.log
      2025-12-22T22:26:25.576Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442385031n9cupm 
(6890620e-71fb-46fd-af17-57701b32aee0)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:25] 
[357d4c54-654e-4a49-b71b-ae272f11300e] GET /api/contacts 
200 - 65ms - GET /api/contacts

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      [2025-12-22 23:26:25] 
[6ec4f0f3-4c1a-4dbf-b785-aaf14039206f] GET /api/contacts 
401 - 2ms - GET /api/contacts

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:26.252Z [[32minfo[39m]: 
Authentication successful for user: 
testuser17664423857138v8ihx 
(14771a12-1c46-4c03-8309-7c8c535fc1bf)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:26] 
[10c8b97e-cb05-4630-a840-452c5b398346] GET 
/api/contacts?status=accepted 200 - 21ms - GET 
/api/contacts?status=accepted

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:26.852Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442386287zusnwe 
(66cab424-8f9e-438e-a33f-8d2f7cc876cc)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:26] 
[1e3452d1-94ea-49a7-8445-ca0c1b619307] GET 
/api/contacts?page=1&limit=10 200 - 14ms - GET 
/api/contacts?page=1&limit=10

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:27.369Z [[32minfo[39m]: 
Authentication successful for user: 
testuser17664423869008kubzc 
(bea2b821-380f-4685-8be8-71a8df8b96fa)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:27] 
[96c0731a-ad48-4787-a5a0-8cb700ec4205] GET 
/api/contacts?status=invalid 400 - 8ms - GET 
/api/contacts?status=invalid

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:28.341Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442387392zkiywl 
(f75668a6-9833-48fb-b793-ae1ca19d57e6)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.warn
      ΓÜá∩╕Å WebSocket service: this.io is undefined

    [0m [90m 900 |[39m     [90m// Skip if WebSocket 
service is not properly initialized[39m
     [90m 901 |[39m     [36mif[39m 
([33m![39m[36mthis[39m[33m.[39mio) {
    [31m[1m>[22m[39m[90m 902 |[39m       
console[33m.[39mwarn([32m'ΓÜá∩╕Å WebSocket service: 
this.io is undefined'[39m)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 903 |[39m       [36mreturn[39m[33m;[39m
     [90m 904 |[39m     }
     [90m 905 |[39m[0m

      at WebSocketService.broadcastToUser 
(src/services/websocket.js:902:15)
      at src/routes/contacts.js:308:25

    console.log
      2025-12-22T22:26:28.378Z [[32minfo[39m]: Γ£à 
Contact request notification sent to user 
00bd370e-8aa7-4703-ad76-133d1fd05a28

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:28.381Z [[32minfo[39m]: Γä╣∩╕Å No 
devices registered for user 
00bd370e-8aa7-4703-ad76-133d1fd05a28

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:28] 
[b8c68475-9567-467a-a45c-abd0343eace7] POST /api/contacts 
201 - 47ms - POST /api/contacts

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      [2025-12-22 23:26:28] 
[f6a44ceb-7e24-4493-9f97-a7833fd401ab] POST /api/contacts 
401 - 1ms - POST /api/contacts

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:29.344Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442388869wvtzfg 
(908c2140-7e55-461b-9e4c-772e8cddeefb)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:29] 
[cc92d0bf-b0e6-4eba-a6a3-4bbfddb8e9e5] POST /api/contacts 
400 - 6ms - POST /api/contacts

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:29.826Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442389362199wx 
(1d9ee49a-464c-4425-a87d-1e257d50542e)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:29] 
[3d6b8455-c10d-4ff6-8a4d-5c8dc004b8be] POST /api/contacts 
404 - 9ms - POST /api/contacts

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:30.768Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442389844f6qni 
(47b6ccde-3ff5-466b-996d-5223fb0c8c41)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.warn
      ΓÜá∩╕Å WebSocket service: this.io is undefined

    [0m [90m 900 |[39m     [90m// Skip if WebSocket 
service is not properly initialized[39m
     [90m 901 |[39m     [36mif[39m 
([33m![39m[36mthis[39m[33m.[39mio) {
    [31m[1m>[22m[39m[90m 902 |[39m       
console[33m.[39mwarn([32m'ΓÜá∩╕Å WebSocket service: 
this.io is undefined'[39m)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 903 |[39m       [36mreturn[39m[33m;[39m
     [90m 904 |[39m     }
     [90m 905 |[39m[0m

      at WebSocketService.broadcastToUser 
(src/services/websocket.js:902:15)
      at src/routes/contacts.js:308:25

    console.log
      2025-12-22T22:26:30.793Z [[32minfo[39m]: Γ£à 
Contact request notification sent to user 
53887548-eb13-44f4-a7f5-6b14ea732c8e

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:30.797Z [[32minfo[39m]: Γä╣∩╕Å No 
devices registered for user 
53887548-eb13-44f4-a7f5-6b14ea732c8e

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:30] 
[e5442340-b6bd-4700-b7fc-50a3ddfda934] POST /api/contacts 
201 - 34ms - POST /api/contacts

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:30.810Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442389844f6qni 
(47b6ccde-3ff5-466b-996d-5223fb0c8c41)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:30.818Z [[31merror[39m]: Γ¥î 
Error adding contact: Contact request already pending
      {
        "stack": "Error: Contact request already pending\n 
   at Function.Contact.sendRequest 
(C:\\messenger\\backend\\src\\models\\Contact.js:298:13)\n 
   at processTicksAndRejections 
(node:internal/process/task_queues:105:5)\n    at 
C:\\messenger\\backend\\src\\routes\\contacts.js:281:23"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:30] 
[54cdf476-78b9-453b-8108-76e53c803a68] POST /api/contacts 
409 - 14ms - POST /api/contacts

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:31.290Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442390837z1533 
(5919dafa-d7d4-4481-ba6d-1d2da8186c39)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:31] 
[f1796deb-6e2c-4098-bebd-d08ccb3cc800] POST /api/contacts 
400 - 6ms - POST /api/contacts

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:32.194Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442391305d3uq8p 
(b8717a41-d0c5-42b2-8475-aa1e8411501a)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.warn
      ΓÜá∩╕Å WebSocket service: this.io is undefined

    [0m [90m 900 |[39m     [90m// Skip if WebSocket 
service is not properly initialized[39m
     [90m 901 |[39m     [36mif[39m 
([33m![39m[36mthis[39m[33m.[39mio) {
    [31m[1m>[22m[39m[90m 902 |[39m       
console[33m.[39mwarn([32m'ΓÜá∩╕Å WebSocket service: 
this.io is undefined'[39m)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 903 |[39m       [36mreturn[39m[33m;[39m
     [90m 904 |[39m     }
     [90m 905 |[39m[0m

      at WebSocketService.broadcastToUser 
(src/services/websocket.js:902:15)
      at src/routes/contacts.js:308:25

    console.log
      2025-12-22T22:26:32.220Z [[32minfo[39m]: Γ£à 
Contact request notification sent to user 
f07951fe-abbb-4d7f-b92e-53e6a7079856

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:32.223Z [[32minfo[39m]: Γä╣∩╕Å No 
devices registered for user 
f07951fe-abbb-4d7f-b92e-53e6a7079856

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:32] 
[41baca87-42fe-4219-b7a6-92376a715936] POST /api/contacts 
201 - 34ms - POST /api/contacts

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:32.234Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442391742cgg45q 
(f07951fe-abbb-4d7f-b92e-53e6a7079856)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:32] 
[34df2cce-7acc-45e5-9cd7-f8a48016c597] PUT 
/api/contacts/1451e334-6fa6-426e-9089-e015c863ab9d/accept 
404 - 6ms - PUT 
/api/contacts/1451e334-6fa6-426e-9089-e015c863ab9d/accept

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:33.141Z [[32minfo[39m]: 
Authentication successful for user: 
testuser17664423922582tno5i 
(62541e9c-9aae-4579-a70d-9cdfadd64385)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.warn
      ΓÜá∩╕Å WebSocket service: this.io is undefined

    [0m [90m 900 |[39m     [90m// Skip if WebSocket 
service is not properly initialized[39m
     [90m 901 |[39m     [36mif[39m 
([33m![39m[36mthis[39m[33m.[39mio) {
    [31m[1m>[22m[39m[90m 902 |[39m       
console[33m.[39mwarn([32m'ΓÜá∩╕Å WebSocket service: 
this.io is undefined'[39m)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 903 |[39m       [36mreturn[39m[33m;[39m
     [90m 904 |[39m     }
     [90m 905 |[39m[0m

      at WebSocketService.broadcastToUser 
(src/services/websocket.js:902:15)
      at src/routes/contacts.js:308:25

    console.log
      2025-12-22T22:26:33.167Z [[32minfo[39m]: Γ£à 
Contact request notification sent to user 
2171b4ff-1334-4dcd-b315-ed717e1cab41

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:33.170Z [[32minfo[39m]: Γä╣∩╕Å No 
devices registered for user 
2171b4ff-1334-4dcd-b315-ed717e1cab41

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:33] 
[1b66e9fe-81c7-488c-89e2-5a3ed12e3e01] POST /api/contacts 
201 - 34ms - POST /api/contacts

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:33.180Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442392698a5d82 
(2171b4ff-1334-4dcd-b315-ed717e1cab41)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:33] 
[b78ffbe3-499c-4386-a3a5-a524c2f8329f] PUT 
/api/contacts/c4d78e77-2846-493d-9d5d-69c7b8fcbfc9/reject 
404 - 6ms - PUT 
/api/contacts/c4d78e77-2846-493d-9d5d-69c7b8fcbfc9/reject

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:34.108Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442393202y8rejd 
(a049c689-a56b-4107-b8e0-7700c8f7eb8c)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.warn
      ΓÜá∩╕Å WebSocket service: this.io is undefined

    [0m [90m 900 |[39m     [90m// Skip if WebSocket 
service is not properly initialized[39m
     [90m 901 |[39m     [36mif[39m 
([33m![39m[36mthis[39m[33m.[39mio) {
    [31m[1m>[22m[39m[90m 902 |[39m       
console[33m.[39mwarn([32m'ΓÜá∩╕Å WebSocket service: 
this.io is undefined'[39m)[33m;[39m
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:35 +0000] "POST /api/contacts HTTP/1.1" 201 324 "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:35 +0000] "PUT /api/contacts/af42fa11-533c-4a91-9758-824412620af4/block HTTP/1.1" 404 96 "-" "-"
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 903 |[39m       [36mreturn[39m[33m;[39m
     [90m 904 |[39m     }
     [90m 905 |[39m[0m

      at WebSocketService.broadcastToUser 
(src/services/websocket.js:902:15)
      at src/routes/contacts.js:308:25

    console.log
      2025-12-22T22:26:34.133Z [[32minfo[39m]: Γ£à 
Contact request notification sent to user 
be5d3a96-d51b-4983-8ccf-a59bee0c4089

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:34.136Z [[32minfo[39m]: Γä╣∩╕Å No 
devices registered for user 
be5d3a96-d51b-4983-8ccf-a59bee0c4089

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:34] 
[9b26f010-22f6-48d9-9667-abb5d76c44f4] POST /api/contacts 
201 - 33ms - POST /api/contacts

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:34.147Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442393202y8rejd 
(a049c689-a56b-4107-b8e0-7700c8f7eb8c)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:34] 
[07f4c92f-af8d-4cd0-a18b-f42de5f6a2fb] DELETE 
/api/contacts/af607c75-1320-4fc7-bff3-7936d7fa6ee6 200 - 
14ms - DELETE 
/api/contacts/af607c75-1320-4fc7-bff3-7936d7fa6ee6

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      [2025-12-22 23:26:34] 
[3cf4df80-9e8d-4bc7-ab94-f81eaa298cef] DELETE 
/api/contacts/00000000-0000-0000-0000-000000000000 401 - 
1ms - DELETE 
/api/contacts/00000000-0000-0000-0000-000000000000

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:35.094Z [[32minfo[39m]: 
Authentication successful for user: 
testuser17664423941856sgp1 
(efc4fe39-6ce3-42d2-9381-8b5e5a9263f4)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.warn
      ΓÜá∩╕Å WebSocket service: this.io is undefined

    [0m [90m 900 |[39m     [90m// Skip if WebSocket 
service is not properly initialized[39m
     [90m 901 |[39m     [36mif[39m 
([33m![39m[36mthis[39m[33m.[39mio) {
    [31m[1m>[22m[39m[90m 902 |[39m       
console[33m.[39mwarn([32m'ΓÜá∩╕Å WebSocket service: 
this.io is undefined'[39m)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 903 |[39m       [36mreturn[39m[33m;[39m
     [90m 904 |[39m     }
     [90m 905 |[39m[0m

      at WebSocketService.broadcastToUser 
(src/services/websocket.js:902:15)
      at src/routes/contacts.js:308:25

    console.log
      2025-12-22T22:26:35.120Z [[32minfo[39m]: Γ£à 
Contact request notification sent to user 
e11a5af0-accb-4197-b002-5c0897579447

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:35.123Z [[32minfo[39m]: Γä╣∩╕Å No 
devices registered for user 
e11a5af0-accb-4197-b002-5c0897579447

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:35] 
[c7592746-be0a-4a26-abe2-6a23f4401947] POST /api/contacts 
201 - 33ms - POST /api/contacts

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:35.133Z [[32minfo[39m]: 
Authentication successful for user: 
testuser17664423941856sgp1 
(efc4fe39-6ce3-42d2-9381-8b5e5a9263f4)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:35] 
[350e2bea-a7f9-4bca-af58-95c0deccf306] PUT 
/api/contacts/af42fa11-533c-4a91-9758-824412620af4/block 
404 - 5ms - PUT 
/api/contacts/af42fa11-533c-4a91-9758-824412620af4/block

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

::ffff:127.0.0.1 - - [22/Dec/2025:22:26:35 +0000] "POST /api/groups HTTP/1.1" 201 - "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:35 +0000] "POST /api/groups/835bacfe-1af8-4301-bc10-8457de510eef/members HTTP/1.1" 201 - "-" "-"
::ffff:127.0.0.1 - - [22/Dec/2025:22:26:35 +0000] "POST /api/groups/835bacfe-1af8-4301-bc10-8457de510eef/leave HTTP/1.1" 200 56 "-" "-"
PASS tests/groups.test.js (15.997 s)
  ΓùÅ Console

    console.log
      ≡ƒöì Database config: {
        host: '127.0.0.1',
        port: 5432,
        database: 'messenger',
        username: 'messenger',
        dialect: 'postgres'
      }

      at src/config/database.js:43:11

    console.log
      Γ£à Sequelize instance created for test environment

      at src/config/database.js:51:11

    console.log
      2025-12-22T22:26:22.251Z [[33mwarn[39m]: Firebase 
Admin SDK not initialized. Push notifications will not 
work. Please configure Firebase credentials in environment 
variables or service account file.

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:24.710Z [[32minfo[39m]: Queue 
service initialized with retry logic and scheduled jobs

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:24.727Z [[32minfo[39m]: 
Notification settings cache cleanup initialized

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:24.728Z [[32minfo[39m]: Auto 
cleanup for expired notifications started

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:24.748Z [[32minfo[39m]: Data 
retention job scheduled.

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒôÜ Swagger UI will be available at /api-docs

      at src/app.js:186:11

    console.log
      Γ£à Test database connected

      at initializeTestDatabase (tests/setup.js:39:13)

    console.log
      2025-12-22T22:26:25.551Z [[32minfo[39m]: 
Authentication successful for user: 
testuser176644238496884zstj 
(1c7023ba-f030-42d4-96c9-d5555a736760)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.557Z [[32minfo[39m]: Create 
Group Debug - Phase 1:
      {
        "userId": "1c7023ba-f030-42d4-96c9-d5555a736760"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.573Z [[32minfo[39m]: Create 
Group Debug - Phase 4 (Group Created):
      {
        "groupId": "9a96b166-09ed-4246-8c0d-fccc7480a7d9"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.580Z [[32minfo[39m]: Create 
Group Debug - Phase 5 (Creating Creator Membership)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:25.619Z [[32minfo[39m]: Group 
created successfully
      {
        "userId": "1c7023ba-f030-42d4-96c9-d5555a736760",
        "groupId": "9a96b166-09ed-4246-8c0d-fccc7480a7d9",
        "name": "Test Group",
        "groupType": "private",
        "initialMembersCount": 0
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:25] 
[0ccf2bff-9b20-4bac-982d-f61d755a83a3] POST /api/groups 
201 - 102ms - POST /api/groups

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      [2025-12-22 23:26:26] 
[175071d5-3789-4857-9b1b-b5287e3dd622] POST /api/groups 
401 - 2ms - POST /api/groups

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:26.630Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442386033fx4vqh 
(3442670e-ccc5-4232-b489-2a315862f6e3)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:26] 
[d5c934ec-3846-477f-99c0-e6154b2560e3] POST /api/groups 
400 - 8ms - POST /api/groups

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:27.139Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442386676o6er2o 
(9107e17f-5d56-4b63-bfe3-ce0ba6e7dbd0)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:27.140Z [[32minfo[39m]: Create 
Group Debug - Phase 1:
      {
        "userId": "9107e17f-5d56-4b63-bfe3-ce0ba6e7dbd0"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:27.147Z [[32minfo[39m]: Create 
Group Debug - Phase 4 (Group Created):
      {
        "groupId": "82f4bcc3-e385-4292-8eb1-8d91175d0d92"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:27.151Z [[32minfo[39m]: Create 
Group Debug - Phase 5 (Creating Creator Membership)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:27.165Z [[32minfo[39m]: Group 
created successfully
      {
        "userId": "9107e17f-5d56-4b63-bfe3-ce0ba6e7dbd0",
        "groupId": "82f4bcc3-e385-4292-8eb1-8d91175d0d92",
        "name": "AB",
        "groupType": "private",
        "initialMembersCount": 0
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:27] 
[0393cb1e-1a76-4fd3-a162-0a781b8436c8] POST /api/groups 
201 - 31ms - POST /api/groups

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      [2025-12-22 23:26:27] 
[8733bf95-98b3-4469-a51a-349adb0cadf7] GET /api/groups 401 
- 1ms - GET /api/groups

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:27.937Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442387459zwdmi 
(75225e5a-f238-4b7e-b985-918bfa6387c6)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:27] 
[88e0bedb-1c93-4361-9190-bae491f75e5c] GET 
/api/groups?page=1&limit=10 200 - 20ms - GET 
/api/groups?page=1&limit=10

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:28.441Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442387968w9xw9l 
(5bbd7f41-8124-4add-a960-1bc10d105378)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:28.442Z [[32minfo[39m]: Create 
Group Debug - Phase 1:
      {
        "userId": "5bbd7f41-8124-4add-a960-1bc10d105378"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:28.449Z [[32minfo[39m]: Create 
Group Debug - Phase 4 (Group Created):
      {
        "groupId": "1e9d9241-7f9f-49fc-8756-769511231666"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:28.452Z [[32minfo[39m]: Create 
Group Debug - Phase 5 (Creating Creator Membership)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:28.469Z [[32minfo[39m]: Group 
created successfully
      {
        "userId": "5bbd7f41-8124-4add-a960-1bc10d105378",
        "groupId": "1e9d9241-7f9f-49fc-8756-769511231666",
        "name": "Detail Test Group",
        "groupType": "private",
        "initialMembersCount": 0
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:28] 
[5e5fca8a-db36-4068-810e-7145e347d544] POST /api/groups 
201 - 34ms - POST /api/groups

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:28.484Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442387968w9xw9l 
(5bbd7f41-8124-4add-a960-1bc10d105378)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:28] 
[3c9a84d6-5ace-4336-8d93-8c0cf0c97f61] GET 
/api/groups/1e9d9241-7f9f-49fc-8756-769511231666 200 - 
25ms - GET /api/groups/1e9d9241-7f9f-49fc-8756-769511231666

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      [2025-12-22 23:26:28] 
[8edc1aa4-0ac9-4dde-ad1d-03d7337b3503] GET 
/api/groups/00000000-0000-0000-0000-000000000000 401 - 2ms 
- GET /api/groups/00000000-0000-0000-0000-000000000000

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:29.287Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442388801dvvn8 
(db94fd87-b3d4-46bf-b359-370adf0138fe)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:29] 
[fc672db6-87d5-4cf4-9de6-9ce14d3b41b7] GET 
/api/groups/00000000-0000-0000-0000-000000000000 403 - 9ms 
- GET /api/groups/00000000-0000-0000-0000-000000000000

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:29.782Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442389307esw4s 
(fe3c01b1-7aa5-4954-b6af-376076862dce)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:29.783Z [[32minfo[39m]: Create 
Group Debug - Phase 1:
      {
        "userId": "fe3c01b1-7aa5-4954-b6af-376076862dce"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:29.790Z [[32minfo[39m]: Create 
Group Debug - Phase 4 (Group Created):
      {
        "groupId": "e722f5ac-6ed1-440a-881b-2c89b587bcf9"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:29.793Z [[32minfo[39m]: Create 
Group Debug - Phase 5 (Creating Creator Membership)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:29.808Z [[32minfo[39m]: Group 
created successfully
      {
        "userId": "fe3c01b1-7aa5-4954-b6af-376076862dce",
        "groupId": "e722f5ac-6ed1-440a-881b-2c89b587bcf9",
        "name": "Update Test Group",
        "groupType": "private",
        "initialMembersCount": 0
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:29] 
[033e8925-d686-4fcf-84dc-2993ca202aa9] POST /api/groups 
201 - 32ms - POST /api/groups

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:29.825Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442389307esw4s 
(fe3c01b1-7aa5-4954-b6af-376076862dce)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:29.840Z [[32minfo[39m]: Group 
updated
      {
        "userId": "fe3c01b1-7aa5-4954-b6af-376076862dce",
        "groupId": "e722f5ac-6ed1-440a-881b-2c89b587bcf9",
        "updates": {
          "name": "Updated Name"
        }
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:29] 
[8aa4ce90-0f79-4ef3-a81b-d75133160426] PUT 
/api/groups/e722f5ac-6ed1-440a-881b-2c89b587bcf9 200 - 
32ms - PUT /api/groups/e722f5ac-6ed1-440a-881b-2c89b587bcf9

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      [2025-12-22 23:26:30] 
[e4fbe59f-3f18-4439-8db5-85d0fd039ba7] PUT 
/api/groups/00000000-0000-0000-0000-000000000000 401 - 0ms 
- PUT /api/groups/00000000-0000-0000-0000-000000000000

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:30.595Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442390142nuw6g2 
(d9ee5328-f8c9-465d-ad45-0f65d651ee50)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:30.596Z [[32minfo[39m]: Create 
Group Debug - Phase 1:
      {
        "userId": "d9ee5328-f8c9-465d-ad45-0f65d651ee50"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:30.603Z [[32minfo[39m]: Create 
Group Debug - Phase 4 (Group Created):
      {
        "groupId": "0d855907-9f30-42f0-9392-15bb5aeaa8bb"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:30.607Z [[32minfo[39m]: Create 
Group Debug - Phase 5 (Creating Creator Membership)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:30.621Z [[32minfo[39m]: Group 
created successfully
      {
        "userId": "d9ee5328-f8c9-465d-ad45-0f65d651ee50",
        "groupId": "0d855907-9f30-42f0-9392-15bb5aeaa8bb",
        "name": "Delete Test Group",
        "groupType": "private",
        "initialMembersCount": 0
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:30] 
[e93d4b05-2be7-4e3e-9092-5f097cc755d9] POST /api/groups 
201 - 32ms - POST /api/groups

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:30.634Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442390142nuw6g2 
(d9ee5328-f8c9-465d-ad45-0f65d651ee50)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:30.652Z [[32minfo[39m]: Group 
deleted
      {
        "userId": "d9ee5328-f8c9-465d-ad45-0f65d651ee50",
        "groupId": "0d855907-9f30-42f0-9392-15bb5aeaa8bb",
        "name": "Delete Test Group"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:30] 
[df8ad92c-4198-44f8-874c-485aa50e9328] DELETE 
/api/groups/0d855907-9f30-42f0-9392-15bb5aeaa8bb 200 - 
24ms - DELETE 
/api/groups/0d855907-9f30-42f0-9392-15bb5aeaa8bb

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      [2025-12-22 23:26:30] 
[919273fa-9f83-4916-9135-f6f8b4a4a0b7] DELETE 
/api/groups/00000000-0000-0000-0000-000000000000 401 - 1ms 
- DELETE /api/groups/00000000-0000-0000-0000-000000000000

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:31.406Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442390945ptsa55 
(06c97736-5630-4743-a6f6-5610640b02e3)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:31.407Z [[32minfo[39m]: Create 
Group Debug - Phase 1:
      {
        "userId": "06c97736-5630-4743-a6f6-5610640b02e3"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:31.414Z [[32minfo[39m]: Create 
Group Debug - Phase 4 (Group Created):
      {
        "groupId": "b08ad18a-9946-418b-a99d-5cb943e986a7"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:31.417Z [[32minfo[39m]: Create 
Group Debug - Phase 5 (Creating Creator Membership)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:31.430Z [[32minfo[39m]: Group 
created successfully
      {
        "userId": "06c97736-5630-4743-a6f6-5610640b02e3",
        "groupId": "b08ad18a-9946-418b-a99d-5cb943e986a7",
        "name": "Member Test Group",
        "groupType": "private",
        "initialMembersCount": 0
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:31] 
[ba059ee5-ee8f-4848-9d72-b0610c4483f9] POST /api/groups 
201 - 30ms - POST /api/groups

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:31.879Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442390945ptsa55 
(06c97736-5630-4743-a6f6-5610640b02e3)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:31.914Z [[32minfo[39m]: Group 
member added
      {
        "userId": "06c97736-5630-4743-a6f6-5610640b02e3",
        "groupId": "b08ad18a-9946-418b-a99d-5cb943e986a7",
        "addedMemberId": 
"10728489-350d-4a98-830c-bb1c4448788e",
        "role": "user"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:31] 
[41aef9a7-c1bf-4fd4-a3ff-3c206b6543ac] POST 
/api/groups/b08ad18a-9946-418b-a99d-5cb943e986a7/members 
201 - 41ms - POST 
/api/groups/b08ad18a-9946-418b-a99d-5cb943e986a7/members

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:32.651Z [[32minfo[39m]: 
Authentication successful for user: 
testuser17664423922110j9b8f 
(a70ec8fc-16ba-4dbe-b06b-db4e1a026bb4)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:32.652Z [[32minfo[39m]: Create 
Group Debug - Phase 1:
      {
        "userId": "a70ec8fc-16ba-4dbe-b06b-db4e1a026bb4"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:32.658Z [[32minfo[39m]: Create 
Group Debug - Phase 4 (Group Created):
      {
        "groupId": "128f3367-3fcc-4d6a-abc9-7eeb4fa03e3d"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:32.662Z [[32minfo[39m]: Create 
Group Debug - Phase 5 (Creating Creator Membership)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:32.677Z [[32minfo[39m]: Group 
created successfully
      {
        "userId": "a70ec8fc-16ba-4dbe-b06b-db4e1a026bb4",
        "groupId": "128f3367-3fcc-4d6a-abc9-7eeb4fa03e3d",
        "name": "Member Test Group",
        "groupType": "private",
        "initialMembersCount": 0
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:32] 
[a4a6d23d-c422-464c-954a-5466d4a7cf33] POST /api/groups 
201 - 33ms - POST /api/groups

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:32.697Z [[32minfo[39m]: 
Authentication successful for user: 
testuser17664423922110j9b8f 
(a70ec8fc-16ba-4dbe-b06b-db4e1a026bb4)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:32] 
[303508f1-1c9d-47d7-a74e-7fe72e1b8574] GET 
/api/groups/128f3367-3fcc-4d6a-abc9-7eeb4fa03e3d/members 
200 - 17ms - GET 
/api/groups/128f3367-3fcc-4d6a-abc9-7eeb4fa03e3d/members

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:33.429Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442392980w825vu 
(4f4bba02-35a0-4b81-b8b6-6e936894adc7)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:33.430Z [[32minfo[39m]: Create 
Group Debug - Phase 1:
      {
        "userId": "4f4bba02-35a0-4b81-b8b6-6e936894adc7"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:33.436Z [[32minfo[39m]: Create 
Group Debug - Phase 4 (Group Created):
      {
        "groupId": "c94bb4e7-0225-41fc-81ff-bf5a58461f45"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:33.440Z [[32minfo[39m]: Create 
Group Debug - Phase 5 (Creating Creator Membership)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:33.454Z [[32minfo[39m]: Group 
created successfully
      {
        "userId": "4f4bba02-35a0-4b81-b8b6-6e936894adc7",
        "groupId": "c94bb4e7-0225-41fc-81ff-bf5a58461f45",
        "name": "Member Test Group",
        "groupType": "private",
        "initialMembersCount": 0
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:33] 
[383b6a19-e179-4595-9363-f2549c6dbd77] POST /api/groups 
201 - 30ms - POST /api/groups

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:33.909Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442392980w825vu 
(4f4bba02-35a0-4b81-b8b6-6e936894adc7)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:33.940Z [[32minfo[39m]: Group 
member added
      {
        "userId": "4f4bba02-35a0-4b81-b8b6-6e936894adc7",
        "groupId": "c94bb4e7-0225-41fc-81ff-bf5a58461f45",
        "addedMemberId": 
"51e9fad6-22ea-42b2-8a23-18e6f51d0742",
        "role": "user"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:33] 
[e3ef06c7-485f-41f6-a9aa-d8154a671c9c] POST 
/api/groups/c94bb4e7-0225-41fc-81ff-bf5a58461f45/members 
201 - 37ms - POST 
/api/groups/c94bb4e7-0225-41fc-81ff-bf5a58461f45/members

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:33.952Z [[32minfo[39m]: 
Authentication successful for user: 
testuser1766442392980w825vu 
(4f4bba02-35a0-4b81-b8b6-6e936894adc7)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:33.968Z [[32minfo[39m]: Group 
member removed
      {
        "userId": "4f4bba02-35a0-4b81-b8b6-6e936894adc7",
        "groupId": "c94bb4e7-0225-41fc-81ff-bf5a58461f45",
        "removedMemberId": 
"51e9fad6-22ea-42b2-8a23-18e6f51d0742"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:33] 
[3c537ac3-efd9-4cfe-9c30-baa8b440c142] DELETE /api/groups/c
94bb4e7-0225-41fc-81ff-bf5a58461f45/members/51e9fad6-22ea-4
2b2-8a23-18e6f51d0742 200 - 20ms - DELETE /api/groups/c94bb
4e7-0225-41fc-81ff-bf5a58461f45/members/51e9fad6-22ea-42b2-
8a23-18e6f51d0742

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

::ffff:127.0.0.1 - - [22/Dec/2025:22:26:35 +0000] "POST /api/groups/00000000-0000-0000-0000-000000000000/leave HTTP/1.1" 401 87 "-" "-"
    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      2025-12-22T22:26:35.173Z [[32minfo[39m]: 
Authentication successful for user: 
testuser17664423942682rnzl 
(d08e3f6c-6f42-4e62-8128-8dea90f806e0)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:35.174Z [[32minfo[39m]: Create 
Group Debug - Phase 1:
      {
        "userId": "d08e3f6c-6f42-4e62-8128-8dea90f806e0"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:35.182Z [[32minfo[39m]: Create 
Group Debug - Phase 4 (Group Created):
      {
        "groupId": "835bacfe-1af8-4301-bc10-8457de510eef"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:35.185Z [[32minfo[39m]: Create 
Group Debug - Phase 5 (Creating Creator Membership)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:35.201Z [[32minfo[39m]: Group 
created successfully
      {
        "userId": "d08e3f6c-6f42-4e62-8128-8dea90f806e0",
        "groupId": "835bacfe-1af8-4301-bc10-8457de510eef",
        "name": "Leave Test Group",
        "groupType": "private",
        "initialMembersCount": 0
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:35] 
[dc212251-a2f1-49aa-a36e-33cf5081d981] POST /api/groups 
201 - 33ms - POST /api/groups

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:35.214Z [[32minfo[39m]: 
Authentication successful for user: 
testuser17664423942682rnzl 
(d08e3f6c-6f42-4e62-8128-8dea90f806e0)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:35.249Z [[32minfo[39m]: Group 
member added
      {
        "userId": "d08e3f6c-6f42-4e62-8128-8dea90f806e0",
        "groupId": "835bacfe-1af8-4301-bc10-8457de510eef",
        "addedMemberId": 
"5442028b-e4c4-4ecc-90f5-d1edf1cb17a9",
        "role": "user"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:35] 
[bc5aed32-50c2-4e1f-b385-0b54bdfded01] POST 
/api/groups/835bacfe-1af8-4301-bc10-8457de510eef/members 
201 - 40ms - POST 
/api/groups/835bacfe-1af8-4301-bc10-8457de510eef/members

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:35.261Z [[32minfo[39m]: 
Authentication successful for user: 
testuser17664423947084yowce 
(5442028b-e4c4-4ecc-90f5-d1edf1cb17a9)

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      2025-12-22T22:26:35.277Z [[32minfo[39m]: Group 
member left
      {
        "userId": "5442028b-e4c4-4ecc-90f5-d1edf1cb17a9",
        "groupId": "835bacfe-1af8-4301-bc10-8457de510eef"
      }

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      [2025-12-22 23:26:35] 
[c46bd30c-6991-4871-a8f1-d437a99d244d] POST 
/api/groups/835bacfe-1af8-4301-bc10-8457de510eef/leave 200 
- 21ms - POST 
/api/groups/835bacfe-1af8-4301-bc10-8457de510eef/leave

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

    console.log
      [2025-12-22 23:26:35] 
[6fdb1edb-343d-42b7-ac33-0ab8969e7a8c] POST 
/api/groups/00000000-0000-0000-0000-000000000000/leave 401 
- 1ms - POST 
/api/groups/00000000-0000-0000-0000-000000000000/leave

      at Console.log (node_modules/winston/lib/winston/tran
sports/console.js:87:23)

    console.log
      ≡ƒº╣ Cleaning up test data...

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:253:13)

    console.log
      Γ£à Test data cleanup completed

      at TestDatabaseSeeder.cleanup 
(tests/testDatabaseSeeder.js:302:15)

A worker process has failed to exit gracefully and has 
been force exited. This is likely caused by tests leaking 
due to improper teardown. Try running with 
--detectOpenHandles to find leaks. Active timers can also 
cause this, ensure that .unref() was called on them.

Test Suites: 2 failed, 2 passed, 4 total
Tests:       3 failed, 3 skipped, 54 passed, 60 total
Snapshots:   0 total
Time:        17.236 s
Ran all test suites matching /tests\\contacts.test.js|tests
\\users.test.js|tests\\groups.test.js|tests\\files.test.js/
i.
Force exiting Jest: Have you considered using 
`--detectOpenHandles` to detect async operations that kept 
running after all tests finished?
