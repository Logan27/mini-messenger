# STUN/TURN server configuration for Messenger
# Supports both STUN (NAT discovery) and TURN (relay fallback)

# Listening ports
listening-port=3478
tls-listening-port=5349
alt-listening-port=3479
alt-tls-listening-port=5350

# Relay ports range (for media relay)
min-port=49152
max-port=49252

# Use long-term credentials with shared secret (TURN REST API compatible)
# Credentials are time-limited and generated by the backend
lt-cred-mech
use-auth-secret
static-auth-secret=messenger_turn_secret_change_in_production

# Realm for the TURN server (should match your domain)
realm=messenger.local

# Fingerprint for STUN/TURN messages
fingerprint

# Log configuration
log-file=/var/log/turnserver.log
simple-log

# Disable CLI (not needed in container)
no-cli

# Disable TLS for development (enable in production with proper certs)
# In production: remove these lines and add cert/pkey paths
no-tls
no-dtls

# Verbose logging (set to false in production)
verbose

# Deny loopback peers (security)
no-loopback-peers

# Deny multicast peers (security)
no-multicast-peers

# Quota settings for 100 users
total-quota=100
user-quota=10
max-bps=1000000

# Stale nonce expiration (10 minutes)
stale-nonce=600

# Allow peers on internal networks (needed for Docker)
# Remove in production if not needed
allowed-peer-ip=10.0.0.0-10.255.255.255
allowed-peer-ip=172.16.0.0-172.31.255.255
allowed-peer-ip=192.168.0.0-192.168.255.255
