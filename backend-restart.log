
> messenger-backend@1.0.0 dev
> nodemon src/server.js

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): src\**\*[39m
[33m[nodemon] watching extensions: js,json[39m
[32m[nodemon] starting `node src/server.js`[39m
âœ… Sequelize instance created for development environment
2025-10-21T13:42:04.779Z [[32minfo[39m]: Notification settings cache cleanup initialized
2025-10-21T13:42:04.781Z [[32minfo[39m]: Auto cleanup for expired notifications started
2025-10-21T13:42:05.017Z [[32minfo[39m]: Data retention job scheduled.
ðŸ“š Swagger UI will be available at /api-docs
ðŸ”§ Starting server initialization...
ðŸ“ Initializing logger...
âœ… Logger initialized
ðŸ’¾ Initializing database...
Executing (default): SELECT 1
âœ… Database connection established successfully.
âš ï¸  Database sync disabled (models have naming inconsistencies)
âœ… Database initialized
ðŸ”´ Initializing Redis...
âœ… Redis connection established successfully
âœ… Redis initialized
ðŸ“¦ Loading app.js...
ðŸ“¦ App.js loaded, initializing services...
2025-10-21T13:42:05.136Z [[32minfo[39m]: Upload directories created successfully
{
  "uploadDir": "./uploads",
  "tempDir": "./uploads/temp"
}
2025-10-21T13:42:05.136Z [[33mwarn[39m]: âš ï¸  ClamAV not available on Windows - virus scanning disabled for development
2025-10-21T13:42:05.137Z [[32minfo[39m]: File upload service initialized successfully
âœ… File upload service initialized
2025-10-21T13:42:05.137Z [[33mwarn[39m]: âš ï¸  Virus update service skipped on Windows (ClamAV not available)
2025-10-21T13:42:05.140Z [[32minfo[39m]: Generated fallback icon for document:
2025-10-21T13:42:05.142Z [[32minfo[39m]: Generated fallback icon for video:
2025-10-21T13:42:05.145Z [[32minfo[39m]: Generated fallback icon for audio:
2025-10-21T13:42:05.147Z [[32minfo[39m]: Generated fallback icon for archive:
2025-10-21T13:42:05.149Z [[32minfo[39m]: Generated fallback icon for code:
2025-10-21T13:42:05.150Z [[32minfo[39m]: Generated fallback icon for default:
2025-10-21T13:42:05.160Z [[32minfo[39m]: Daily thumbnail cleanup scheduled for 2:00 AM
2025-10-21T13:42:05.160Z [[32minfo[39m]: Thumbnail service initialized successfully
2025-10-21T13:42:05.163Z [[32minfo[39m]: File cleanup jobs scheduled
2025-10-21T13:42:05.163Z [[32minfo[39m]: File cleanup service initialized successfully
âœ… Services initialized
ðŸš€ Creating server...
ðŸš€ =====================================
ðŸš€ Messenger Backend Server
ðŸš€ =====================================
ðŸ“ Environment: development
ðŸŒ Server: http://0.0.0.0:4000
ðŸ“š API Docs: http://localhost:4000/api-docs
ðŸ¥ Health: http://localhost:4000/health
â±ï¸  Started at: 2025-10-21T13:42:05.165Z
ðŸš€ =====================================

ðŸ”§ Development Mode Features:
  â€¢ Hot reload enabled
  â€¢ Detailed error messages
  â€¢ Request logging enabled
  â€¢ CORS configured for local development
ðŸš€ =====================================
ðŸš€ Server running on 0.0.0.0:4000
ðŸ“š API Documentation available at http://localhost:4000/api-docs
ðŸ¥ Health check available at http://localhost:4000/health
âœ… Message service initialized
ðŸ“¡ WebSocket server initialized with Redis adapter for scaling
âœ… WebSocket service initialized successfully
Executing (default): SELECT 1
[2025-10-21 15:42:14] [8da16348-dfc3-414e-9a05-33261f6c2907] GET /health 200 - 14ms - GET /health
[0mGET /health [32m200[0m 12.104 ms - 769[0m
Executing (default): SELECT 1
[2025-10-21 15:42:31] [bdd316e6-11ab-46fc-a11b-a378f667d374] GET /health 200 - 6ms - GET /health
[0mGET /health [32m200[0m 5.546 ms - 769[0m
Executing (default): SELECT 1
Executing (default): SELECT count(*) AS "count" FROM "messages" AS "Message" WHERE ("Message"."deletedAt" IS NULL AND "Message"."status" = 'pending');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
[2025-10-21 15:42:31] [3c8bd224-0bb5-4dc0-a462-e981a637f74a] GET /health/detailed 200 - 304ms - GET /health/detailed
[0mGET /health/detailed [32m200[0m 303.022 ms - 2253[0m
Executing (default): SELECT 1
[2025-10-21 15:42:32] [dc8cfe5d-9b3f-4491-849e-ee623d4f911e] GET /health/ready 200 - 4ms - GET /health/ready
[0mGET /health/ready [32m200[0m 3.924 ms - 238[0m
[2025-10-21 15:42:32] [d3deaf41-5882-4bba-b8b6-9bb81e340834] GET /health/live 200 - 1ms - GET /health/live
[0mGET /health/live [32m200[0m 0.964 ms - 77[0m
[2025-10-21 15:42:33] [e19325a6-d253-4ed1-9dd9-f73d8cfd5134] POST /api/auth/register 400 - 5ms - POST /api/auth/register
[0mPOST /api/auth/register [33m400[0m 4.701 ms - 328[0m
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND ("User"."email" = 'testuser1' OR "User"."username" = 'testuser1')) LIMIT 1;
Executing (default): UPDATE "users" SET "lastLoginAt"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): INSERT INTO "sessions" ("id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9) RETURNING "id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt";
2025-10-21T13:42:34.273Z [[31merror[39m]: Failed to store session in Redis: Connection in subscriber mode, only subscriber commands may be used
{
  "stack": "Error: Connection in subscriber mode, only subscriber commands may be used\n    at EventEmitter.sendCommand (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\Redis.js:338:28)\n    at EventEmitter.setex (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\utils\\Commander.js:90:25)\n    at AuthController.storeSessionInRedis (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:704:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:214:7)"
}
2025-10-21T13:42:34.274Z [[32minfo[39m]: User logged in: testuser1 (user1@test.com)
[2025-10-21 15:42:34] [97756803-2268-468b-9795-5d67c397a987] POST /api/auth/login 200 - 426ms - POST /api/auth/login
[0mPOST /api/auth/login [32m200[0m 426.174 ms - 1198[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:36.029 +00:00';
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
2025-10-21T13:42:36.458Z [[32minfo[39m]: Authentication successful for user: testuser1 (6ee36bd6-22d5-4798-92a2-7d4d2ff49768)
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
[2025-10-21 15:42:36] [f9e00727-adb7-4729-bc9c-696ad138d83c] GET /api/auth/me 200 - 437ms - GET /api/auth/me
[0mGET /api/auth/me [32m200[0m 435.937 ms - 539[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."refreshToken" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsInR5cGUiOiJyZWZyZXNoIiwiaWF0IjoxNzYxMDU0MTU0LCJleHAiOjE3NjM2NDYxNTQsImF1ZCI6Im1lc3Nlbmdlci11c2VycyIsImlzcyI6Im1lc3Nlbmdlci1iYWNrZW5kIiwic3ViIjoiNmVlMzZiZDYtMjJkNS00Nzk4LTkyYTItN2Q0ZDJmZjQ5NzY4In0.WybaRNHQOS3X8xsRQMzTbH6ljI0W3vOW7mDDWjMXdOo' AND "Session"."expiresAt" > '2025-10-21 13:42:36.766 +00:00';
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
Executing (default): UPDATE "sessions" SET "token"=$1,"refreshToken"=$2,"lastAccessedAt"=$3 WHERE "id" = $4
2025-10-21T13:42:36.780Z [[31merror[39m]: Failed to store session in Redis: Connection in subscriber mode, only subscriber commands may be used
{
  "stack": "Error: Connection in subscriber mode, only subscriber commands may be used\n    at EventEmitter.sendCommand (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\Redis.js:338:28)\n    at EventEmitter.setex (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\utils\\Commander.js:90:25)\n    at AuthController.storeSessionInRedis (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:704:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async refreshToken (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:319:9)"
}
2025-10-21T13:42:36.780Z [[32minfo[39m]: Token refreshed for user: testuser1
[2025-10-21 15:42:36] [9a4c5f55-1bba-42de-b253-0c56838d4ead] POST /api/auth/refresh 200 - 15ms - POST /api/auth/refresh
[0mPOST /api/auth/refresh [32m200[0m 15.046 ms - 976[0m
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."email" = 'testuser1@test.com');
[2025-10-21 15:42:37] [4acc9813-3e74-49f4-bff8-a6df97093ff6] POST /api/auth/forgot-password 200 - 4ms - POST /api/auth/forgot-password
[0mPOST /api/auth/forgot-password [32m200[0m 3.725 ms - 103[0m
[2025-10-21 15:42:39] [d0d67841-296a-4adc-a8e8-d9232c1ebd7a] POST /api/auth/verify-email 404 - 1ms - POST /api/auth/verify-email
[0mPOST /api/auth/verify-email [33m404[0m 0.616 ms - 62[0m
[2025-10-21 15:42:40] [1758ebf5-7e27-48e2-ae89-a08945bffb3a] POST /api/auth/reset-password 400 - 1ms - POST /api/auth/reset-password
[0mPOST /api/auth/reset-password [33m400[0m 1.207 ms - 370[0m
[2025-10-21 15:42:40] [876045eb-88b8-4104-bd25-f86fad4ac1ca] POST /api/auth/change-password 404 - 0ms - POST /api/auth/change-password
[0mPOST /api/auth/change-password [33m404[0m 0.511 ms - 65[0m
[2025-10-21 15:42:42] [3f750956-c002-4d56-a81e-b1ff5447485e] POST /api/auth/resend-verification 404 - 0ms - POST /api/auth/resend-verification
[0mPOST /api/auth/resend-verification [33m404[0m 0.444 ms - 69[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:42.365 +00:00';
[2025-10-21 15:42:42] [ab02b245-1227-4029-9305-6d293f71d7a0] GET /api/users/me 401 - 4ms - GET /api/users/me
[0mGET /api/users/me [33m401[0m 3.623 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:42.648 +00:00';
[2025-10-21 15:42:42] [57fdcdfa-0634-4106-8b7f-78e3b7449446] PUT /api/users/me 401 - 4ms - PUT /api/users/me
[0mPUT /api/users/me [33m401[0m 4.291 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:42.937 +00:00';
[2025-10-21 15:42:42] [c9ea7601-9857-4ca9-8fa7-2733dee91d1e] GET /api/users/search?q=test 401 - 3ms - GET /api/users/search?q=test
[0mGET /api/users/search?q=test [33m401[0m 3.277 ms - 98[0m
Executing (default): SELECT count(*) AS "count" FROM "users" AS "User" WHERE "User"."deletedAt" IS NULL;
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE "User"."deletedAt" IS NULL ORDER BY "User"."createdAt" DESC LIMIT 10 OFFSET 0;
[2025-10-21 15:42:43] [d0771e5d-931a-4f9e-9840-da8dc73d7874] undefined undefined undefined - undefinedms - Users list retrieved successfully
[2025-10-21 15:42:43] [d0771e5d-931a-4f9e-9840-da8dc73d7874] GET /api/users?page=1&limit=10 200 - 10ms - GET /api/users?page=1&limit=10
[0mGET /api/users?page=1&limit=10 [32m200[0m 10.104 ms - 5340[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:43.492 +00:00';
[2025-10-21 15:42:43] [9a06a2f2-d11d-4e57-99b4-f004a0ce7434] POST /api/users/me/avatar 401 - 11ms - POST /api/users/me/avatar
[0mPOST /api/users/me/avatar [33m401[0m 9.801 ms - 98[0m
[2025-10-21 15:42:44] [282eccd0-3286-4551-817c-bad51c5b0d58] POST /api/auth/register 400 - 1ms - POST /api/auth/register
[0mPOST /api/auth/register [33m400[0m 0.767 ms - 328[0m
[2025-10-21 15:42:45] [023f77b3-18fc-4555-bb4b-72ea3d26861f] POST /api/auth/login 400 - 2ms - POST /api/auth/login
[0mPOST /api/auth/login [33m400[0m 1.396 ms - 180[0m
[2025-10-21 15:42:46] [5eaa5203-6509-4537-a2b9-18cf5e5c01d5] DELETE /api/users/me 401 - 0ms - DELETE /api/users/me
[0mDELETE /api/users/me [33m401[0m 0.660 ms - 87[0m
[2025-10-21 15:42:46] [15d8eda2-920f-4b6a-b5c0-0c73d4f1b449] POST /api/users/me/device-token 404 - 0ms - POST /api/users/me/device-token
[0mPOST /api/users/me/device-token [33m404[0m 0.452 ms - 66[0m
[2025-10-21 15:42:46] [33ea35c0-7d83-4b02-80c4-57387a89a4ca] DELETE /api/users/me/device-token 404 - 1ms - DELETE /api/users/me/device-token
[0mDELETE /api/users/me/device-token [33m404[0m 0.425 ms - 66[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:47.039 +00:00';
[2025-10-21 15:42:47] [885c4fb9-b6e9-43c3-b261-b1f1a91502ab] GET /api/users/me/export 401 - 4ms - GET /api/users/me/export
[0mGET /api/users/me/export [33m401[0m 4.190 ms - 98[0m
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
[2025-10-21 15:42:47] [9adca093-348b-40eb-b222-6e170b7b5759] undefined undefined undefined - undefinedms - User retrieved successfully
[2025-10-21 15:42:47] [9adca093-348b-40eb-b222-6e170b7b5759] GET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 200 - 7ms - GET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [32m200[0m 7.330 ms - 530[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:47.615 +00:00';
[2025-10-21 15:42:47] [fc826613-17f8-4d79-b2e1-5df03a0401b2] POST /api/messages 401 - 3ms - POST /api/messages
[0mPOST /api/messages [33m401[0m 2.985 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:47.881 +00:00';
[2025-10-21 15:42:47] [bd61830d-c680-47c9-93ec-56bd94f6b1e0] GET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768 401 - 4ms - GET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [33m401[0m 3.411 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:48.151 +00:00';
[2025-10-21 15:42:48] [d38127f5-9006-47bf-b881-4a15f13f5bb6] GET /api/messages/search?q=test 401 - 5ms - GET /api/messages/search?q=test
[0mGET /api/messages/search?q=test [33m401[0m 4.208 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:48.424 +00:00';
[2025-10-21 15:42:48] [10bc5a16-2630-4b8d-a60b-ec039faa688f] GET /api/messages/conversations 401 - 4ms - GET /api/messages/conversations
[0mGET /api/messages/conversations [33m401[0m 3.164 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:48.730 +00:00';
[2025-10-21 15:42:48] [0b288b2e-0d08-4757-9f9c-177278e7b757] GET /api/contacts 401 - 3ms - GET /api/contacts
[0mGET /api/contacts [33m401[0m 3.191 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:49.007 +00:00';
[2025-10-21 15:42:49] [6026ad7d-8669-4d0f-bca4-b3ecf97e5784] GET /api/contacts/search?q=test 401 - 3ms - GET /api/contacts/search?q=test
[0mGET /api/contacts/search?q=test [33m401[0m 2.836 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:49.296 +00:00';
[2025-10-21 15:42:49] [b4be6027-d01f-4e08-aa24-139d6c4db6b9] POST /api/contacts 401 - 3ms - POST /api/contacts
[0mPOST /api/contacts [33m401[0m 3.086 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:49.571 +00:00';
[2025-10-21 15:42:49] [0beccfbd-6059-46c9-a5ae-fba2ff49db5d] POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block 401 - 3ms - POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block
[0mPOST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block [33m401[0m 2.923 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:49.845 +00:00';
[2025-10-21 15:42:49] [f5cb1f13-6712-466a-a36a-39ce2836f7a6] POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock 401 - 5ms - POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock
[0mPOST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock [33m401[0m 4.436 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:50.177 +00:00';
[2025-10-21 15:42:50] [84221174-efeb-4901-95ed-89eb2ba6fb4b] GET /api/groups 401 - 3ms - GET /api/groups
[0mGET /api/groups [33m401[0m 2.873 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:50.442 +00:00';
[2025-10-21 15:42:50] [4b7e83c8-66de-478f-a2ab-b482b8e8467f] POST /api/groups 401 - 3ms - POST /api/groups
[0mPOST /api/groups [33m401[0m 3.119 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:50.756 +00:00';
[2025-10-21 15:42:50] [8307c181-6bc4-4ac0-8719-c4e561f17ba0] POST /api/calls 401 - 3ms - POST /api/calls
[0mPOST /api/calls [33m401[0m 2.924 ms - 98[0m
[2025-10-21 15:42:51] [6e8edda4-0aea-431c-a14b-9464c5640897] POST /api/calls/dummy-call-id/respond 404 - 1ms - POST /api/calls/dummy-call-id/respond
[0mPOST /api/calls/dummy-call-id/respond [33m404[0m 0.394 ms - 72[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:51.303 +00:00';
[2025-10-21 15:42:51] [a7bca9cc-8948-48b8-8283-7e084452b061] GET /api/calls/dummy-call-id 401 - 3ms - GET /api/calls/dummy-call-id
[0mGET /api/calls/dummy-call-id [33m401[0m 3.132 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:51.568 +00:00';
[2025-10-21 15:42:51] [436ec353-2203-495f-9269-bcb622622fb6] POST /api/calls/dummy-call-id/end 401 - 3ms - POST /api/calls/dummy-call-id/end
[0mPOST /api/calls/dummy-call-id/end [33m401[0m 3.212 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:51.841 +00:00';
[2025-10-21 15:42:51] [da2852a1-3297-43b9-a03a-d8cc25a9b9cd] GET /api/files 401 - 2ms - GET /api/files
[0mGET /api/files [33m401[0m 2.664 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:52.105 +00:00';
[2025-10-21 15:42:52] [159498c9-6818-4029-82a1-0af8601fa32c] POST /api/files/upload 401 - 5ms - POST /api/files/upload
[0mPOST /api/files/upload [33m401[0m 4.504 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:52.418 +00:00';
[2025-10-21 15:42:52] [ee90b1b4-7dd7-47ba-99b3-4529ac55d16e] POST /api/encryption/keypair 401 - 4ms - POST /api/encryption/keypair
[0mPOST /api/encryption/keypair [33m401[0m 3.879 ms - 98[0m
[2025-10-21 15:42:52] [f34d414a-f640-442a-9ad8-38f930efadae] GET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 404 - 0ms - GET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [33m404[0m 0.591 ms - 102[0m
[2025-10-21 15:42:53] [5483b796-598c-497c-b6db-f8af90d32ee4] POST /api/encryption/publickeys/batch 404 - 1ms - POST /api/encryption/publickeys/batch
[0mPOST /api/encryption/publickeys/batch [33m404[0m 0.465 ms - 72[0m
[2025-10-21 15:42:53] [31854766-873e-4660-a566-7a7325d3f1e2] PUT /api/encryption/keypair 404 - 0ms - PUT /api/encryption/keypair
[0mPUT /api/encryption/keypair [33m404[0m 0.311 ms - 63[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:53.556 +00:00';
[2025-10-21 15:42:53] [e4a73293-89b0-4855-a0ac-03da34c373c5] GET /api/notifications 401 - 3ms - GET /api/notifications
[0mGET /api/notifications [33m401[0m 2.711 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:53.817 +00:00';
[2025-10-21 15:42:53] [955862cc-7c08-4b62-9b05-397971a91192] GET /api/notifications/unread-count 401 - 4ms - GET /api/notifications/unread-count
[0mGET /api/notifications/unread-count [33m401[0m 3.649 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:54.097 +00:00';
[2025-10-21 15:42:54] [17849824-69b7-46fb-a469-e746a3670207] PUT /api/notifications/mark-all-read 401 - 4ms - PUT /api/notifications/mark-all-read
[0mPUT /api/notifications/mark-all-read [33m401[0m 2.916 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:54.386 +00:00';
[2025-10-21 15:42:54] [816879af-d8db-4869-a219-c0722a0cda38] GET /api/notification-settings 401 - 4ms - GET /api/notification-settings
[0mGET /api/notification-settings [33m401[0m 3.504 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:54.676 +00:00';
[2025-10-21 15:42:54] [1777e561-7e54-4dfa-bd93-6fe1be434274] PUT /api/notification-settings 401 - 2ms - PUT /api/notification-settings
[0mPUT /api/notification-settings [33m401[0m 2.670 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:54.939 +00:00';
[2025-10-21 15:42:54] [ae652e2e-7894-4647-b78c-b1cb4d5d71f9] POST /api/notification-settings/reset 401 - 3ms - POST /api/notification-settings/reset
[0mPOST /api/notification-settings/reset [33m401[0m 3.023 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:55.208 +00:00';
[2025-10-21 15:42:55] [e90aa999-f6a8-44e8-9bcb-f65a1ec4923d] GET /api/notification-settings/preview 401 - 3ms - GET /api/notification-settings/preview
[0mGET /api/notification-settings/preview [33m401[0m 2.744 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q' AND "Session"."expiresAt" > '2025-10-21 13:42:55.486 +00:00';
[2025-10-21 15:42:55] [25fc9ef6-d78b-485c-9c3d-4002439955f5] GET /api/announcements 401 - 4ms - GET /api/announcements
[0mGET /api/announcements [33m401[0m 3.834 ms - 98[0m
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND ("User"."email" = 'admin' OR "User"."username" = 'admin')) LIMIT 1;
Executing (default): UPDATE "users" SET "lastLoginAt"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): INSERT INTO "sessions" ("id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9) RETURNING "id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt";
2025-10-21T13:42:56.570Z [[31merror[39m]: Failed to store session in Redis: Connection in subscriber mode, only subscriber commands may be used
{
  "stack": "Error: Connection in subscriber mode, only subscriber commands may be used\n    at EventEmitter.sendCommand (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\Redis.js:338:28)\n    at EventEmitter.setex (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\utils\\Commander.js:90:25)\n    at AuthController.storeSessionInRedis (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:704:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:214:7)"
}
2025-10-21T13:42:56.570Z [[32minfo[39m]: User logged in: admin (admin@messenger.local)
[2025-10-21 15:42:56] [9caf3a3f-d422-4107-a1d6-e711e691da19] POST /api/auth/login 200 - 376ms - POST /api/auth/login
[0mPOST /api/auth/login [32m200[0m 375.040 ms - 1207[0m
[2025-10-21 15:42:57] [bbd64f85-18a9-4d63-ad62-f01f8f01c04d] GET /api/admin/stats 401 - 1ms - GET /api/admin/stats
[0mGET /api/admin/stats [33m401[0m 0.426 ms - 99[0m
[2025-10-21 15:42:58] [ed01215a-65b3-46aa-b3e7-4aa4e07e4318] GET /api/admin/users/pending 401 - 1ms - GET /api/admin/users/pending
[0mGET /api/admin/users/pending [33m401[0m 0.480 ms - 99[0m
[2025-10-21 15:42:58] [56137fca-6648-4c9f-a3a1-f9212ef13106] GET /api/admin/users?page=1&limit=10 401 - 0ms - GET /api/admin/users?page=1&limit=10
[0mGET /api/admin/users?page=1&limit=10 [33m401[0m 0.365 ms - 99[0m
[2025-10-21 15:42:58] [99247662-0c88-4e8d-a258-6ab5f5cea2a3] GET /api/admin/audit-logs?page=1&limit=10 401 - 0ms - GET /api/admin/audit-logs?page=1&limit=10
[0mGET /api/admin/audit-logs?page=1&limit=10 [33m401[0m 0.325 ms - 99[0m
[2025-10-21 15:42:58] [8724028d-58cc-4bab-87f0-c502eb7ae4b7] GET /api/admin/reports?page=1&limit=10 401 - 1ms - GET /api/admin/reports?page=1&limit=10
[0mGET /api/admin/reports?page=1&limit=10 [33m401[0m 0.854 ms - 99[0m
[2025-10-21 15:42:59] [90ec0dc4-98ea-4de6-99b6-206d5c015ce6] GET /api/admin/settings 401 - 1ms - GET /api/admin/settings
[0mGET /api/admin/settings [33m401[0m 0.372 ms - 99[0m
[2025-10-21 15:42:59] [03cc8e0b-e11f-4c3e-a9f2-d8d95d1bd26f] GET /api/admin/announcements 401 - 1ms - GET /api/admin/announcements
[0mGET /api/admin/announcements [33m401[0m 0.416 ms - 99[0m
[2025-10-21 15:42:59] [86d46dbc-a331-42ef-bcc2-4d50eadb3eb1] GET /api/admin/monitoring 401 - 0ms - GET /api/admin/monitoring
[0mGET /api/admin/monitoring [33m401[0m 0.334 ms - 99[0m
[2025-10-21 15:43:00] [b902990c-f64d-42d8-b606-5567f53ea5c8] POST /api/admin/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/approve 401 - 1ms - POST /api/admin/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/approve
[0mPOST /api/admin/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/approve [33m401[0m 0.518 ms - 99[0m
Executing (default): DELETE FROM "sessions" WHERE "token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDE1NCwiZXhwIjoxNzYxNjU4OTU0LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.oQYenvNteSA3SFejo6Nn4ct2sqzeVozrF2TUu2Wnb1Q'
2025-10-21T13:43:00.289Z [[31merror[39m]: Logout error: Cannot read properties of undefined (reading 'removeSessionFromRedis')
{
  "stack": "TypeError: Cannot read properties of undefined (reading 'removeSessionFromRedis')\n    at logout (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:365:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
[2025-10-21 15:43:00] [7876ff6e-af7e-4918-a89a-bcd4455d7cba] POST /api/auth/logout 200 - 4ms - POST /api/auth/logout
[0mPOST /api/auth/logout [32m200[0m 3.546 ms - 46[0m
Executing (default): DELETE FROM "sessions" WHERE "token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI3N2I2NjNlMC1hNGI2LTRlMzYtYWMxOC1jMzdhYWY2MTUxNjIiLCJ1c2VybmFtZSI6ImFkbWluIiwiZW1haWwiOiJhZG1pbkBtZXNzZW5nZXIubG9jYWwiLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NjEwNTQxNzYsImV4cCI6MTc2MTY1ODk3NiwiYXVkIjoibWVzc2VuZ2VyLXVzZXJzIiwiaXNzIjoibWVzc2VuZ2VyLWJhY2tlbmQiLCJzdWIiOiI3N2I2NjNlMC1hNGI2LTRlMzYtYWMxOC1jMzdhYWY2MTUxNjIifQ.B4fKp5OOtU2HHzzQA9Z7CnG4PP8Uc-HFkQU0x0VoIuI'
2025-10-21T13:43:00.571Z [[31merror[39m]: Logout error: Cannot read properties of undefined (reading 'removeSessionFromRedis')
{
  "stack": "TypeError: Cannot read properties of undefined (reading 'removeSessionFromRedis')\n    at logout (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:365:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
[2025-10-21 15:43:00] [8954cc98-a839-410e-9c58-076a11eb05d8] POST /api/auth/logout 200 - 6ms - POST /api/auth/logout
[0mPOST /api/auth/logout [32m200[0m 5.118 ms - 46[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1MjE5OSwiZXhwIjoxNzYxNjU2OTk5LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.f-q6CXNgpMTAR8FjbdXx0aktObETcTfOXHkBHXP9w7c' AND "Session"."expiresAt" > '2025-10-21 13:43:16.797 +00:00';
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
2025-10-21T13:43:16.810Z [[32minfo[39m]: Authentication successful for user: testuser1 (6ee36bd6-22d5-4798-92a2-7d4d2ff49768)
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
[2025-10-21 15:43:16] [0aaf0afe-354d-4600-9c59-59d34912446d] undefined undefined undefined - undefinedms - User profile retrieved successfully
[2025-10-21 15:43:16] [0aaf0afe-354d-4600-9c59-59d34912446d] GET /api/users/me 200 - 18ms - GET /api/users/me
[0mGET /api/users/me [32m200[0m 17.699 ms - 530[0m
Executing (default): SELECT 1
[2025-10-21 15:44:36] [ed28c3f7-9ed0-4f0e-b835-41bd53a64535] GET /health 200 - 6ms - GET /health
[0mGET /health [32m200[0m 5.229 ms - 770[0m
Executing (default): SELECT 1
Executing (default): SELECT count(*) AS "count" FROM "messages" AS "Message" WHERE ("Message"."deletedAt" IS NULL AND "Message"."status" = 'pending');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
Executing (default): SELECT count(*) AS "count" FROM "files" AS "File" WHERE ("File"."deletedAt" IS NULL AND "File"."createdAt" >= '2025-10-20 22:00:00.000 +00:00');
[2025-10-21 15:44:36] [207d7e81-2d62-4771-9a48-5a35058ec992] GET /health/detailed 200 - 298ms - GET /health/detailed
[0mGET /health/detailed [32m200[0m 297.633 ms - 2255[0m
Executing (default): SELECT 1
[2025-10-21 15:44:37] [15d7c13a-f026-4bdb-92b5-5d4161bd3365] GET /health/ready 200 - 4ms - GET /health/ready
[0mGET /health/ready [32m200[0m 3.770 ms - 238[0m
[2025-10-21 15:44:37] [24e08af2-e96d-4b43-a619-b60bec0ad6b5] GET /health/live 200 - 1ms - GET /health/live
[0mGET /health/live [32m200[0m 0.458 ms - 78[0m
[2025-10-21 15:44:38] [4a1cc62b-9e31-4b31-88ab-8b3194580543] POST /api/auth/register 400 - 2ms - POST /api/auth/register
[0mPOST /api/auth/register [33m400[0m 1.756 ms - 328[0m
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND ("User"."email" = 'testuser1' OR "User"."username" = 'testuser1')) LIMIT 1;
Executing (default): UPDATE "users" SET "lastLoginAt"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): INSERT INTO "sessions" ("id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9) RETURNING "id","userId","token","refreshToken","ipAddress","userAgent","expiresAt","createdAt","lastAccessedAt";
2025-10-21T13:44:39.229Z [[31merror[39m]: Failed to store session in Redis: Connection in subscriber mode, only subscriber commands may be used
{
  "stack": "Error: Connection in subscriber mode, only subscriber commands may be used\n    at EventEmitter.sendCommand (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\Redis.js:338:28)\n    at EventEmitter.setex (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\utils\\Commander.js:90:25)\n    at AuthController.storeSessionInRedis (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:704:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:214:7)"
}
2025-10-21T13:44:39.229Z [[32minfo[39m]: User logged in: testuser1 (user1@test.com)
[2025-10-21 15:44:39] [e139b985-3fdf-4da2-b1f0-ac67d28497f6] POST /api/auth/login 200 - 389ms - POST /api/auth/login
[0mPOST /api/auth/login [32m200[0m 389.349 ms - 1198[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDI3OSwiZXhwIjoxNzYxNjU5MDc5LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.Pkq0vIA6EtvzF8O5Ny79z0dInjKxMoH2oCTu-VjWduQ' AND "Session"."expiresAt" > '2025-10-21 13:44:41.056 +00:00';
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
2025-10-21T13:44:41.069Z [[32minfo[39m]: Authentication successful for user: testuser1 (6ee36bd6-22d5-4798-92a2-7d4d2ff49768)
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
[2025-10-21 15:44:41] [745aa262-5f63-440a-b01e-20539bda59de] GET /api/auth/me 200 - 17ms - GET /api/auth/me
[0mGET /api/auth/me [32m200[0m 16.673 ms - 539[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."refreshToken" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsInR5cGUiOiJyZWZyZXNoIiwiaWF0IjoxNzYxMDU0Mjc5LCJleHAiOjE3NjM2NDYyNzksImF1ZCI6Im1lc3Nlbmdlci11c2VycyIsImlzcyI6Im1lc3Nlbmdlci1iYWNrZW5kIiwic3ViIjoiNmVlMzZiZDYtMjJkNS00Nzk4LTkyYTItN2Q0ZDJmZjQ5NzY4In0.KsPbwdgT_pwpoC6-swJt8QbJg8u6-WYQqEv6kKFJk-Y' AND "Session"."expiresAt" > '2025-10-21 13:44:41.342 +00:00';
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
Executing (default): UPDATE "sessions" SET "token"=$1,"refreshToken"=$2,"lastAccessedAt"=$3 WHERE "id" = $4
2025-10-21T13:44:41.355Z [[31merror[39m]: Failed to store session in Redis: Connection in subscriber mode, only subscriber commands may be used
{
  "stack": "Error: Connection in subscriber mode, only subscriber commands may be used\n    at EventEmitter.sendCommand (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\Redis.js:338:28)\n    at EventEmitter.setex (C:\\Users\\anton\\Documents\\messenger\\backend\\node_modules\\ioredis\\built\\utils\\Commander.js:90:25)\n    at AuthController.storeSessionInRedis (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:704:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async refreshToken (file:///C:/Users/anton/Documents/messenger/backend/src/controllers/authController.js:319:9)"
}
2025-10-21T13:44:41.355Z [[32minfo[39m]: Token refreshed for user: testuser1
[2025-10-21 15:44:41] [46c16a72-10c6-45f1-b8cd-43ff9e091d87] POST /api/auth/refresh 200 - 14ms - POST /api/auth/refresh
[0mPOST /api/auth/refresh [32m200[0m 13.728 ms - 976[0m
Executing (default): SELECT "id", "username", "email", "passwordHash", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "emailVerificationToken", "passwordResetToken", "passwordResetExpires", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."email" = 'testuser1@test.com');
[2025-10-21 15:44:42] [77fa8713-c168-4b1d-a0f5-6a3704bd9bcd] POST /api/auth/forgot-password 200 - 3ms - POST /api/auth/forgot-password
[0mPOST /api/auth/forgot-password [32m200[0m 3.411 ms - 103[0m
[2025-10-21 15:44:44] [ce0864f3-fd9c-45aa-b80c-c68a16e3baad] POST /api/auth/verify-email 404 - 0ms - POST /api/auth/verify-email
[0mPOST /api/auth/verify-email [33m404[0m 0.342 ms - 62[0m
[2025-10-21 15:44:44] [21bea7e4-ded8-45a9-80cb-e3321705d864] POST /api/auth/reset-password 400 - 1ms - POST /api/auth/reset-password
[0mPOST /api/auth/reset-password [33m400[0m 0.893 ms - 370[0m
[2025-10-21 15:44:44] [1e1b9a18-10bf-4e87-8155-c14699f3c7dd] POST /api/auth/change-password 404 - 1ms - POST /api/auth/change-password
[0mPOST /api/auth/change-password [33m404[0m 0.442 ms - 65[0m
[2025-10-21 15:44:47] [43515ac2-dfe4-4330-8cc7-1fc0239f24e3] POST /api/auth/resend-verification 404 - 0ms - POST /api/auth/resend-verification
[0mPOST /api/auth/resend-verification [33m404[0m 0.322 ms - 69[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDI3OSwiZXhwIjoxNzYxNjU5MDc5LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.Pkq0vIA6EtvzF8O5Ny79z0dInjKxMoH2oCTu-VjWduQ' AND "Session"."expiresAt" > '2025-10-21 13:44:47.541 +00:00';
[2025-10-21 15:44:47] [8f23cf82-c36d-4ccb-8ec3-3755e175b57c] GET /api/users/me 401 - 4ms - GET /api/users/me
[0mGET /api/users/me [33m401[0m 3.436 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDI3OSwiZXhwIjoxNzYxNjU5MDc5LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.Pkq0vIA6EtvzF8O5Ny79z0dInjKxMoH2oCTu-VjWduQ' AND "Session"."expiresAt" > '2025-10-21 13:44:47.806 +00:00';
[2025-10-21 15:44:47] [149ee164-9474-4554-ac5c-15b144f8d2b0] PUT /api/users/me 401 - 3ms - PUT /api/users/me
[0mPUT /api/users/me [33m401[0m 2.688 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDI3OSwiZXhwIjoxNzYxNjU5MDc5LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.Pkq0vIA6EtvzF8O5Ny79z0dInjKxMoH2oCTu-VjWduQ' AND "Session"."expiresAt" > '2025-10-21 13:44:48.070 +00:00';
[2025-10-21 15:44:48] [66b89e66-5c36-40a6-8651-b45a1ece049e] GET /api/users/search?q=test 401 - 3ms - GET /api/users/search?q=test
[0mGET /api/users/search?q=test [33m401[0m 2.921 ms - 98[0m
Executing (default): SELECT count(*) AS "count" FROM "users" AS "User" WHERE "User"."deletedAt" IS NULL;
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE "User"."deletedAt" IS NULL ORDER BY "User"."createdAt" DESC LIMIT 10 OFFSET 0;
[2025-10-21 15:44:48] [5cb24f79-3a6b-4ae7-9d57-1479e0ab4f18] undefined undefined undefined - undefinedms - Users list retrieved successfully
[2025-10-21 15:44:48] [5cb24f79-3a6b-4ae7-9d57-1479e0ab4f18] GET /api/users?page=1&limit=10 200 - 5ms - GET /api/users?page=1&limit=10
[0mGET /api/users?page=1&limit=10 [32m200[0m 4.795 ms - 5340[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDI3OSwiZXhwIjoxNzYxNjU5MDc5LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.Pkq0vIA6EtvzF8O5Ny79z0dInjKxMoH2oCTu-VjWduQ' AND "Session"."expiresAt" > '2025-10-21 13:44:48.602 +00:00';
[2025-10-21 15:44:48] [5c2e4e53-2c87-46f4-88fe-b03183300a00] POST /api/users/me/avatar 401 - 4ms - POST /api/users/me/avatar
[0mPOST /api/users/me/avatar [33m401[0m 2.942 ms - 98[0m
[2025-10-21 15:44:49] [e6d76ada-aeb6-4049-9fcf-0b2c14248f2e] POST /api/auth/register 400 - 1ms - POST /api/auth/register
[0mPOST /api/auth/register [33m400[0m 0.776 ms - 328[0m
[2025-10-21 15:44:50] [537ec167-48b5-4ee2-81a7-fc0968a89c76] POST /api/auth/login 400 - 1ms - POST /api/auth/login
[0mPOST /api/auth/login [33m400[0m 0.771 ms - 180[0m
[2025-10-21 15:44:51] [57510ab1-2548-490d-8f00-77e5048eaf62] DELETE /api/users/me 401 - 1ms - DELETE /api/users/me
[0mDELETE /api/users/me [33m401[0m 0.345 ms - 87[0m
[2025-10-21 15:44:51] [226b338c-24e1-4cb0-9b0c-c96b26a592c9] POST /api/users/me/device-token 404 - 0ms - POST /api/users/me/device-token
[0mPOST /api/users/me/device-token [33m404[0m 0.331 ms - 66[0m
[2025-10-21 15:44:51] [f8630586-86df-4888-802b-b4dda1fdd2f7] DELETE /api/users/me/device-token 404 - 1ms - DELETE /api/users/me/device-token
[0mDELETE /api/users/me/device-token [33m404[0m 0.297 ms - 66[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDI3OSwiZXhwIjoxNzYxNjU5MDc5LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.Pkq0vIA6EtvzF8O5Ny79z0dInjKxMoH2oCTu-VjWduQ' AND "Session"."expiresAt" > '2025-10-21 13:44:52.002 +00:00';
[2025-10-21 15:44:52] [d83904ca-104c-41d7-88e8-81073fd8dd6b] GET /api/users/me/export 401 - 3ms - GET /api/users/me/export
[0mGET /api/users/me/export [33m401[0m 3.211 ms - 98[0m
Executing (default): SELECT "id", "username", "email", "firstName", "lastName", "avatar", "bio", "phone", "status", "role", "approvalStatus", "approvedBy", "approvedAt", "rejectionReason", "emailVerified", "failedLoginAttempts", "lockedUntil", "lastLoginAt", "publicKey", "createdAt", "updatedAt", "deletedAt" FROM "users" AS "User" WHERE ("User"."deletedAt" IS NULL AND "User"."id" = '6ee36bd6-22d5-4798-92a2-7d4d2ff49768');
[2025-10-21 15:44:52] [e039a50c-9773-445c-a582-6ab83a1415ca] undefined undefined undefined - undefinedms - User retrieved successfully
[2025-10-21 15:44:52] [e039a50c-9773-445c-a582-6ab83a1415ca] GET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 200 - 3ms - GET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/users/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [32m200[0m 3.431 ms - 530[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDI3OSwiZXhwIjoxNzYxNjU5MDc5LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.Pkq0vIA6EtvzF8O5Ny79z0dInjKxMoH2oCTu-VjWduQ' AND "Session"."expiresAt" > '2025-10-21 13:44:52.564 +00:00';
[2025-10-21 15:44:52] [dde82d50-5314-40f3-b8f1-40addc8bef62] POST /api/messages 401 - 3ms - POST /api/messages
[0mPOST /api/messages [33m401[0m 2.756 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDI3OSwiZXhwIjoxNzYxNjU5MDc5LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.Pkq0vIA6EtvzF8O5Ny79z0dInjKxMoH2oCTu-VjWduQ' AND "Session"."expiresAt" > '2025-10-21 13:44:52.839 +00:00';
[2025-10-21 15:44:52] [76d16bd6-ada1-4d19-9176-ef4fcd54c7d8] GET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768 401 - 3ms - GET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/messages?conversationWith=6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [33m401[0m 3.097 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDI3OSwiZXhwIjoxNzYxNjU5MDc5LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.Pkq0vIA6EtvzF8O5Ny79z0dInjKxMoH2oCTu-VjWduQ' AND "Session"."expiresAt" > '2025-10-21 13:44:53.117 +00:00';
[2025-10-21 15:44:53] [9e884383-db5f-4819-ac2c-37deadd50682] GET /api/messages/search?q=test 401 - 5ms - GET /api/messages/search?q=test
[0mGET /api/messages/search?q=test [33m401[0m 5.100 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDI3OSwiZXhwIjoxNzYxNjU5MDc5LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.Pkq0vIA6EtvzF8O5Ny79z0dInjKxMoH2oCTu-VjWduQ' AND "Session"."expiresAt" > '2025-10-21 13:44:53.397 +00:00';
[2025-10-21 15:44:53] [d085746f-fc69-48f7-a911-e6800446bc33] GET /api/messages/conversations 401 - 3ms - GET /api/messages/conversations
[0mGET /api/messages/conversations [33m401[0m 2.944 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDI3OSwiZXhwIjoxNzYxNjU5MDc5LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.Pkq0vIA6EtvzF8O5Ny79z0dInjKxMoH2oCTu-VjWduQ' AND "Session"."expiresAt" > '2025-10-21 13:44:53.700 +00:00';
[2025-10-21 15:44:53] [1a223c2c-99ec-4804-8ac6-59bfa61981eb] GET /api/contacts 401 - 4ms - GET /api/contacts
[0mGET /api/contacts [33m401[0m 3.494 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDI3OSwiZXhwIjoxNzYxNjU5MDc5LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.Pkq0vIA6EtvzF8O5Ny79z0dInjKxMoH2oCTu-VjWduQ' AND "Session"."expiresAt" > '2025-10-21 13:44:53.980 +00:00';
[2025-10-21 15:44:53] [c7df5a20-739a-44ff-ba93-88524329aa63] GET /api/contacts/search?q=test 401 - 3ms - GET /api/contacts/search?q=test
[0mGET /api/contacts/search?q=test [33m401[0m 2.885 ms - 98[0m
Executing (default): SELECT "id", "userId", "token", "refreshToken", "ipAddress", "userAgent", "expiresAt", "createdAt", "lastAccessedAt" FROM "sessions" AS "Session" WHERE "Session"."token" = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ZWUzNmJkNi0yMmQ1LTQ3OTgtOTJhMi03ZDRkMmZmNDk3NjgiLCJ1c2VybmFtZSI6InRlc3R1c2VyMSIsImVtYWlsIjoidXNlcjFAdGVzdC5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc2MTA1NDI3OSwiZXhwIjoxNzYxNjU5MDc5LCJhdWQiOiJtZXNzZW5nZXItdXNlcnMiLCJpc3MiOiJtZXNzZW5nZXItYmFja2VuZCIsInN1YiI6IjZlZTM2YmQ2LTIyZDUtNDc5OC05MmEyLTdkNGQyZmY0OTc2OCJ9.Pkq0vIA6EtvzF8O5Ny79z0dInjKxMoH2oCTu-VjWduQ' AND "Session"."expiresAt" > '2025-10-21 13:44:54.246 +00:00';
[2025-10-21 15:44:54] [d4758a46-5558-4b56-813a-586362133815] POST /api/contacts 401 - 3ms - POST /api/contacts
[0mPOST /api/contacts [33m401[0m 2.811 ms - 98[0m
[2025-10-21 15:44:54] [9204e602-9286-4125-8b82-2a4b3978e6ad] POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block 429 - 0ms - POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block
[0mPOST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/block [33m429[0m 0.491 ms - 67[0m
[2025-10-21 15:44:54] [6cd0a72c-647d-442f-9751-688b132ef3cd] POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock 429 - 0ms - POST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock
[0mPOST /api/contacts/6ee36bd6-22d5-4798-92a2-7d4d2ff49768/unblock [33m429[0m 0.285 ms - 67[0m
[2025-10-21 15:44:55] [b269bc12-4797-4ee8-992d-45aba2748d04] GET /api/groups 429 - 0ms - GET /api/groups
[0mGET /api/groups [33m429[0m 0.268 ms - 67[0m
[2025-10-21 15:44:55] [6af14f96-b24c-4a36-a6e2-bdbeb451e645] POST /api/groups 429 - 1ms - POST /api/groups
[0mPOST /api/groups [33m429[0m 0.349 ms - 67[0m
[2025-10-21 15:44:55] [302b97b4-39d7-4bd2-a534-b0d7f2c184a2] POST /api/calls 429 - 0ms - POST /api/calls
[0mPOST /api/calls [33m429[0m 0.268 ms - 67[0m
[2025-10-21 15:44:55] [eee8f397-dad6-47e0-892e-02eb3d68f5cf] POST /api/calls/dummy-call-id/respond 429 - 1ms - POST /api/calls/dummy-call-id/respond
[0mPOST /api/calls/dummy-call-id/respond [33m429[0m 0.278 ms - 67[0m
[2025-10-21 15:44:56] [c77dd91f-9c6e-4ddd-8a6e-b66feb0cea48] GET /api/calls/dummy-call-id 429 - 1ms - GET /api/calls/dummy-call-id
[0mGET /api/calls/dummy-call-id [33m429[0m 0.436 ms - 67[0m
[2025-10-21 15:44:56] [aa96bc15-b003-4546-ac2e-1b090f57ef2e] POST /api/calls/dummy-call-id/end 429 - 1ms - POST /api/calls/dummy-call-id/end
[0mPOST /api/calls/dummy-call-id/end [33m429[0m 0.330 ms - 67[0m
[2025-10-21 15:44:56] [f794e26f-a373-4e10-b766-a7a6b77afb59] GET /api/files 429 - 1ms - GET /api/files
[0mGET /api/files [33m429[0m 0.284 ms - 67[0m
[2025-10-21 15:44:57] [eeede698-abb6-4e62-9b6d-0dd0d81ca562] POST /api/files/upload 429 - 0ms - POST /api/files/upload
[0mPOST /api/files/upload [33m429[0m 0.295 ms - 67[0m
[2025-10-21 15:44:57] [1d3afb79-1ebf-49d8-8580-9f136e3a43fe] POST /api/encryption/keypair 429 - 0ms - POST /api/encryption/keypair
[0mPOST /api/encryption/keypair [33m429[0m 0.267 ms - 67[0m
[2025-10-21 15:44:57] [8b8c88d8-7cd5-4bcf-8366-f40c7e742ad3] GET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 429 - 0ms - GET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768
[0mGET /api/encryption/publickey/6ee36bd6-22d5-4798-92a2-7d4d2ff49768 [33m429[0m 0.301 ms - 67[0m
[2025-10-21 15:44:57] [29b3253a-0e6d-49d7-b8bb-8b8ee23dc780] POST /api/encryption/publickeys/batch 429 - 1ms - POST /api/encryption/publickeys/batch
[0mPOST /api/encryption/publickeys/batch [33m429[0m 0.317 ms - 67[0m
[2025-10-21 15:44:58] [2b44ea3e-a384-4d8c-a157-539b13332f83] PUT /api/encryption/keypair 429 - 0ms - PUT /api/encryption/keypair
[0mPUT /api/encryption/keypair [33m429[0m 0.319 ms - 67[0m
[2025-10-21 15:44:58] [3a15df96-3779-4c96-ba6c-9e2cdc882120] GET /api/notifications 429 - 1ms - GET /api/notifications
[0mGET /api/notifications [33m429[0m 0.300 ms - 67[0m
[2025-10-21 15:44:58] [799ce9cb-1b1c-473c-9a47-d11b444f6375] GET /api/notifications/unread-count 429 - 0ms - GET /api/notifications/unread-count
[0mGET /api/notifications/unread-count [33m429[0m 0.282 ms - 67[0m
[2025-10-21 15:44:58] [6150bdd8-7c7e-4b80-b390-1d41eff5716a] PUT /api/notifications/mark-all-read 429 - 1ms - PUT /api/notifications/mark-all-read
[0mPUT /api/notifications/mark-all-read [33m429[0m 0.322 ms - 67[0m
[2025-10-21 15:44:59] [28eb8a06-3176-47d0-a977-c2a8b30d080b] GET /api/notification-settings 429 - 1ms - GET /api/notification-settings
[0mGET /api/notification-settings [33m429[0m 0.342 ms - 67[0m
[2025-10-21 15:44:59] [577de15e-746a-4e50-a6cf-511eb9340572] PUT /api/notification-settings 429 - 0ms - PUT /api/notification-settings
[0mPUT /api/notification-settings [33m429[0m 0.361 ms - 67[0m
[2025-10-21 15:44:59] [6d416d3b-d6b1-4f4f-94a8-1d10d0685437] POST /api/notification-settings/reset 429 - 1ms - POST /api/notification-settings/reset
[0mPOST /api/notification-settings/reset [33m429[0m 0.379 ms - 67[0m
[2025-10-21 15:45:00] [39cf07e1-bbce-43cc-99d9-15a6cd6b301b] GET /api/notification-settings/preview 429 - 0ms - GET /api/notification-settings/preview
[0mGET /api/notification-settings/preview [33m429[0m 0.256 ms - 67[0m
[2025-10-21 15:45:00] [0346cb54-d25a-4b21-b161-f71d1a9303fc] GET /api/announcements 429 - 0ms - GET /api/announcements
[0mGET /api/announcements [33m429[0m 0.264 ms - 67[0m
[2025-10-21 15:45:00] [d21658b0-d9a7-4dfb-96f0-2c89168926f1] POST /api/auth/login 429 - 1ms - POST /api/auth/login
[0mPOST /api/auth/login [33m429[0m 0.244 ms - 67[0m
[2025-10-21 15:45:01] [47a555d3-9312-4462-b04a-4a7e00fb60da] POST /api/auth/logout 429 - 0ms - POST /api/auth/logout
[0mPOST /api/auth/logout [33m429[0m 0.278 ms - 67[0m
[2025-10-21 15:47:37] [c2bb328c-4138-413a-a2d6-e49d00d681ba] GET /health 429 - 0ms - GET /health
[0mGET /health [33m429[0m 0.326 ms - 67[0m
[2025-10-21 15:47:37] [28b35366-bb77-47b7-ad18-e4504d82ae1f] GET /health/detailed 429 - 0ms - GET /health/detailed
[0mGET /health/detailed [33m429[0m 0.315 ms - 67[0m
[2025-10-21 15:47:37] [4697e669-5d8d-4fa8-a89e-eaab6f9725e3] GET /health/ready 429 - 0ms - GET /health/ready
[0mGET /health/ready [33m429[0m 0.277 ms - 67[0m
[2025-10-21 15:47:37] [f2361b04-6e37-4a95-b20c-d8b354b2833d] GET /health/live 429 - 0ms - GET /health/live
[0mGET /health/live [33m429[0m 0.262 ms - 67[0m
[2025-10-21 15:47:38] [7916ccae-d58a-49a1-8e71-e75481973d57] POST /api/auth/register 429 - 0ms - POST /api/auth/register
[0mPOST /api/auth/register [33m429[0m 0.245 ms - 67[0m
[2025-10-21 15:47:39] [242ea5cb-dc0a-4458-8927-a089c0d3b0ed] POST /api/auth/login 429 - 1ms - POST /api/auth/login
[0mPOST /api/auth/login [33m429[0m 0.236 ms - 67[0m
[2025-10-21 15:47:39] [174515aa-e273-4b20-bed9-d6784e60de4f] POST /api/auth/forgot-password 429 - 1ms - POST /api/auth/forgot-password
[0mPOST /api/auth/forgot-password [33m429[0m 0.276 ms - 67[0m
[2025-10-21 15:47:41] [249e2405-eced-4ed6-8fe3-3cd91ae14224] POST /api/auth/verify-email 429 - 0ms - POST /api/auth/verify-email
[0mPOST /api/auth/verify-email [33m429[0m 0.245 ms - 67[0m
[2025-10-21 15:47:41] [c8c95d88-fd0b-4f2d-8490-cdf5ff50f649] POST /api/auth/reset-password 429 - 0ms - POST /api/auth/reset-password
[0mPOST /api/auth/reset-password [33m429[0m 0.294 ms - 67[0m
[2025-10-21 15:47:44] [50bdaa90-8648-4ea2-b8d6-38ddbb326c30] POST /api/auth/resend-verification 429 - 0ms - POST /api/auth/resend-verification
[0mPOST /api/auth/resend-verification [33m429[0m 0.248 ms - 67[0m
[2025-10-21 15:47:44] [732cfa0f-8164-4b1f-aaad-3ff5997a86d6] GET /api/users?page=1&limit=10 429 - 0ms - GET /api/users?page=1&limit=10
[0mGET /api/users?page=1&limit=10 [33m429[0m 0.266 ms - 67[0m
[2025-10-21 15:47:45] [fffffd4d-9cf4-452d-93e7-ea3ce5d5ca6e] POST /api/auth/login 429 - 1ms - POST /api/auth/login
[0mPOST /api/auth/login [33m429[0m 0.277 ms - 67[0m
[2025-10-21 15:51:00] [6cc58b6f-fd60-4e5a-9704-374c2e095a22] GET /health 429 - 1ms - GET /health
[0mGET /health [33m429[0m 1.125 ms - 67[0m
[2025-10-21 15:51:06] [2671f900-39c2-4ad4-8d36-a2dcd43b41c7] GET /health 429 - 1ms - GET /health
[0mGET /health [33m429[0m 0.269 ms - 67[0m
[2025-10-21 15:53:11] [ad21e9e6-1ad1-4d09-bf49-91ab290d75b6] GET /health 429 - 0ms - GET /health
[0mGET /health [33m429[0m 0.526 ms - 67[0m
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node src/server.js`[39m
âœ… Sequelize instance created for development environment
2025-10-21T14:45:44.720Z [[32minfo[39m]: Notification settings cache cleanup initialized
2025-10-21T14:45:44.723Z [[32minfo[39m]: Auto cleanup for expired notifications started
2025-10-21T14:45:45.051Z [[32minfo[39m]: Data retention job scheduled.
ðŸ“š Swagger UI will be available at /api-docs
ðŸ”§ Starting server initialization...
ðŸ“ Initializing logger...
âœ… Logger initialized
ðŸ’¾ Initializing database...
Executing (default): SELECT 1
âœ… Database connection established successfully.
âš ï¸  Database sync disabled (models have naming inconsistencies)
âœ… Database initialized
ðŸ”´ Initializing Redis...
âœ… Redis connection established successfully
âœ… Redis initialized
ðŸ“¦ Loading app.js...
ðŸ“¦ App.js loaded, initializing services...
2025-10-21T14:45:45.214Z [[32minfo[39m]: Upload directories created successfully
{
  "uploadDir": "./uploads",
  "tempDir": "./uploads/temp"
}
2025-10-21T14:45:45.215Z [[33mwarn[39m]: âš ï¸  ClamAV not available on Windows - virus scanning disabled for development
2025-10-21T14:45:45.216Z [[32minfo[39m]: File upload service initialized successfully
âœ… File upload service initialized
2025-10-21T14:45:45.216Z [[33mwarn[39m]: âš ï¸  Virus update service skipped on Windows (ClamAV not available)
2025-10-21T14:45:45.222Z [[32minfo[39m]: Generated fallback icon for document:
2025-10-21T14:45:45.225Z [[32minfo[39m]: Generated fallback icon for video:
2025-10-21T14:45:45.227Z [[32minfo[39m]: Generated fallback icon for audio:
2025-10-21T14:45:45.230Z [[32minfo[39m]: Generated fallback icon for archive:
2025-10-21T14:45:45.233Z [[32minfo[39m]: Generated fallback icon for code:
2025-10-21T14:45:45.236Z [[32minfo[39m]: Generated fallback icon for default:
2025-10-21T14:45:45.253Z [[32minfo[39m]: Daily thumbnail cleanup scheduled for 2:00 AM
2025-10-21T14:45:45.253Z [[32minfo[39m]: Thumbnail service initialized successfully
2025-10-21T14:45:45.256Z [[32minfo[39m]: File cleanup jobs scheduled
2025-10-21T14:45:45.257Z [[32minfo[39m]: File cleanup service initialized successfully
âœ… Services initialized
ðŸš€ Creating server...
ðŸš€ =====================================
ðŸš€ Messenger Backend Server
ðŸš€ =====================================
ðŸ“ Environment: development
ðŸŒ Server: http://0.0.0.0:4000
ðŸ“š API Docs: http://localhost:4000/api-docs
ðŸ¥ Health: http://localhost:4000/health
â±ï¸  Started at: 2025-10-21T14:45:45.259Z
ðŸš€ =====================================

ðŸ”§ Development Mode Features:
  â€¢ Hot reload enabled
  â€¢ Detailed error messages
  â€¢ Request logging enabled
  â€¢ CORS configured for local development
ðŸš€ =====================================
ðŸš€ Server running on 0.0.0.0:4000
ðŸ“š API Documentation available at http://localhost:4000/api-docs
ðŸ¥ Health check available at http://localhost:4000/health
âœ… Message service initialized
ðŸ“¡ WebSocket server initialized with Redis adapter for scaling
âœ… WebSocket service initialized successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node src/server.js`[39m
âœ… Sequelize instance created for development environment
2025-10-21T14:46:15.512Z [[32minfo[39m]: Notification settings cache cleanup initialized
2025-10-21T14:46:15.514Z [[32minfo[39m]: Auto cleanup for expired notifications started
2025-10-21T14:46:15.738Z [[32minfo[39m]: Data retention job scheduled.
ðŸ“š Swagger UI will be available at /api-docs
ðŸ”§ Starting server initialization...
ðŸ“ Initializing logger...
âœ… Logger initialized
ðŸ’¾ Initializing database...
Executing (default): SELECT 1
âœ… Database connection established successfully.
âš ï¸  Database sync disabled (models have naming inconsistencies)
âœ… Database initialized
ðŸ”´ Initializing Redis...
âœ… Redis connection established successfully
âœ… Redis initialized
ðŸ“¦ Loading app.js...
ðŸ“¦ App.js loaded, initializing services...
2025-10-21T14:46:15.852Z [[32minfo[39m]: Upload directories created successfully
{
  "uploadDir": "./uploads",
  "tempDir": "./uploads/temp"
}
2025-10-21T14:46:15.852Z [[33mwarn[39m]: âš ï¸  ClamAV not available on Windows - virus scanning disabled for development
2025-10-21T14:46:15.852Z [[32minfo[39m]: File upload service initialized successfully
âœ… File upload service initialized
2025-10-21T14:46:15.853Z [[33mwarn[39m]: âš ï¸  Virus update service skipped on Windows (ClamAV not available)
2025-10-21T14:46:15.856Z [[32minfo[39m]: Generated fallback icon for document:
2025-10-21T14:46:15.858Z [[32minfo[39m]: Generated fallback icon for video:
2025-10-21T14:46:15.860Z [[32minfo[39m]: Generated fallback icon for audio:
2025-10-21T14:46:15.862Z [[32minfo[39m]: Generated fallback icon for archive:
2025-10-21T14:46:15.863Z [[32minfo[39m]: Generated fallback icon for code:
2025-10-21T14:46:15.865Z [[32minfo[39m]: Generated fallback icon for default:
2025-10-21T14:46:15.874Z [[32minfo[39m]: Daily thumbnail cleanup scheduled for 2:00 AM
2025-10-21T14:46:15.875Z [[32minfo[39m]: Thumbnail service initialized successfully
2025-10-21T14:46:15.877Z [[32minfo[39m]: File cleanup jobs scheduled
2025-10-21T14:46:15.877Z [[32minfo[39m]: File cleanup service initialized successfully
âœ… Services initialized
ðŸš€ Creating server...
ðŸš€ =====================================
ðŸš€ Messenger Backend Server
ðŸš€ =====================================
ðŸ“ Environment: development
ðŸŒ Server: http://0.0.0.0:4000
ðŸ“š API Docs: http://localhost:4000/api-docs
ðŸ¥ Health: http://localhost:4000/health
â±ï¸  Started at: 2025-10-21T14:46:15.879Z
ðŸš€ =====================================

ðŸ”§ Development Mode Features:
  â€¢ Hot reload enabled
  â€¢ Detailed error messages
  â€¢ Request logging enabled
  â€¢ CORS configured for local development
ðŸš€ =====================================
âŒ Port 4000 is already in use
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
